(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{NC86:function(e,t,a){"use strict";a.r(t),a.d(t,"LigatabelleModule",(function(){return O}));var i=a("ofXK"),l=a("3Pt+"),n=a("tyNb"),s=a("btWG"),o=a("th7h"),r=a("fXoL");let c=(()=>{class e{constructor(e){this.currentUserService=e}canActivate(){return this.currentUserService.hasAnyPermisson([])}}return e.\u0275fac=function(t){return new(t||e)(r.Sb(o.a))},e.\u0275prov=r.Fb({token:e,factory:e.\u0275fac}),e})();var d=a("mrSG"),b=a("PEb7");const h={moduleTranslationKey:"WETTKAEMPFE",pageTitleTranslationKey:"WETTKAEMPFE.WETTKAEMPFE.TITLE",navigationCardsConfig:{navigationCards:[]}},g={columns:[{translationKey:"WETTKAEMPFE.LIGATABELLE.TABELLENPLATZ",propertyName:"tabellenplatz",width:15,sortable:!1},{translationKey:"WETTKAEMPFE.LIGATABELLE.MANNSCHAFTNAME",propertyName:"mannschaft_name",width:70,sortable:!1},{translationKey:"WETTKAEMPFE.LIGATABELLE.MATCHPUNKTE",propertyName:"matchpunkte",width:15,sortable:!1},{translationKey:"WETTKAEMPFE.LIGATABELLE.SATZPUNKTE",propertyName:"satzpunkte",width:15,sortable:!1},{translationKey:"WETTKAEMPFE.LIGATABELLE.SATZPUNKTDIFFERENZ",propertyName:"satzpkt_differenz",width:15,sortable:!1}]};var u=a("nr0C"),E=a("21OO"),p=a("X628"),L=a("gQPg"),T=a("w90F"),m=a("3lZk"),v=a("yljE"),A=a("zLSN"),N=a("xOPY"),f=a("/2r1"),w=a("sYmb");const S=function(e){return[e]};let y=(()=>{class e extends b.CommonComponentDirective{constructor(e,t,a,i,l){super(),this.router=e,this.route=t,this.notificationService=a,this.veranstaltungsDataProvider=i,this.ligatabelleDataProvider=l,this.config=h,this.config_table=g,this.PLACEHOLDER_VAR="Zur Suche Liga-Bezeichnung eingeben...",this.loading=!0,this.loadingLigatabelle=!0,this.multipleSelections=!0}ngOnInit(){console.log("Bin im Liga"),this.loadTableData(),this.providedID=void 0,this.hasID=!1,this.notificationService.discardNotification(),this.route.params.subscribe(e=>{Object(p.c)(e.id)?console.log("no params"):(this.providedID=parseInt(e.id,10),console.log("Provided Id ",this.providedID),this.hasID=!0)})}loadTableData(){return Object(d.a)(this,void 0,void 0,(function*(){this.loadedYears=[],this.availableYears=[],this.loadedVeranstaltungen=new Map,this.veranstaltungIdMap=new Map;try{const e=yield this.veranstaltungsDataProvider.findAllSportyearDestinct();this.loadedYears=e.payload;for(const t of e.payload){const e=yield this.veranstaltungsDataProvider.findBySportjahrDestinct(t.sportjahr);for(const a of e.payload)this.veranstaltungIdMap.set(a.id,a),this.loadedVeranstaltungen.set(t.sportjahr,e.payload),this.availableYears.includes(t)||this.availableYears.push(t)}this.loading=!1,this.loadingLigatabelle=!1,this.selectedYearId=this.availableYears[0].id,this.availableYears.length>0&&this.onSelectYear(this.availableYears)}catch(e){this.loading=!1,this.loadingLigatabelle=!1,console.log(e)}}))}loadLigaTableRows(){this.loadingLigatabelle=!0,this.ligatabelleDataProvider.getLigatabelleVeranstaltung(this.selectedVeranstaltung.id).then(e=>this.handleLigatabelleSuccess(e)).catch(()=>this.handleLigatabelleFailure())}handleLigatabelleFailure(){console.log("failure"),this.rowsLigatabelle=[],this.loadingLigatabelle=!1}handleLigatabelleSuccess(e){console.log("success"),this.rowsLigatabelle=[],this.remainingLigatabelleRequests=e.payload.length,e.payload.length<=0||(this.rowsLigatabelle=Object(b.toTableRows)(e.payload)),this.loadingLigatabelle=!1}ligatabelleLinking(){this.router.navigateByUrl("/wettkaempfe/"+this.buttonForward)}onSelectYear(e){document.querySelector("#Button").style.display="block",this.veranstaltungenForYear=[],this.veranstaltungenForYear=this.loadedVeranstaltungen.get(e[0].sportjahr),this.selectedVeranstaltungId=this.veranstaltungenForYear[0].id,this.onSelectVeranstaltung([this.veranstaltungIdMap.get(this.selectedVeranstaltungId)])}onSelectVeranstaltung(e){this.selectedVeranstaltung=e[0],this.selectedVeranstaltungName=this.selectedVeranstaltung.name,this.buttonForward=this.selectedVeranstaltung.id,this.loadLigaTableRows()}}return e.\u0275fac=function(t){return new(t||e)(r.Jb(n.c),r.Jb(n.a),r.Jb(L.c),r.Jb(u.a),r.Jb(E.a))},e.\u0275cmp=r.Db({type:e,selectors:[["bla-wettkaempfe"]],features:[r.ub],decls:33,vars:35,consts:[[3,"config"],[1,"layout-elements"],[1,"flexChild"],[1,"blackLink"],[2,"width","10%","margin-bottom","3%"],["selectionListHeight","3em",2,"width","10%","flex-grow","0","height","20px",3,"items","optionFieldSelector","loading","multipleSelections","selectedItemIds","onSelect"],["id","example",1,"table","table-hover","table-sm","table-responsive-sm","thead-light","table-striped",2,"width","80%"],["selectionListHeight","15em",2,"width","60%","flex-grow","0",3,"items","placeholderTranslationKey","optionFieldSelector","multipleSelections","selectedItemIds","onSelect"],[1,"row"],[3,"config","rows","loading","onRowEntry"],["id","Button"],[3,"id","onClick"],[1,"col-sm-9"],[1,"invalid-feedback"]],template:function(e,t){1&e&&(r.Ob(0,"bla-common-dialog",0),r.Ob(1,"div",1),r.Ob(2,"bla-row-layout"),r.Ob(3,"div",2),r.Ob(4,"h5"),r.Ob(5,"a",3),r.wc(6),r.Yb(7,"translate"),r.Nb(),r.Nb(),r.Ob(8,"table",4),r.Ob(9,"bla-selectionlist",5),r.Vb("onSelect",(function(e){return t.onSelectYear(e)})),r.Nb(),r.Nb(),r.Ob(10,"div"),r.Ob(11,"h5"),r.Ob(12,"a",3),r.wc(13),r.Yb(14,"translate"),r.Nb(),r.Nb(),r.Ob(15,"table",6),r.Ob(16,"bla-quicksearch-list",7),r.Vb("onSelect",(function(e){return t.onSelectVeranstaltung(e)})),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Ob(17,"div"),r.Ob(18,"h5"),r.Ob(19,"a",3),r.wc(20),r.Yb(21,"translate"),r.Nb(),r.Nb(),r.Ob(22,"div",8),r.Ob(23,"h5"),r.Ob(24,"bla-data-table",9),r.Vb("onRowEntry",(function(){return t.ligatabelleLinking()})),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Ob(25,"div",10),r.Ob(26,"bla-button",11),r.Vb("onClick",(function(){return t.ligatabelleLinking()})),r.wc(27),r.Yb(28,"translate"),r.Nb(),r.Nb(),r.Ob(29,"div",12),r.Ob(30,"div",13),r.wc(31),r.Yb(32,"translate"),r.Nb(),r.Nb(),r.Nb(),r.Nb(),r.Nb()),2&e&&(r.dc("config",t.config),r.xb(6),r.xc(r.Zb(7,21,"MANAGEMENT.SPORTJAHR_OVERVIEW.TABLE.HEADERS.SPORTJAHR")),r.xb(3),r.dc("items",t.availableYears)("optionFieldSelector","sportjahr")("loading",t.loading)("multipleSelections",!t.multipleSelections)("selectedItemIds",r.ic(31,S,t.selectedYearId)),r.xb(4),r.xc(r.Zb(14,23,"WETTKAEMPFE.LIGATABELLE.HEADER.VERANSTALTUNG")),r.xb(3),r.dc("items",t.veranstaltungenForYear)("placeholderTranslationKey",t.PLACEHOLDER_VAR)("optionFieldSelector","ligaName")("multipleSelections",!t.multipleSelections)("selectedItemIds",r.ic(33,S,t.selectedVeranstaltungId)),r.xb(4),r.xc(r.Zb(21,25,"WETTKAEMPFE.LIGATABELLE.TITEL")),r.xb(4),r.dc("config",t.config_table)("rows",t.rowsLigatabelle)("loading",t.loadingLigatabelle),r.xb(2),r.dc("id","regionSaveButton"),r.xb(1),r.zc(" ",r.Zb(28,27,"WETTKAEMPFE.LIGATABELLE.LINKDESCRIPTION")," ",t.selectedVeranstaltungName," "),r.xb(4),r.yc(" ",r.Zb(32,29,"MANAGEMENT.REGION_DETAIL.FORM.REGION_TYP.ERROR")," "))},directives:[T.a,m.a,v.a,A.a,N.a,f.a],pipes:[w.d],styles:[""]}),e})();const I=[{path:"",component:y,canActivate:[c],pathMatch:"full"},{path:"/:id",component:y,canActivate:[c],pathMatch:"full"}];let O=(()=>{class e{}return e.\u0275mod=r.Hb({type:e}),e.\u0275inj=r.Gb({factory:function(t){return new(t||e)},providers:[c],imports:[[i.c,n.g.forChild(I),s.SharedModule,l.k]]}),e})()}}]);