!function(){function t(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&e(t,n)}function e(t,n){return(e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,n)}function n(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,s=i(t);if(e){var c=i(this).constructor;n=Reflect.construct(s,arguments,c)}else n=s.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){o=!0,s=t},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw s}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function l(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{UUi9:function(e,a,i){"use strict";i.r(a),i.d(a,"SportjahresplanModule",(function(){return me}));var c=i("ofXK"),o=i("3Pt+"),u=i("tyNb"),h=i("FpXt"),b=i("PEb7"),f=i("tY1a"),d={moduleTranslationKey:"SPORTJAHRESPLAN",pageTitleTranslationKey:"SPORTJAHRESPLAN.SPORTJAHRESPLAN.TITLE",navigationCardsConfig:{navigationCards:[]}},m={columns:[{translationKey:"SPORTJAHRESPLAN.WETTKAMPF.TABLE.CDAY",propertyName:"wettkampfTag",width:20},{translationKey:"SPORTJAHRESPLAN.WETTKAMPF.TABLE.DATE",propertyName:"wettkampfDatum",width:15},{translationKey:"SPORTJAHRESPLAN.WETTKAMPF.TABLE.TIME",propertyName:"wettkampfBeginn",width:15},{translationKey:"SPORTJAHRESPLAN.WETTKAMPF.TABLE.PLACE",propertyName:"wettkampfOrtsname",width:40}],actions:{actionTypes:[f.a.VIEW,f.a.MAP],width:6}},p={columns:[{translationKey:"SPORTJAHRESPLAN.MATCH.TABLE.NUMMER",propertyName:"nr",width:5},{translationKey:"SPORTJAHRESPLAN.MATCH.TABLE.SCHEIBE",propertyName:"scheibenNummer",width:5},{translationKey:"SPORTJAHRESPLAN.MATCH.TABLE.MANNSCHAFT",propertyName:"mannschaftName",width:20},{translationKey:"SPORTJAHRESPLAN.MATCH.TABLE.BEGEGNUNG",propertyName:"begegnung",width:5},{translationKey:"SPORTJAHRESPLAN.MATCH.TABLE.MATCHPUNKTE",propertyName:"matchpunkte",type:5,currentSortOrder:1,width:5},{translationKey:"SPORTJAHRESPLAN.MATCH.TABLE.SATZPUNKTE",propertyName:"satzpunkte",width:5}],actions:{actionTypes:[f.a.EDIT],width:6}},g=i("YfBl"),v=i("nr0C"),N=i("sQ0O"),S=i("BMmu"),O=i("X628"),k=function(){function t(e,n,a,i,s,c,o,l,u,h,b,f,d,m,p,g,v){r(this,t),this.id=e||null,this.mannschaftId=n||null,this.mannschaftName=a||"Mannschaft 1",this.wettkampfId=i||null,this.nr=s||null,this.begegnung=c||null,this.scheibenNummer=o||null,this.matchpunkte=l,this.satzpunkte=u,this.strafPunkteSatz1=h||0,this.strafPunkteSatz2=b||0,this.strafPunkteSatz3=f||0,this.strafPunkteSatz4=d||0,this.strafPunkteSatz5=m||0,this.passen=p||[],this.wettkampfTyp=v,this.wettkampfTag=g}return l(t,null,[{key:"copyFrom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new t;return n.id=e.id>=0?e.id:null,n.version=e.version>=0?e.version:null,n.mannschaftId=e.mannschaftId>=0?e.mannschaftId:null,n.mannschaftName=e.mannschaftName||"",n.wettkampfId=e.wettkampfId>=0?e.wettkampfId:null,n.wettkampfTag=e.wettkampfTag>=0?e.wettkampfTag:null,n.wettkampfTyp=e.wettkampfTyp||"",n.nr=e.nr>=0?e.nr:null,n.begegnung=e.begegnung>=0?e.begegnung:null,n.scheibenNummer=e.scheibenNummer>=0?e.scheibenNummer:null,n.matchpunkte=e.matchpunkte>=0?e.matchpunkte:null,n.satzpunkte=e.satzpunkte>=0?e.satzpunkte:null,n.strafPunkteSatz1=e.strafPunkteSatz1>=0?e.strafPunkteSatz1:null,n.strafPunkteSatz2=e.strafPunkteSatz2>=0?e.strafPunkteSatz2:null,n.strafPunkteSatz3=e.strafPunkteSatz3>=0?e.strafPunkteSatz3:null,n.strafPunkteSatz4=e.strafPunkteSatz4>=0?e.strafPunkteSatz4:null,n.strafPunkteSatz5=e.strafPunkteSatz5>=0?e.strafPunkteSatz5:null,Object(O.a)(e.passen)?n.passen=null:(n.passen=new Array,e.passen.forEach((function(t){n.passen.push(t)}))),n}}]),t}(),y=function t(e,n,a,i,s,c,o,l,u,h,b,f,d,m){r(this,t),this.id=e||null,this.mannschaftId=n||null,this.mannschaftName=a||"Mannschaft 1",this.wettkampfId=i||null,this.nr=s,this.begegnung=c,this.scheibenNummer=o||null,this.sumSatz=l||[5],this.matchpunkte=u,this.satzpunkte=h,this.fehlerpunkte=b||[],this.schuetzen=f||[],this.wettkampfTyp=m,this.wettkampfTag=d},w=function t(e,n,a,i,s,c,o,l,u){r(this,t),this.id=e||null,this.matchId=n||null,this.mannschaftId=a||null,this.wettkampfId=i||null,this.matchNr=s||null,this.lfdNr=c||null,this.dsbMitgliedId=o||null,this.ringzahl=l||[],this.rueckennummer=u||null},T=function t(e,n,a,i,s,c,o,l,u,h,b,f,d,m){r(this,t),this.id=e||null,this.matchId=n||null,this.mannschaftId=a||null,this.wettkampfId=i||null,this.matchNr=s||null,this.lfdNr=c||null,this.dsbMitgliedId=o||null,this.ringzahlPfeil1=l||null,this.ringzahlPfeil2=u||null,this.ringzahlPfeil3=h||null,this.ringzahlPfeil4=b||null,this.ringzahlPfeil5=f||null,this.ringzahlPfeil6=d||null,this.rueckennummer=m||null},E=function(){function t(){r(this,t)}return l(t,null,[{key:"passeToDO",value:function(t){return new T(t.id,t.matchId,t.mannschaftId,t.wettkampfId,t.matchNr,t.lfdNr,t.dsbMitgliedId,t.ringzahl[0],t.ringzahl[1],t.ringzahl[2],t.ringzahl[3],t.ringzahl[4],t.ringzahl[5],t.rueckennummer)}},{key:"passeToDTO",value:function(t){return new w(t.id,t.matchId,t.mannschaftId,t.wettkampfId,t.matchNr,t.lfdNr,t.dsbMitgliedId,[t.ringzahlPfeil1,t.ringzahlPfeil2,t.ringzahlPfeil3,t.ringzahlPfeil4,t.ringzahlPfeil5,t.ringzahlPfeil6],t.rueckennummer)}}]),t}();var P,I,z,C,M,A,R,x,D,L=function(){function t(){r(this,t)}return l(t,null,[{key:"matchToDO",value:function(t){var e=[],n=[];if(t.passen.length>0){var a=new Map;e[0]=[],e[1]=[],e[2]=[],n=[0,0,0,0,0];var i,c=s(t.passen);try{for(c.s();!(i=c.n()).done;){var r=i.value,o=E.passeToDO(r);if(a.has(r.rueckennummer))a.get(r.rueckennummer).push(o);else{var l=[];l.push(o),a.set(r.rueckennummer,l)}}}catch(S){c.e(S)}finally{c.f()}console.log("schuetzenPasseMap",a);var u=0;a.forEach((function(t,n){e[u]=t,u++})),console.log("schuetzen",e);for(var h=0;h<e[0].length;h++){if(e[0].length>5)for(var b=e[0].length;b>5;b--)e[0].pop();var f,d=s(e);try{for(d.s();!(f=d.n()).done;){var m=f.value;h<5&&(n[h]+=m[h].ringzahlPfeil1+m[h].ringzahlPfeil2)}}catch(S){d.e(S)}finally{d.f()}}for(var p=0;p<3;p++){for(var g=e[p].length,v=g,N=0;N<5-g;N++)e[p].push(new T(null,t.id,t.mannschaftId,t.wettkampfId,t.nr,v)),++v;e[p]=e[p].sort((function(t,e){return t.lfdNr-e.lfdNr}))}}return new y(t.id,t.mannschaftId,t.mannschaftName,t.wettkampfId,t.nr,t.begegnung,t.scheibenNummer,n,t.matchpunkte,t.satzpunkte,[t.strafPunkteSatz1,t.strafPunkteSatz2,t.strafPunkteSatz3,t.strafPunkteSatz4,t.strafPunkteSatz5],e,t.wettkampfTag,t.wettkampfTyp)}},{key:"matchToDTO",value:function(t){var e,n=[],a=s(t.schuetzen);try{for(a.s();!(e=a.n()).done;){var i,c=e.value,r=s(c);try{for(r.s();!(i=r.n()).done;){var o=i.value;o.rueckennummer=c[0].rueckennummer,n.push(E.passeToDTO(o))}}catch(l){r.e(l)}finally{r.f()}}}catch(l){a.e(l)}finally{a.f()}return new k(t.id,t.mannschaftId,t.mannschaftName,t.wettkampfId,t.nr,t.begegnung,t.scheibenNummer,t.matchpunkte,t.satzpunkte,t.fehlerpunkte[0],t.fehlerpunkte[1],t.fehlerpunkte[2],t.fehlerpunkte[3],t.fehlerpunkte[4],n,t.wettkampfTag,t.wettkampfTyp)}}]),t}(),_=i("fXoL"),U=((P=function(e){t(i,e);var a=n(i);function i(t){var e;return r(this,i),(e=a.call(this)).restClient=t,e.serviceSubUrl="v1/match",e}return l(i,[{key:"get",value:function(t){var e=this;return new Promise((function(n,a){e.restClient.GET((new g.UriBuilder).fromPath(e.getUrl()).path(t).build()).then((function(t){var e=L.matchToDO(t);n({result:g.RequestResult.SUCCESS,payload:e})}),(function(t){a(0===t.status?{result:g.RequestResult.CONNECTION_PROBLEM}:{result:g.RequestResult.FAILURE})}))}))}},{key:"create",value:function(t){var e=this,n=L.matchToDTO(t);return new Promise((function(t,a){e.restClient.POST(e.getUrl(),n).then((function(e){var n=L.matchToDO(e);t({result:g.RequestResult.SUCCESS,payload:n})}),(function(t){a(0===t.status?{result:g.RequestResult.CONNECTION_PROBLEM}:{result:g.RequestResult.FAILURE})}))}))}},{key:"update",value:function(t){var e=this,n=L.matchToDTO(t);return new Promise((function(t,a){e.restClient.PUT(e.getUrl(),n).then((function(e){var n=L.matchToDO(e);t({result:g.RequestResult.SUCCESS,payload:n})}),(function(t){a(0===t.status?{result:g.RequestResult.CONNECTION_PROBLEM}:{result:g.RequestResult.FAILURE})}))}))}},{key:"findAllWettkampfMatchesAndNamesById",value:function(t){var e=this;return new Promise((function(n,a){e.restClient.GET((new g.UriBuilder).fromPath(e.getUrl()).path("findByWettkampfId/wettkampfid="+t).build()).then((function(t){var e,a;n({result:g.RequestResult.SUCCESS,payload:(e=t,a=[],e.forEach((function(t){return a.push(function(t){return k.copyFrom(t)}(t))})),a)})}),(function(t){a(0===t.status?{result:g.RequestResult.CONNECTION_PROBLEM}:{result:g.RequestResult.FAILURE})}))}))}},{key:"next",value:function(t){var e=this;return new Promise((function(n,a){e.restClient.GET((new g.UriBuilder).fromPath(e.getUrl()).path(t).path("next").build()).then((function(t){n({result:g.RequestResult.SUCCESS,payload:t})}),(function(t){a(0===t.status?{result:g.RequestResult.CONNECTION_PROBLEM}:{result:g.RequestResult.FAILURE})}))}))}},{key:"pair",value:function(t){var e=this;return new Promise((function(n,a){e.restClient.GET((new g.UriBuilder).fromPath(e.getUrl()).path(t).path("pair").build()).then((function(t){n({result:g.RequestResult.SUCCESS,payload:t})}),(function(t){a(0===t.status?{result:g.RequestResult.CONNECTION_PROBLEM}:{result:g.RequestResult.FAILURE})}))}))}},{key:"pairToFollow",value:function(t){var e=this;return new Promise((function(n,a){e.restClient.GET((new g.UriBuilder).fromPath(e.getUrl()).path(t).path("pairToFollow").build()).then((function(t){n({result:g.RequestResult.SUCCESS,payload:t})}),(function(t){a(0===t.status?{result:g.RequestResult.CONNECTION_PROBLEM}:{result:g.RequestResult.FAILURE})}))}))}},{key:"previousPair",value:function(t){var e=this;return new Promise((function(n,a){e.restClient.GET((new g.UriBuilder).fromPath(e.getUrl()).path(t).path("previousPair").build()).then((function(t){n({result:g.RequestResult.SUCCESS,payload:t})}),(function(t){a(0===t.status?{result:g.RequestResult.CONNECTION_PROBLEM}:{result:g.RequestResult.FAILURE})}))}))}}]),i}(g.DataProviderService)).\u0275fac=function(t){return new(t||P)(_.Sb(g.RestClient))},P.\u0275prov=_.Fb({token:P,factory:P.\u0275fac,providedIn:"root"}),P),F=i("9VTN"),V=i("gQPg"),H=i("AytR"),B=i("hEMT"),K=i("TcZ0"),J=function t(){r(this,t)},W=i("w90F"),X=i("hIfO"),j=i("cHN3"),Z=i("zLSN"),Y=i("xOPY"),q=i("/2r1"),G=i("xRjW"),$=i("sYmb"),Q=((I=function(e){t(i,e);var a=n(i);function i(t,e,n,s,c,o,l,u){var h;return r(this,i),(h=a.call(this)).router=t,h.route=e,h.notificationService=n,h.veranstaltungsDataProvider=s,h.wettkampfDataProvider=c,h.matchDataProvider=o,h.passeDataProviderService=l,h.matchProvider=u,h.config=d,h.config_table=m,h.config_table_match=p,h.PLACEHOLDER_VAR="Veranstaltung ausw\xe4hlen...",h.pdf=new Blob,h.multipleSelections=!0,h.loadingVeranstaltungen=!0,h.loadingWettkampfe=!1,h.loadingMatch=!1,h.tableContent=[],h.tableContentMatch=[],h.disabledButton=!0,h.disabledOtherButtons=!0,h.wettkaempfe=[new F.a],h.matches=[],h.loadingYears=!0,h}return l(i,[{key:"ngOnInit",value:function(){var t=this;this.route.params.subscribe((function(e){Object(O.c)(e.wettkampfId)?(t.wettkampfIdEnthalten=!1,t.findAvailableYears(),t.visible=!1):(t.wettkampfIdEnthalten=!0,t.wettkampfId=parseInt(e.wettkampfId,10),console.log("WettkampfID:",t.wettkampfId),t.findAvailableYears(),t.LoadWettkampf(),t.visible=!1)}))}},{key:"LoadWettkampf",value:function(){var t=this;this.wettkampfDataProvider.findAll().then((function(e){return t.handleLoadWettkampfSuccess(e)})).catch((function(e){return t.handleLoadWettkampfFailure(e)}))}},{key:"handleLoadWettkampfFailure",value:function(t){console.log("ERROR: Keine Wettkaempfe gefunden"),this.wettkampfIdEnthalten=!1,this.loadVeranstaltungen()}},{key:"handleLoadWettkampfSuccess",value:function(t){var e=this;this.wettkaempfe=[],this.wettkaempfe=t.payload,this.wettkaempfe.forEach((function(t){return e.findWettkampf(t)}))}},{key:"findWettkampf",value:function(t){console.log("Bin in findWettkampf"),this.wettkampfId===t.id&&(this.wettkampf=t,console.log("Wettkampf gefunden:",this.wettkampf),this.loadVeranstaltungen())}},{key:"loadVeranstaltungenByYear",value:function(t){var e=this;this.veranstaltungen=[],this.selectedWettkampf="",this.selectedWettkampfId=null,this.veranstaltungsDataProvider.findBySportyear(t).then((function(t){e.loadVeranstaltungenSuccess(t)})).catch((function(t){e.loadVeranstaltungenFailure(t)}))}},{key:"loadVeranstaltungen",value:function(){var t=this;this.veranstaltungen=[],this.selectedWettkampf="",this.selectedWettkampfId=null,this.veranstaltungsDataProvider.findAll().then((function(e){t.loadVeranstaltungenSuccess(e)})).catch((function(e){t.loadVeranstaltungenFailure(e)}))}},{key:"loadVeranstaltungenSuccess",value:function(t){var e=this;console.log("Bin in loadVeranstaltungenSuccess"),this.veranstaltungen=t.payload,this.loadingVeranstaltungen=!1,this.wettkampfIdEnthalten&&this.veranstaltungen.forEach((function(t){return e.findVeranstaltung(t)}))}},{key:"loadVeranstaltungenFailure",value:function(t){console.log("Bin in loadVeranstaltungenFailure"),this.veranstaltungen=t.payload}},{key:"findVeranstaltung",value:function(t){if(console.log("Bin in findVeranstaltung"),this.wettkampf.wettkampfVeranstaltungsId===t.id){var e,n;this.veranstaltung=t,console.log("Veranstaltung gefunden:",this.veranstaltung),this.currentVeranstaltungName=this.veranstaltung.name+" "+this.veranstaltung.sportjahr;var a,i=s(this.availableYears);try{for(i.s();!(a=i.n()).done;){var c=a.value;c.sportjahr==this.veranstaltung.sportjahr&&(this.selItemId=c.id,e=c)}}catch(r){i.e(r)}finally{i.f()}n=[this.veranstaltung],this.onSelectYear(e),this.onSelect(n),this.onView(this.wettkampf)}}},{key:"onSelectYear",value:function(t){var e=this;this.veranstaltungsDataProvider.findBySportyear(t.sportjahr).then((function(t){e.veranstaltungen=t.payload,e.loadingVeranstaltungen=!1})).catch((function(t){e.loadVeranstaltungenYearsFailure(t)}))}},{key:"onSelect",value:function(t){var e=this;this.selectedDTOs=[],this.selectedDTOs=t,this.selectedDTOs&&this.selectedDTOs.length>0&&(this.selectedVeranstaltungId=this.selectedDTOs[0].id),this.veranstaltungsDataProvider.findById(this.selectedVeranstaltungId).then((function(t){e.currentVeranstaltungName=t.payload.name+" "+t.payload.sportjahr})).catch((function(){e.currentVeranstaltungName=""})),this.rows=[],this.tableContent=[],null!=this.selectedVeranstaltungId&&this.loadTableRows()}},{key:"onView",value:function(t){if(console.log("DataOBJ",t),t.id>=0){this.selectedWettkampfId=t.id,this.selectedWettkampf=t.id.toString();var e=t;document.getElementById("WettkampfTitle").innerText=this.currentVeranstaltungName+" - "+e.wettkampfTag+". Wettkampftag",this.visible=!0,this.tableContentMatch=[],this.showMatches()}}},{key:"showMatches",value:function(){var t=this;this.matchProvider.findAllWettkampfMatchesAndNamesById(this.selectedWettkampfId).then((function(e){0!==e.payload.length?t.matchesExist():(t.matchesNotExist(),t.selectedWettkampfId-1<t.wettkampfListe[0].id?t.disabledButton=!1:t.matchProvider.findAllWettkampfMatchesAndNamesById(t.selectedWettkampfId-1).then((function(e){t.disabledButton=0===e.payload.length})).catch((function(t){}))),t.handleFindMatchSuccess(e)})).catch((function(e){return t.handleFindMatchFailure(e)}))}},{key:"onMap",value:function(t){var e=t;Object(B.a)(e)}},{key:"onButtonTabletClick",value:function(){this.router.navigateByUrl("/sportjahresplan/tabletadmin/"+this.selectedWettkampf)}},{key:"onButtonDownload",value:function(t){return(new g.UriBuilder).fromPath(H.a.backendBaseUrl).path("v1/download").path(t).path("?wettkampfid="+this.selectedWettkampf).build()}},{key:"isDisabled",value:function(){return this.disabledOtherButtons}},{key:"matchesExist",value:function(){this.disabledOtherButtons=!1,this.disabledButton=!0}},{key:"matchesNotExist",value:function(){this.disabledOtherButtons=!0,this.disabledButton=!1}},{key:"isDisabledGMButton",value:function(){return this.disabledButton}},{key:"generateMatches",value:function(){var t=this;this.matchDataProvider.generateDataForMatches(this.selectedWettkampfId).then((function(e){console.log("Response von generateMatches(): ",e),t.showMatches()})).catch((function(e){t.handleFailureGenerateMatches(),t.showMatches()}))}},{key:"handleFailureGenerateMatches",value:function(){this.notificationService.showNotification({id:"NOTIFICATION_GENERIERE_MATCHES",title:"SPORTJAHRESPLAN.GENERIERE_MATCHES.NOTIFICATION.TITLE",description:"SPORTJAHRESPLAN.GENERIERE_MATCHES.NOTIFICATION.DESCRIPTION",severity:V.d.INFO,origin:V.b.USER,type:V.e.OK,userAction:V.f.ACCEPTED})}},{key:"onEdit",value:function(t){var e=this;t.id>=0&&(this.selectedMatchId=t.id,this.matchProvider.pair(this.selectedMatchId).then((function(t){2===t.payload.length&&e.router.navigate(["/sportjahresplan/schusszettel/"+t.payload[0]+"/"+t.payload[1]])})))}},{key:"loadTableRows",value:function(){var t=this;this.loadingWettkampfe=!0,this.selectedWettkampf="",this.selectedWettkampfId=null,this.wettkampfDataProvider.findAllByVeranstaltungId(this.selectedVeranstaltungId).then((function(e){t.wettkampfListe=e.payload,t.handleFindWettkampfSuccess(e)})).catch((function(e){return t.handleFindWettkampfFailure(e)}))}},{key:"handleFindWettkampfFailure",value:function(t){this.rows=[],this.loadingWettkampfe=!1}},{key:"handleFindWettkampfSuccess",value:function(t){this.rows=[],this.remainingWettkampfRequests=t.payload.length,t.payload.length<=0&&(this.loadingWettkampfe=!1);var e,n=s(t.payload);try{for(n.s();!(e=n.n()).done;){var a=e.value,i=new F.a;i.wettkampfStrasse=a.wettkampfStrasse,i.wettkampfPlz=a.wettkampfPlz,i.wettkampfOrtsname=a.wettkampfOrtsname,i.wettkampfOrtsinfo=a.wettkampfOrtsinfo,i.wettkampfBeginn=a.wettkampfBeginn,i.wettkampfTag=a.wettkampfTag,i.wettkampfDatum=a.wettkampfDatum,i.id=a.id,i.wettkampfVeranstaltungsId=a.wettkampfVeranstaltungsId,i.version=a.version,this.tableContent.push(i)}}catch(c){n.e(c)}finally{n.f()}this.rows=Object(b.toTableRows)(this.tableContent),this.loadingWettkampfe=!1}},{key:"handleFindMatchFailure",value:function(t){this.matchRows=[],this.loadingMatch=!1}},{key:"handleFindMatchSuccess",value:function(t){this.matchRows=[],this.remainingMatchRequests=t.payload.length,t.payload.length<=0&&(this.loadingMatch=!1);var e,n=s(t.payload);try{for(n.s();!(e=n.n()).done;){var a=e.value,i=new y;i.id=a.id,i.nr=a.nr,i.begegnung=a.begegnung,i.scheibenNummer=a.scheibenNummer,i.mannschaftName=a.mannschaftName,i.matchpunkte=a.matchpunkte,i.satzpunkte=a.satzpunkte,i.version=a.version,this.tableContentMatch.push(i)}}catch(c){n.e(c)}finally{n.f()}this.matchRows=Object(b.toTableRows)(this.tableContentMatch),this.loadingMatch=!1}},{key:"findAvailableYears",value:function(){var t=this;this.availableYears=[],this.veranstaltungsDataProvider.findAllSportyearDestinct().then((function(e){t.loadVeranstaltungenYearsSuccess(e)})).catch((function(e){t.loadVeranstaltungenYearsFailure(e)}))}},{key:"loadVeranstaltungenYearsSuccess",value:function(t){this.loadingYears=!1;var e=1;if(t.payload!=[]){var n,a=s(t.payload);try{for(a.s();!(n=a.n()).done;){var i=n.value,c=new J;c.sportjahr=i.sportjahr.valueOf(),c.version=1,this.availableYears.push(c)}}catch(l){a.e(l)}finally{a.f()}this.availableYears.sort((function(t,e){return t.sportjahr.valueOf()<e.sportjahr.valueOf()?1:t.sportjahr.valueOf()>e.sportjahr.valueOf()?-1:void 0}));var r,o=s(this.availableYears);try{for(o.s();!(r=o.n()).done;)r.value.id=e,e++}catch(l){o.e(l)}finally{o.f()}console.log("Bin in loadVeranstaltungenYearSuccess!"),this.wettkampfIdEnthalten||(this.selItemId=this.availableYears[0].id,this.loadVeranstaltungenByYear(this.availableYears[0].sportjahr.valueOf()))}}},{key:"loadVeranstaltungenYearsFailure",value:function(t){this.loadingYears=!1,console.log("Bin in loadVeranstaltungenYearFailure")}}]),i}(b.CommonComponentDirective)).\u0275fac=function(t){return new(t||I)(_.Jb(u.c),_.Jb(u.a),_.Jb(V.c),_.Jb(v.a),_.Jb(N.a),_.Jb(S.a),_.Jb(K.a),_.Jb(U))},I.\u0275cmp=_.Db({type:I,selectors:[["bla-sportjahresplan"]],features:[_.ub],decls:58,vars:39,consts:[[3,"config"],[1,"layout-elements"],[1,"flexChild"],["routerLink","/Sportjahresplan",1,"blackLink"],["id","dropDownMenuYear",2,"width","80%","margin-bottom","2%"],[2,"width","40%",3,"id","items","optionFieldSelector","loading","selectedItemId","onSelect"],["id","example",1,"table","table-hover","table-sm","table-responsive-sm","thead-light","table-striped",2,"width","80%"],["selectionListHeight","15em",2,"width","40%","flex-grow","0",3,"items","loading","multipleSelections","placeholderTranslationKey","optionFieldSelector","onSelect"],[1,"row"],[1,"overview-dialog-content"],[3,"config","rows","loading","onViewEntry","onMapEntry"],["id","WettkampfTitle"],[3,"id","disabled","onClick"],[3,"id","downloadUrl","fileName","disabled"],[3,"disabled","click"],[3,"config","rows","loading","onEditEntry"]],template:function(t,e){1&t&&(_.Ob(0,"bla-common-dialog",0),_.Ob(1,"div",1),_.Ob(2,"bla-col-layout"),_.Ob(3,"div",2),_.Ob(4,"h3"),_.Ob(5,"a",3),_.wc(6),_.Yb(7,"translate"),_.Nb(),_.Nb(),_.Ob(8,"div",4),_.Ob(9,"bla-dropdown-menu",5),_.Vb("onSelect",(function(t){return e.onSelectYear(t)})),_.Nb(),_.Nb(),_.Ob(10,"table",6),_.Ob(11,"bla-quicksearch-list",7),_.Vb("onSelect",(function(t){return e.onSelect(t)})),_.Nb(),_.Nb(),_.Nb(),_.Ob(12,"div"),_.Ob(13,"h3"),_.wc(14," Wettkampftage der Veranstaltung "),_.Nb(),_.Ob(15,"div",8),_.Ob(16,"section",9),_.Ob(17,"bla-data-table",10),_.Vb("onViewEntry",(function(t){return e.onView(t)}))("onMapEntry",(function(t){return e.onMap(t)})),_.Nb(),_.Nb(),_.Nb(),_.Nb(),_.Nb(),_.Ob(18,"bla-col-layout"),_.Kb(19,"h3",11),_.Nb(),_.Ob(20,"bla-col-layout"),_.Ob(21,"h3"),_.Kb(22,"BR"),_.wc(23,"Ligatabelle Vorbereitung "),_.Kb(24,"BR"),_.wc(25,"\xa0"),_.Nb(),_.Nb(),_.Ob(26,"bla-col-layout"),_.Ob(27,"div"),_.Ob(28,"bla-button",12),_.Vb("onClick",(function(){return e.generateMatches()})),_.wc(29," generiere Matches "),_.Nb(),_.Nb(),_.Ob(30,"div"),_.Ob(31,"bla-download-button",13),_.wc(32,"Setzliste "),_.Nb(),_.Nb(),_.Ob(33,"div"),_.Ob(34,"bla-download-button",13),_.wc(35,"Schusszettel "),_.Nb(),_.Nb(),_.Ob(36,"div"),_.Ob(37,"bla-download-button",13),_.wc(38,"Bogenkontrollliste "),_.Nb(),_.Nb(),_.Ob(39,"div"),_.Ob(40,"bla-download-button",13),_.wc(41,"Meldezettel "),_.Nb(),_.Nb(),_.Ob(42,"div"),_.Ob(43,"bla-button",14),_.Vb("click",(function(){return e.onButtonTabletClick()})),_.wc(44,"Setup Tablets >"),_.Nb(),_.Nb(),_.Nb(),_.Ob(45,"bla-col-layout"),_.Kb(46,"BR"),_.Ob(47,"h3"),_.Kb(48,"BR"),_.wc(49,"Ligatabelle Durchf\xfchrung "),_.Kb(50,"BR"),_.wc(51,"\xa0"),_.Nb(),_.Kb(52,"BR"),_.Nb(),_.Ob(53,"bla-col-layout"),_.Ob(54,"div",8),_.Ob(55,"section",9),_.Ob(56,"bla-data-table",15),_.Vb("onEditEntry",(function(t){return e.onEdit(t)})),_.Nb(),_.Nb(),_.Nb(),_.Nb(),_.Kb(57,"router-outlet"),_.Nb(),_.Nb()),2&t&&(_.dc("config",e.config),_.xb(6),_.xc(_.Zb(7,37,"SPORTJAHRESPLAN.TITEL.VERANSTALTUNG")),_.xb(3),_.dc("id","Veranstaltungen-dropdown-menu")("items",e.availableYears)("optionFieldSelector","sportjahr")("loading",e.loadingYears)("selectedItemId",e.selItemId),_.xb(2),_.dc("items",e.veranstaltungen)("loading",e.loadingVeranstaltungen)("multipleSelections",!e.multipleSelections)("placeholderTranslationKey",e.PLACEHOLDER_VAR)("optionFieldSelector","name"),_.xb(6),_.dc("config",e.config_table)("rows",e.rows)("loading",e.loadingWettkampfe),_.xb(11),_.dc("id","generiereMatches")("disabled",e.isDisabledGMButton()),_.xb(3),_.dc("id","downloadSetzliste")("downloadUrl",e.onButtonDownload("pdf/setzliste"))("fileName","setzliste.pdf")("disabled",e.isDisabled()),_.xb(3),_.dc("id","downloadSchusszettel")("downloadUrl",e.onButtonDownload("pdf/schusszettel"))("fileName","schusszettel.pdf")("disabled",e.isDisabled()),_.xb(3),_.dc("id","downloadBogenkontrollliste")("downloadUrl",e.onButtonDownload("pdf/bogenkontrollliste"))("fileName","bogenkontrollliste.pdf")("disabled",e.isDisabled()),_.xb(3),_.dc("id","downloadMeldezettel")("downloadUrl",e.onButtonDownload("pdf/meldezettel"))("fileName","meldezettel.pdf")("disabled",e.isDisabled()),_.xb(3),_.dc("disabled",e.isDisabled()),_.xb(13),_.dc("config",e.config_table_match)("rows",e.matchRows)("loading",e.loadingMatch))},directives:[W.a,X.a,u.f,j.a,Z.a,Y.a,q.a,G.a,u.h],pipes:[$.d],styles:[""]}),I),tt=i("mrSG"),et=((z=function(e){t(i,e);var a=n(i);function i(t){var e;return r(this,i),(e=a.call(this)).restClient=t,e.serviceSubUrl="v1/match/schusszettel",e}return l(i,[{key:"findMatches",value:function(t,e){var n=this;return new Promise((function(a,i){n.restClient.GET((new g.UriBuilder).fromPath(n.getUrl()).path(t).path(e).build()).then((function(t){console.log("data in MatchDTO",t);var e=[L.matchToDO(t[0]),L.matchToDO(t[1])];a({result:g.RequestResult.SUCCESS,payload:e})}),(function(t){i(0===t.status?{result:g.RequestResult.CONNECTION_PROBLEM}:{result:g.RequestResult.FAILURE})}))}))}},{key:"create",value:function(t,e){var n=this,a=L.matchToDTO(t),i=L.matchToDTO(e);return new Promise((function(t,e){n.restClient.POST(n.getUrl(),[a,i]).then((function(e){var n=[L.matchToDO(e[0]),L.matchToDO(e[1])];t({result:g.RequestResult.SUCCESS,payload:n})}),(function(t){e(0===t.status?{result:g.RequestResult.CONNECTION_PROBLEM}:{result:g.RequestResult.FAILURE})}))}))}}]),i}(g.DataProviderService)).\u0275fac=function(t){return new(t||z)(_.Sb(g.RestClient))},z.\u0275prov=_.Fb({token:z,factory:z.\u0275fac,providedIn:"root"}),z),nt=i("NJqk"),at=i("FlTZ"),it=i("ny2l"),st=i("TmMT"),ct=((R=function(){function t(e,n,a,i,s){r(this,t),this.specialKeys=["Backspace","Tab","End","Home","Delete","Del","ArrowLeft","ArrowRight","Left","Right","Shift"],this.ALIAS_10="+",this.el=e,this.notificationService=s,this.allowedKeys=n,this.MIN_VAL=a,this.MAX_VAL=i}return l(t,[{key:"notificationMethod",value:function(t){this.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_EINGABEFEHLER",title:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.EINGABEFEHLER.TITLE",description:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.EINGABEFEHLER.DESCRIPTION",severity:nt.f.INFO,origin:nt.d.USER,type:nt.g.OK,userAction:nt.h.PENDING}),t.preventDefault()}},{key:"inRange",value:function(t){return parseInt(t,10)>=this.MIN_VAL&&parseInt(t,10)<=this.MAX_VAL}},{key:"onKeyDown",value:function(t){-1===this.specialKeys.indexOf(t.key)&&(this.allowedKeys.includes(t.key)&&this.inRange(this.el.nativeElement.value+parseInt(t.key,10))||this.notificationMethod(t))}},{key:"onKeyUp",value:function(t){if(-1===this.specialKeys.indexOf(t.key)&&(this.allowedKeys.includes(t.key)||this.inRange(this.el.nativeElement.value+parseInt(t.key,10)))){var e=parseInt(this.el.nativeElement.getAttribute("tabindex"),10);document.querySelector('[tabindex="'+(e+1)+'"]').focus()}}}]),t}()).\u0275fac=function(t){_.Ub()},R.\u0275dir=_.Eb({type:R,hostBindings:function(t,e){1&t&&_.Vb("keydown",(function(t){return e.onKeyDown(t)}))("keyup",(function(t){return e.onKeyUp(t)}))}}),R),rt=((A=function(e){t(i,e);var a=n(i);function i(t,e){var n;return r(this,i),(n=a.call(this,t,["1","2","3","4","5","6","7","8","9","0"],0,10,e)).ALIAS_10="+",n}return l(i,[{key:"onKeyDown",value:function(t){-1===this.specialKeys.indexOf(t.key)&&(t.key!==this.ALIAS_10?this.allowedKeys.includes(t.key)&&this.inRange(this.el.nativeElement.value+parseInt(t.key,10))||this.notificationMethod(t):this.el.nativeElement.value="10")}}]),i}(ct)).\u0275fac=function(t){return new(t||A)(_.Jb(_.l),_.Jb(nt.e))},A.\u0275dir=_.Eb({type:A,selectors:[["","blaPfeilNumberOnly",""]],hostBindings:function(t,e){1&t&&_.Vb("keydown",(function(t){return e.onKeyDown(t)}))},features:[_.ub]}),A),ot=((M=function(e){t(i,e);var a=n(i);function i(t,e){return r(this,i),a.call(this,t,["1","2","3","4","5","6","7","8","9","0"],1,99,e)}return i}(ct)).\u0275fac=function(t){return new(t||M)(_.Jb(_.l),_.Jb(nt.e))},M.\u0275dir=_.Eb({type:M,selectors:[["","blaSchuetzeNumberOnly",""]],features:[_.ub]}),M),lt=((C=function(e){t(i,e);var a=n(i);function i(t,e){return r(this,i),a.call(this,t,["1","2","3","4","5","6","7","8","9","0"],0,60,e)}return i}(ct)).\u0275fac=function(t){return new(t||C)(_.Jb(_.l),_.Jb(nt.e))},C.\u0275dir=_.Eb({type:C,selectors:[["","blaFehlerNumberOnly",""]],features:[_.ub]}),C),ut=function(){function t(){r(this,t)}return l(t,[{key:"getNext",value:function(){if(this.currIdx<this.indices.length){var t=this.indices[this.currIdx];return this.currIdx+=1,t}return this.currIdx=0,this.getNext()}}]),t}(),ht=new(function(e){t(i,e);var a=n(i);function i(){var t;return r(this,i),(t=a.call(this)).indices=[1,2,3,34,35,36],t.currIdx=0,t}return i}(ut)),bt=new(function(e){t(i,e);var a=n(i);function i(){var t;r(this,i);(t=a.call(this)).indices=[];for(var e=0,n=[[4,29],[6,31],[8,33],[37,62],[39,64],[41,66]];e<n.length;e++)for(var s=n[e],c=s[0];c<=s[1];c+=6)t.indices.push(c),t.indices.push(c+1);return t.currIdx=0,t}return i}(ut)),ft=function t(e){r(this,t),this.el=e},dt=((D=function(e){t(i,e);var a=n(i);function i(t){var e;return r(this,i),(e=a.call(this,t)).el.nativeElement.setAttribute("tabindex",ht.getNext()),e}return i}(ft)).\u0275fac=function(t){return new(t||D)(_.Jb(_.l))},D.\u0275dir=_.Eb({type:D,selectors:[["","blaSchuetzenTabIndexDirective",""]],features:[_.ub]}),D),mt=((x=function(e){t(i,e);var a=n(i);function i(t){var e;return r(this,i),(e=a.call(this,t)).el.nativeElement.setAttribute("tabindex",bt.getNext()),e}return i}(ft)).\u0275fac=function(t){return new(t||x)(_.Jb(_.l))},x.\u0275dir=_.Eb({type:x,selectors:[["","blaRingzahlTabIndexDirective",""]],features:[_.ub]}),x);function pt(t,e){if(1&t&&(_.Ob(0,"td"),_.Ob(1,"label"),_.wc(2),_.Nb(),_.Kb(3,"input",8),_.Nb()),2&t){var n=e.$implicit,a=e.index;_.xb(2),_.yc("",a+1,". Satz"),_.xb(1),_.dc("value",n)}}function gt(t,e){if(1&t&&(_.Ob(0,"td"),_.Kb(1,"input",8),_.Nb()),2&t){var n=e.$implicit;_.xb(1),_.dc("value",n)}}function vt(t,e){if(1&t){var n=_.Pb();_.Ob(0,"td"),_.Ob(1,"input",39),_.Vb("ngModelChange",(function(t){return _.nc(n),_.Xb().$implicit.rueckennummer=t}))("ngModelChange",(function(t){_.nc(n);var e=_.Xb(2).index;return _.Xb().onSchuetzeChange(t,1,e)})),_.Nb(),_.Nb()}if(2&t){var a=_.Xb().$implicit;_.xb(1),_.dc("ngModel",a.rueckennummer)}}function Nt(t,e){if(1&t){var n=_.Pb();_.uc(0,vt,2,1,"td",36),_.Ob(1,"td",37),_.Ob(2,"input",38),_.Vb("ngModelChange",(function(t){_.nc(n);var a=e.index,i=_.Xb().index;return _.Xb().onChange(t,1,i,a,1)})),_.Nb(),_.Nb(),_.Ob(3,"td"),_.Ob(4,"input",38),_.Vb("ngModelChange",(function(t){_.nc(n);var a=e.index,i=_.Xb().index;return _.Xb().onChange(t,1,i,a,2)})),_.Nb(),_.Nb()}if(2&t){var a=e.$implicit;_.dc("ngIf",0==e.index),_.xb(2),_.dc("ngModel",a.ringzahlPfeil1),_.xb(2),_.dc("ngModel",a.ringzahlPfeil2)}}function St(t,e){if(1&t&&(_.Ob(0,"td"),_.wc(1,"Summe"),_.Nb(),_.Ob(2,"td"),_.Kb(3,"input",40),_.Nb()),2&t){var n=e.$implicit;_.xb(3),_.dc("value",n)}}function Ot(t,e){if(1&t&&(_.Ob(0,"tr"),_.Kb(1,"td"),_.uc(2,St,4,1,"ng-template",14),_.Nb()),2&t){var n=_.Xb(2);_.xb(2),_.dc("ngForOf",n.match1.sumSatz)}}function kt(t,e){if(1&t&&(_.Ob(0,"tr"),_.uc(1,Nt,5,3,"ng-template",14),_.Ob(2,"td",35),_.wc(3),_.Nb(),_.Nb(),_.uc(4,Ot,3,1,"tr",36)),2&t){var n=e.index,a=e.$implicit,i=_.Xb();_.xb(1),_.dc("ngForOf",a),_.xb(2),_.yc(" ",i.getSummeSchuetze(n,1)," "),_.xb(1),_.dc("ngIf",n>=i.match1.schuetzen.length-1)}}function yt(t,e){if(1&t&&(_.Ob(0,"td"),_.Ob(1,"label"),_.wc(2),_.Nb(),_.Kb(3,"input",8),_.Nb()),2&t){var n=e.$implicit,a=e.index;_.xb(2),_.yc("",a+1,". Satz"),_.xb(1),_.dc("value",n)}}function wt(t,e){if(1&t&&(_.Ob(0,"td"),_.Kb(1,"input",8),_.Nb()),2&t){var n=e.$implicit;_.xb(1),_.dc("value",n)}}function Tt(t,e){if(1&t){var n=_.Pb();_.Ob(0,"td"),_.Ob(1,"input",39),_.Vb("ngModelChange",(function(t){return _.nc(n),_.Xb().$implicit.rueckennummer=t}))("ngModelChange",(function(t){_.nc(n);var e=_.Xb(2).index;return _.Xb().onSchuetzeChange(t,1,e)})),_.Nb(),_.Nb()}if(2&t){var a=_.Xb().$implicit;_.xb(1),_.dc("ngModel",a.rueckennummer)}}function Et(t,e){if(1&t){var n=_.Pb();_.uc(0,Tt,2,1,"td",36),_.Ob(1,"td",37),_.Ob(2,"input",38),_.Vb("ngModelChange",(function(t){_.nc(n);var a=e.index,i=_.Xb().index;return _.Xb().onChange(t,2,i,a,1)})),_.Nb(),_.Nb(),_.Ob(3,"td"),_.Ob(4,"input",38),_.Vb("ngModelChange",(function(t){_.nc(n);var a=e.index,i=_.Xb().index;return _.Xb().onChange(t,2,i,a,2)})),_.Nb(),_.Nb()}if(2&t){var a=e.$implicit;_.dc("ngIf",0==e.index),_.xb(2),_.dc("ngModel",a.ringzahlPfeil1),_.xb(2),_.dc("ngModel",a.ringzahlPfeil2)}}function Pt(t,e){if(1&t&&(_.Ob(0,"td"),_.wc(1,"Summe"),_.Nb(),_.Ob(2,"td"),_.Kb(3,"input",40),_.Nb()),2&t){var n=e.$implicit;_.xb(3),_.dc("value",n)}}function It(t,e){if(1&t&&(_.Ob(0,"tr"),_.Kb(1,"td"),_.uc(2,Pt,4,1,"ng-template",14),_.Nb()),2&t){var n=_.Xb(2);_.xb(2),_.dc("ngForOf",n.match2.sumSatz)}}function zt(t,e){if(1&t&&(_.Ob(0,"tr"),_.uc(1,Et,5,3,"ng-template",14),_.Ob(2,"td",35),_.wc(3),_.Nb(),_.Nb(),_.uc(4,It,3,1,"tr",36)),2&t){var n=e.index,a=e.$implicit,i=_.Xb();_.xb(1),_.dc("ngForOf",a),_.xb(2),_.yc(" ",i.getSummeSchuetze(n,2)," "),_.xb(1),_.dc("ngIf",n>=i.match2.schuetzen.length-1)}}function Ct(t,e){if(1&t){var n=_.Pb();_.Ob(0,"div",41),_.Ob(1,"div",42),_.Ob(2,"h2"),_.wc(3,"Pr\xfcfung der Sch\xfctzen"),_.Nb(),_.Kb(4,"br"),_.Ob(5,"a",43),_.Vb("click",(function(){return _.nc(n),_.Xb().popupSelberTag=!1})),_.wc(6,"\xd7"),_.Nb(),_.Ob(7,"a"),_.wc(8),_.Nb(),_.Kb(9,"br"),_.Kb(10,"br"),_.Ob(11,"button",44),_.Vb("click",(function(){return _.nc(n),_.Xb().popupSelberTag=!1})),_.wc(12,"OK"),_.Nb(),_.Nb(),_.Nb()}if(2&t){var a=_.Xb();_.xb(8),_.zc("Sch\xfctze ",a.passeSelberTag," hat bereits diesen Wettkampftag in der ",a.selberTagVeranstaltung," geschossen")}}function Mt(t,e){if(1&t){var n=_.Pb();_.Ob(0,"div",41),_.Ob(1,"div",42),_.Ob(2,"h2"),_.wc(3,"Pr\xfcfung der Sch\xfctzen"),_.Nb(),_.Kb(4,"br"),_.Ob(5,"a",43),_.Vb("click",(function(){return _.nc(n),_.Xb().popupAndererTag=!1})),_.wc(6,"\xd7"),_.Nb(),_.Ob(7,"a"),_.wc(8),_.Nb(),_.Kb(9,"br"),_.Kb(10,"br"),_.Ob(11,"button",44),_.Vb("click",(function(){return _.nc(n),_.Xb().popupAndererTag=!1})),_.wc(12,"OK"),_.Nb(),_.Nb(),_.Nb()}if(2&t){var a=_.Xb();_.xb(8),_.Ac("Sch\xfctze ",a.passeAndererTag," hat bereits ",a.andererTagAnzahl," mal in der ",a.andererTagVeranstaltung.name," geschossen")}}var At,Rt,xt=((Rt=function(){function t(e,n,a,i,s,c,o,l,u,h,b){r(this,t),this.router=e,this.schusszettelService=n,this.matchProvider=a,this.route=i,this.notificationService=s,this.vereinDataProvider=c,this.dsbMannschaftDataProvider=o,this.passeDataProvider=l,this.wettkampfDataProvider=u,this.veranstaltungDataProvider=h,this.mannschaftsMitgliedDataProvider=b,this.match1singlesatzpoints=[],this.match2singlesatzpoints=[],this.mannschaften=[],this.vereine=[],this.allPasse=[],this.matchAllPasse=new Array,this.selberWettkampftag=new Array,this.selberWettkampftagVeranstaltung=Array(),this.anzahlAnTagenMannschaft=new Array}return l(t,[{key:"ngOnInit",value:function(){var t=this;this.match1=new y(null,null,null,1,1,1,1,[],0,0,null,null),this.match1.nr=1,this.match1.schuetzen=[],this.match1singlesatzpoints=[],this.match2=new y(null,null,null,1,1,1,1,[],0,0,null,null),this.match2.nr=1,this.match2.schuetzen=[],this.match2singlesatzpoints=[],this.dirtyFlag=!1,this.initSchuetzenMatch1(),this.initSchuetzenMatch2(),this.route.params.subscribe((function(e){if(!Object(O.c)(e.match1id)&&!Object(O.c)(e.match2id)){var n=e.match1id,a=e.match2id;t.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_LOADING",title:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.LADEN.TITLE",description:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.LADEN.DESCRIPTION",severity:nt.f.INFO,origin:nt.d.USER,userAction:nt.h.PENDING}),t.schusszettelService.findMatches(n,a).then((function(e){if(t.match1=e.payload[0],t.match2=e.payload[1],0!=t.match1.schuetzen.length){if(t.match1.schuetzen.length>3)for(var n=t.match1.schuetzen.length;n>3;n--)t.match1.schuetzen.pop();for(var a=0;a<3;a++)if(t.match1.schuetzen[a].length>5&&0!=t.match1.schuetzen[a].length)for(var i=t.match1.schuetzen[a].length;i>5;i--)t.match1.schuetzen[a].pop()}if(0!=t.match2.schuetzen.length){if(t.match2.schuetzen.length>3)for(var s=t.match2.schuetzen.length;s>3;s--)t.match2.schuetzen.pop();for(var c=0;c<3;c++)if(t.match2.schuetzen[c].length>5&&0!=t.match1.schuetzen[c].length)for(var r=t.match2.schuetzen[c].length;r>5;r--)t.match2.schuetzen[c].pop()}console.log("match1",t.match1),console.log("match2",t.match2);var o=!0;t.match1.schuetzen.length<=0&&(t.initSchuetzenMatch1(),o=!1),t.match2.schuetzen.length<=0&&(t.initSchuetzenMatch2(),o=!1),o&&(t.initSumSatz(),t.setPoints()),t.wettkampfDataProvider.findAllowedMember(t.match1.wettkampfId,t.match1.mannschaftId,t.match2.mannschaftId).then((function(e){t.allowedMitglieder1=e,console.log("Allowed for match1: ",t.allowedMitglieder1),t.match1.wettkampfId==t.match2.wettkampfId&&(t.allowedMitglieder2=t.allowedMitglieder1,t.notificationService.discardNotification())})),t.match1.wettkampfId!=t.match2.wettkampfId&&t.wettkampfDataProvider.findAllowedMember(t.match2.wettkampfId,t.match1.mannschaftId,t.match2.mannschaftId).then((function(e){t.allowedMitglieder2=e,console.log("Allowed for match2: ",t.allowedMitglieder2),t.notificationService.discardNotification()}))}),(function(t){console.error(t)}))}}))}},{key:"onChange",value:function(t,e,n,a,i){var s=this["match"+e],c=s.schuetzen[n][a],r=parseInt(t,10);r=r>=0?r:null,1===i?c.ringzahlPfeil1=r:c.ringzahlPfeil2=r,s.sumSatz[a]=this.getSumSatz(s,a),this.setPoints(),this.dirtyFlag=!0}},{key:"onSchuetzeChange",value:function(t,e,n){return Object(tt.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var a,i,s,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=1==e?this.match1.mannschaftId:this.match2.mannschaftId,i=!0,s=null,n.prev=2,n.next=5,this.mannschaftsMitgliedDataProvider.findByTeamIdAndRueckennummer(a,t);case 5:s=n.sent,n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),i=!1;case 11:null!=s&&s.result==g.RequestResult.SUCCESS&&(c=s.payload.dsbMitgliedId,console.log("DsbNummer for Mannschaftsmitglied in Mannschaft "+a+" and Rueckennummer "+t+" is "+c),(1==e?this.allowedMitglieder1:this.allowedMitglieder2).includes(c)||(i=!1)),i||this.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_SCHUETZENNUMMER",title:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.SCHUETZENNUMMER.TITLE",description:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.SCHUETZENNUMMER.DESCRIPTION",severity:nt.f.ERROR,origin:nt.d.SYSTEM,type:nt.g.OK,userAction:nt.h.ACCEPTED});case 13:case"end":return n.stop()}}),n,this,[[2,8]])})))}},{key:"onFehlerpunkteChange",value:function(t,e,n){var a=this["match"+e],i=parseInt(t,10);i=i>=1?i:null,a.fehlerpunkte[n]=i,a.sumSatz[n]=this.getSumSatz(a,n),this.setPoints(),this.dirtyFlag=!0}},{key:"getAllMannschaften",value:function(){var t=this;this.dsbMannschaftDataProvider.findAll().then((function(e){t.mannschaften=e.payload}))}},{key:"getAllVerein",value:function(){var t=this;this.vereinDataProvider.findAll().then((function(e){t.vereine=e.payload}))}},{key:"getAllPasse",value:function(){var t=this;this.passeDataProvider.findAll().then((function(e){t.allPasse=e.payload}))}},{key:"getAllWettkaempfe",value:function(){var t=this;this.wettkampfDataProvider.findAll().then((function(e){t.allWettkaempfe=e.payload}))}},{key:"getAllVeranstaltungen",value:function(){var t=this;this.veranstaltungDataProvider.findAll().then((function(e){t.allVeranstaltungen=e.payload}))}},{key:"maxMannschaftsId",value:function(){var t=this.mannschaften[0].id;return this.mannschaften.forEach((function(e){e.id>t&&(t=e.id)})),t}},{key:"savepopSelberTag",value:function(){this.popupSelberTag=!0}},{key:"savepopAndererTag",value:function(){this.popupAndererTag=!0}},{key:"save",value:function(){var t=this;if(this.match1.satzpunkte>7||this.match2.satzpunkte>7)this.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_ENTSCHIEDEN",title:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.ENTSCHIEDEN.TITLE",description:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.ENTSCHIEDEN.DESCRIPTION",severity:nt.f.ERROR,origin:nt.d.SYSTEM,type:nt.g.OK,userAction:nt.h.ACCEPTED});else if(null==this.match1.schuetzen[0][0].rueckennummer||null==this.match1.schuetzen[1][0].rueckennummer||null==this.match1.schuetzen[2][0].rueckennummer||null==this.match2.schuetzen[0][0].rueckennummer||null==this.match2.schuetzen[1][0].rueckennummer||null==this.match2.schuetzen[2][0].rueckennummer)this.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_SCHUETZENNUMMER",title:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.SCHUETZENNUMMER.TITLE",description:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.SCHUETZENNUMMER.DESCRIPTION",severity:nt.f.ERROR,origin:nt.d.SYSTEM,type:nt.g.OK,userAction:nt.h.ACCEPTED});else if(this.match1.schuetzen[0][0].rueckennummer===this.match1.schuetzen[1][0].rueckennummer||this.match1.schuetzen[1][0].rueckennummer===this.match1.schuetzen[2][0].rueckennummer||this.match1.schuetzen[2][0].rueckennummer===this.match1.schuetzen[0][0].rueckennummer||this.match2.schuetzen[0][0].rueckennummer===this.match2.schuetzen[1][0].rueckennummer||this.match2.schuetzen[1][0].rueckennummer===this.match2.schuetzen[2][0].rueckennummer||this.match2.schuetzen[2][0].rueckennummer===this.match2.schuetzen[0][0].rueckennummer)this.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_SCHUETZENNUMMER",title:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.SCHUETZENEINDEUTIG.TITLE",description:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.SCHUETZENEINDEUTIG.DESCRIPTION",severity:nt.f.ERROR,origin:nt.d.SYSTEM,type:nt.g.OK,userAction:nt.h.ACCEPTED});else{this.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_SPEICHERN",title:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.SPEICHERN.TITLE",description:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.SPEICHERN.DESCRIPTION",severity:nt.f.INFO,origin:nt.d.USER,userAction:nt.h.PENDING});for(var e=0;e<3;e++)for(var n=1;n<5;n++)this.match1.schuetzen[e][n].lfdNr<=1&&(this.match1.schuetzen[e][n].lfdNr=n+1),this.match2.schuetzen[e][n].lfdNr<=1&&(this.match2.schuetzen[e][n].lfdNr=n+1),this.match1.schuetzen[e][n].dsbMitgliedId=this.match1.schuetzen[e][0].dsbMitgliedId,this.match2.schuetzen[e][n].dsbMitgliedId=this.match2.schuetzen[e][0].dsbMitgliedId,this.match1.schuetzen[e][n].rueckennummer=this.match1.schuetzen[e][0].rueckennummer,this.match2.schuetzen[e][n].rueckennummer=this.match2.schuetzen[e][0].rueckennummer;this.schusszettelService.create(this.match1,this.match2).then((function(e){t.match1=e.payload[0],t.match2=e.payload[1],t.ngOnInit(),t.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_ENTSCHIEDEN",title:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.GESPEICHERT.TITLE",description:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.GESPEICHERT.DESCRIPTION",severity:nt.f.ERROR,origin:nt.d.SYSTEM,type:nt.g.OK,userAction:nt.h.ACCEPTED})}),(function(e){console.error(e),t.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_ENTSCHIEDEN",title:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.RUECKENNUMMERZUHOCH.TITLE",description:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.RUECKENNUMMERZUHOCH.DESCRIPTION",severity:nt.f.ERROR,origin:nt.d.SYSTEM,type:nt.g.OK,userAction:nt.h.ACCEPTED}),t.notificationService.discardNotification()})),this.dirtyFlag=!1}}},{key:"back",value:function(){var t=this;if(!0===this.dirtyFlag){var e={id:"schusszettel-weiter",title:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.ZURUECK.TITLE",description:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.ZURUECK.DESCRIPTION",severity:nt.f.QUESTION,origin:nt.d.USER,type:nt.g.YES_NO,userAction:nt.h.PENDING};console.log("show notification"),this.notificationService.showNotification(e),console.log("notification.userAction before: "+e.userAction),this.notificationService.observeNotification("schusszettel-weiter").subscribe((function(n){console.log("observe notification"),n.userAction===nt.h.ACCEPTED&&(console.log("accepted"),t.dirtyFlag=!1,console.log("Wettkampftag",t.match1.wettkampfTag),t.router.navigate(["/sportjahresplan/"+t.match1.wettkampfId])),console.log("notification.userAction after: "+e.userAction)}))}else console.log("Keine \xc4nderung"),console.log("Wettkampftag",this.match1.wettkampfTag),this.router.navigate(["/sportjahresplan/"+this.match1.wettkampfId])}},{key:"next",value:function(){var t=this;if(!0===this.dirtyFlag){var e={id:"schusszettel_weiter",title:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.WEITER.TITLE",description:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.WEITER.DESCRIPTION",severity:nt.f.QUESTION,origin:nt.d.USER,type:nt.g.YES_NO,userAction:nt.h.PENDING};this.notificationService.observeNotification("schusszettel_weiter").subscribe((function(e){e.userAction===nt.h.ACCEPTED&&(t.dirtyFlag=!1,t.matchProvider.pairToFollow(t.match2.id).then((function(e){2===e.payload.length&&t.router.navigate(["/sportjahresplan/schusszettel/"+e.payload[0]+"/"+e.payload[1]])})))})),this.notificationService.showNotification(e)}else this.matchProvider.pairToFollow(this.match2.id).then((function(e){2===e.payload.length&&t.router.navigate(["/sportjahresplan/schusszettel/"+e.payload[0]+"/"+e.payload[1]])}))}},{key:"previous",value:function(){var t=this;if(!0===this.dirtyFlag){var e={id:"schusszettel_weiter",title:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.WEITER.TITLE",description:"SPORTJAHRESPLAN.SCHUSSZETTEL.NOTIFICATION.WEITER.DESCRIPTION",severity:nt.f.QUESTION,origin:nt.d.USER,type:nt.g.YES_NO,userAction:nt.h.PENDING};this.notificationService.observeNotification("schusszettel_weiter").subscribe((function(e){e.userAction===nt.h.ACCEPTED&&(t.dirtyFlag=!1,t.matchProvider.previousPair(t.match1.id).then((function(e){2===e.payload.length&&t.router.navigate(["/sportjahresplan/schusszettel/"+e.payload[0]+"/"+e.payload[1]])})))})),this.notificationService.showNotification(e)}else this.matchProvider.previousPair(this.match1.id).then((function(e){2===e.payload.length&&t.router.navigate(["/sportjahresplan/schusszettel/"+e.payload[0]+"/"+e.payload[1]])}))}},{key:"trackByIndex",value:function(t,e){return t}},{key:"initSchuetzenMatch1",value:function(){this.match1singlesatzpoints=[],this.match1.sumSatz=[];for(var t=0;t<5;t++)this.match1.sumSatz.push(0),this.match1singlesatzpoints.push(0);this.match1.schuetzen=[];for(var e=0;e<3;e++){this.match1.schuetzen.push(new Array);for(var n=0;n<5;n++)this.match1.schuetzen[e].push(new T(null,this.match1.id,this.match1.mannschaftId,this.match1.wettkampfId,this.match1.nr,n+1))}}},{key:"initSchuetzenMatch2",value:function(){this.match2singlesatzpoints=[],this.match2.sumSatz=[];for(var t=0;t<5;t++)this.match2.sumSatz.push(0),this.match2singlesatzpoints.push(0);this.match2.schuetzen=[];for(var e=0;e<3;e++){this.match2.schuetzen.push(new Array);for(var n=0;n<5;n++)this.match2.schuetzen[e].push(new T(null,this.match2.id,this.match2.mannschaftId,this.match2.wettkampfId,this.match2.nr,n+1))}}},{key:"getSumSatz",value:function(t,e){for(var n=0,a=0,i=Object.keys(t.schuetzen);a<i.length;a++){var s=i[a];n+=t.schuetzen[s][e].ringzahlPfeil1,n+=t.schuetzen[s][e].ringzahlPfeil2}return n-=t.fehlerpunkte[e]}},{key:"setPoints",value:function(){"Liga kummulativ"===this.match1.wettkampfTyp?this.setKummulativePoints():this.setSatzPoints(),this.match1.satzpunkte>=6?(this.match1.matchpunkte=2,this.match2.matchpunkte=0):this.match2.satzpunkte>=6?(this.match1.matchpunkte=0,this.match2.matchpunkte=2):5===this.match2.satzpunkte&&5===this.match1.satzpunkte&&(this.match1.matchpunkte=1,this.match2.matchpunkte=1)}},{key:"setSatzPoints",value:function(){for(var t=0,e=0,n=0;n<5;n++)this.match1.sumSatz[n]>this.match2.sumSatz[n]?(t+=2,this.match1singlesatzpoints[n]=2,this.match2singlesatzpoints[n]=0):this.match1.sumSatz[n]<this.match2.sumSatz[n]?(e+=2,this.match1singlesatzpoints[n]=0,this.match2singlesatzpoints[n]=2):this.match1.sumSatz[n]===this.match2.sumSatz[n]&&this.match1.sumSatz[n]>0&&this.match2.sumSatz[n]>0&&(t++,e++,this.match1singlesatzpoints[n]=1,this.match2singlesatzpoints[n]=1);this.match1.satzpunkte=t,this.match2.satzpunkte=e,this.match1.matchpunkte=0,this.match2.matchpunkte=0}},{key:"setKummulativePoints",value:function(){for(var t=0,e=0,n=0;n<3;n++)t+=this.match1.sumSatz[n],e+=this.match2.sumSatz[n];t>e?(this.match1.satzpunkte=6,this.match2.satzpunkte=0):t<e&&(this.match1.satzpunkte=0,this.match2.satzpunkte=6)}},{key:"initSumSatz",value:function(){for(var t=0;t<5;t++)this.match1.sumSatz[t]=this.getSumSatz(this.match1,t),this.match2.sumSatz[t]=this.getSumSatz(this.match2,t)}},{key:"getSummeSchuetze",value:function(t,e){var n,a=0,i=s(this["match"+e].schuetzen[t]);try{for(i.s();!(n=i.n()).done;){var c=n.value;a+=c.ringzahlPfeil1+c.ringzahlPfeil2}}catch(r){i.e(r)}finally{i.f()}return a}},{key:"onButtonDownload",value:function(t){return(new g.UriBuilder).fromPath(H.a.backendBaseUrl).path("v1/download").path(t).path(this.match1.id+"/"+this.match2.id).build()}}]),t}()).\u0275fac=function(t){return new(t||Rt)(_.Jb(u.c),_.Jb(et),_.Jb(U),_.Jb(u.a),_.Jb(nt.e),_.Jb(at.a),_.Jb(it.a),_.Jb(K.a),_.Jb(N.a),_.Jb(v.a),_.Jb(st.a))},Rt.\u0275cmp=_.Db({type:Rt,selectors:[["bla-schusszettel"]],decls:239,vars:42,consts:[[1,"wettkaempfe","container"],[1,"match1","print"],[1,"row"],[1,"match_col-3"],[1,"mannschaften_col-3"],[1,"small_Table","col-6"],["id","punktetabelle",1,"table","table-responsive","thead-light","table-striped",2,"max-width","100%"],[4,"ngFor","ngForOf"],["readonly","","tabindex","-1","type","text",3,"value"],[1,"col-4","offset-9"],[1,"bigTable","col-9"],["id","schusstabelle",1,"table","table-hover","table-responsive","thead-light","table-striped",2,"width","100%"],["rowspan","2"],["colspan","2"],["ngFor","",3,"ngForOf"],[1,"col-2"],[1,"row",2,"margin-bottom","10px"],[1,"col-4"],["blaFehlerNumberOnly","",1,"fehlerfeld",3,"ngModel","ngModelChange"],[1,"print","signature","s1"],[1,"m1"],[1,"m2"],[1,"print"],[1,"match2","print"],["id","henlo",1,"match_col-3"],[1,"table","table-responsive","thead-light","table-striped",2,"width","100%"],[1,"table","table-hover","table-responsive","thead-light","table-striped",2,"width","100%"],[1,"col-sm-8"],[1,"btn","btn-primary","backButton",3,"click"],[1,"btn","btn-primary","saveButton",3,"click"],[1,"btn",3,"id","downloadUrl","fileName","disabled"],[1,"align-self-center"],[1,"btn","btn-primary","nextButton",3,"click"],["class","schuetze-popup",4,"ngIf"],[1,"print","signature"],[1,"schuetzensumme"],[4,"ngIf"],[1,"split"],["blaPfeilNumberOnly","","blaRingzahlTabIndexDirective","","type","text",3,"ngModel","ngModelChange"],["blaSchuetzeNumberOnly","","blaSchuetzenTabIndexDirective","","type","number",3,"ngModel","ngModelChange"],["readonly","","tabindex","-1","type","number",3,"value"],[1,"schuetze-popup"],[1,"popup"],[1,"close",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(_.Ob(0,"div",0),_.Ob(1,"div",1),_.Ob(2,"div",2),_.Ob(3,"div",3),_.Ob(4,"h2"),_.wc(5),_.Nb(),_.Ob(6,"h2"),_.wc(7),_.Nb(),_.Nb(),_.Ob(8,"div",4),_.Ob(9,"h2"),_.wc(10),_.Nb(),_.Ob(11,"h2"),_.wc(12,"gegen"),_.Nb(),_.Ob(13,"h2"),_.wc(14),_.Nb(),_.Nb(),_.Ob(15,"div",5),_.Ob(16,"table",6),_.Ob(17,"tr"),_.uc(18,pt,4,2,"td",7),_.Ob(19,"td"),_.Ob(20,"label"),_.wc(21,"Summe"),_.Nb(),_.Kb(22,"input",8),_.Nb(),_.Ob(23,"td"),_.Ob(24,"label"),_.wc(25,"Match"),_.Nb(),_.Kb(26,"input",8),_.Nb(),_.Nb(),_.Ob(27,"tr"),_.uc(28,gt,2,1,"td",7),_.Ob(29,"td"),_.Kb(30,"input",8),_.Nb(),_.Ob(31,"td"),_.Kb(32,"input",8),_.Nb(),_.Nb(),_.Nb(),_.Nb(),_.Nb(),_.Ob(33,"div",2),_.Ob(34,"div",9),_.wc(35,"Fehlerpunkte"),_.Nb(),_.Nb(),_.Ob(36,"div",2),_.Ob(37,"div",10),_.Ob(38,"table",11),_.Ob(39,"thead"),_.Ob(40,"tr"),_.Ob(41,"th",12),_.wc(42,"Schuetze"),_.Nb(),_.Ob(43,"th",13),_.wc(44,"1. Satz / Pfeile"),_.Nb(),_.Ob(45,"th",13),_.wc(46,"2. Satz / Pfeile"),_.Nb(),_.Ob(47,"th",13),_.wc(48,"3. Satz / Pfeile"),_.Nb(),_.Ob(49,"th",13),_.wc(50,"4. Satz / Pfeile"),_.Nb(),_.Ob(51,"th",13),_.wc(52,"5. Satz / Pfeile"),_.Nb(),_.Nb(),_.Ob(53,"tr"),_.Ob(54,"th"),_.wc(55,"Pfeil 1"),_.Nb(),_.Ob(56,"th"),_.wc(57,"Pfeil 2"),_.Nb(),_.Ob(58,"th"),_.wc(59,"Pfeil 1"),_.Nb(),_.Ob(60,"th"),_.wc(61,"Pfeil 2"),_.Nb(),_.Ob(62,"th"),_.wc(63,"Pfeil 1"),_.Nb(),_.Ob(64,"th"),_.wc(65,"Pfeil 2"),_.Nb(),_.Ob(66,"th"),_.wc(67,"Pfeil 1"),_.Nb(),_.Ob(68,"th"),_.wc(69,"Pfeil 2"),_.Nb(),_.Ob(70,"th"),_.wc(71,"Pfeil 1"),_.Nb(),_.Ob(72,"th"),_.wc(73,"Pfeil 2"),_.Nb(),_.Nb(),_.Nb(),_.uc(74,kt,5,3,"ng-template",14),_.Nb(),_.Nb(),_.Ob(75,"div",15),_.Ob(76,"div",16),_.Ob(77,"label",17),_.wc(78,"Satz 1"),_.Nb(),_.Ob(79,"div",17),_.Ob(80,"input",18),_.Vb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,1,0)}))("ngModelChange",(function(t){return e.match1.fehlerpunkte[0]=t})),_.Nb(),_.Nb(),_.Nb(),_.Ob(81,"div",16),_.Ob(82,"label",17),_.wc(83,"Satz 2"),_.Nb(),_.Ob(84,"div",17),_.Ob(85,"input",18),_.Vb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,1,1)}))("ngModelChange",(function(t){return e.match1.fehlerpunkte[1]=t})),_.Nb(),_.Nb(),_.Nb(),_.Ob(86,"div",16),_.Ob(87,"label",17),_.wc(88,"Satz 3"),_.Nb(),_.Ob(89,"div",17),_.Ob(90,"input",18),_.Vb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,1,2)}))("ngModelChange",(function(t){return e.match1.fehlerpunkte[2]=t})),_.Nb(),_.Nb(),_.Nb(),_.Ob(91,"div",16),_.Ob(92,"label",17),_.wc(93,"Satz 4"),_.Nb(),_.Ob(94,"div",17),_.Ob(95,"input",18),_.Vb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,1,3)}))("ngModelChange",(function(t){return e.match1.fehlerpunkte[3]=t})),_.Nb(),_.Nb(),_.Nb(),_.Ob(96,"div",16),_.Ob(97,"label",17),_.wc(98,"Satz 5"),_.Nb(),_.Ob(99,"div",17),_.Ob(100,"input",18),_.Vb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,1,4)}))("ngModelChange",(function(t){return e.match1.fehlerpunkte[4]=t})),_.Nb(),_.Nb(),_.Nb(),_.Nb(),_.Nb(),_.Nb(),_.Ob(101,"div",19),_.Ob(102,"div",20),_.Ob(103,"h1"),_.wc(104),_.Nb(),_.Ob(105,"p"),_.wc(106,"Unterschrift"),_.Nb(),_.Nb(),_.Ob(107,"div",21),_.Ob(108,"h1"),_.wc(109),_.Nb(),_.Ob(110,"p"),_.wc(111,"Unterschrift"),_.Nb(),_.Nb(),_.Nb(),_.Kb(112,"hr",22),_.Ob(113,"div",23),_.Ob(114,"div",2),_.Ob(115,"div",24),_.Ob(116,"h2"),_.wc(117),_.Nb(),_.Ob(118,"h2"),_.wc(119),_.Nb(),_.Nb(),_.Ob(120,"div",4),_.Ob(121,"h2"),_.wc(122),_.Nb(),_.Ob(123,"h2"),_.wc(124,"gegen"),_.Nb(),_.Ob(125,"h2"),_.wc(126),_.Nb(),_.Nb(),_.Ob(127,"div",5),_.Ob(128,"table",25),_.Ob(129,"tr"),_.uc(130,yt,4,2,"td",7),_.Ob(131,"td"),_.Ob(132,"label"),_.wc(133,"Summe"),_.Nb(),_.Kb(134,"input",8),_.Nb(),_.Ob(135,"td"),_.Ob(136,"label"),_.wc(137,"Match"),_.Nb(),_.Kb(138,"input",8),_.Nb(),_.Nb(),_.Ob(139,"tr"),_.uc(140,wt,2,1,"td",7),_.Ob(141,"td"),_.Kb(142,"input",8),_.Nb(),_.Ob(143,"td"),_.Kb(144,"input",8),_.Nb(),_.Nb(),_.Nb(),_.Nb(),_.Nb(),_.Ob(145,"div",2),_.Ob(146,"div",9),_.wc(147,"Fehlerpunkte"),_.Nb(),_.Nb(),_.Ob(148,"div",2),_.Ob(149,"div",10),_.Ob(150,"table",26),_.Ob(151,"thead"),_.Ob(152,"tr"),_.Ob(153,"th",12),_.wc(154,"Schuetze"),_.Nb(),_.Ob(155,"th",13),_.wc(156,"1. Satz / Pfeile"),_.Nb(),_.Ob(157,"th",13),_.wc(158,"2. Satz / Pfeile"),_.Nb(),_.Ob(159,"th",13),_.wc(160,"3. Satz / Pfeile"),_.Nb(),_.Ob(161,"th",13),_.wc(162,"4. Satz / Pfeile"),_.Nb(),_.Ob(163,"th",13),_.wc(164,"5. Satz / Pfeile"),_.Nb(),_.Nb(),_.Ob(165,"tr"),_.Ob(166,"th"),_.wc(167,"Pfeil 1"),_.Nb(),_.Ob(168,"th"),_.wc(169,"Pfeil 2"),_.Nb(),_.Ob(170,"th"),_.wc(171,"Pfeil 1"),_.Nb(),_.Ob(172,"th"),_.wc(173,"Pfeil 2"),_.Nb(),_.Ob(174,"th"),_.wc(175,"Pfeil 1"),_.Nb(),_.Ob(176,"th"),_.wc(177,"Pfeil 2"),_.Nb(),_.Ob(178,"th"),_.wc(179,"Pfeil 1"),_.Nb(),_.Ob(180,"th"),_.wc(181,"Pfeil 2"),_.Nb(),_.Ob(182,"th"),_.wc(183,"Pfeil 1"),_.Nb(),_.Ob(184,"th"),_.wc(185,"Pfeil 2"),_.Nb(),_.Nb(),_.Nb(),_.uc(186,zt,5,3,"ng-template",14),_.Nb(),_.Nb(),_.Ob(187,"div",15),_.Ob(188,"div",16),_.Ob(189,"label",17),_.wc(190,"Satz 1"),_.Nb(),_.Ob(191,"div",17),_.Ob(192,"input",18),_.Vb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,2,0)}))("ngModelChange",(function(t){return e.match2.fehlerpunkte[0]=t})),_.Nb(),_.Nb(),_.Nb(),_.Ob(193,"div",16),_.Ob(194,"label",17),_.wc(195,"Satz 2"),_.Nb(),_.Ob(196,"div",17),_.Ob(197,"input",18),_.Vb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,2,1)}))("ngModelChange",(function(t){return e.match2.fehlerpunkte[1]=t})),_.Nb(),_.Nb(),_.Nb(),_.Ob(198,"div",16),_.Ob(199,"label",17),_.wc(200,"Satz 3"),_.Nb(),_.Ob(201,"div",17),_.Ob(202,"input",18),_.Vb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,2,2)}))("ngModelChange",(function(t){return e.match2.fehlerpunkte[2]=t})),_.Nb(),_.Nb(),_.Nb(),_.Ob(203,"div",16),_.Ob(204,"label",17),_.wc(205,"Satz 4"),_.Nb(),_.Ob(206,"div",17),_.Ob(207,"input",18),_.Vb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,2,3)}))("ngModelChange",(function(t){return e.match2.fehlerpunkte[3]=t})),_.Nb(),_.Nb(),_.Nb(),_.Ob(208,"div",16),_.Ob(209,"label",17),_.wc(210,"Satz 5"),_.Nb(),_.Ob(211,"div",17),_.Ob(212,"input",18),_.Vb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,2,4)}))("ngModelChange",(function(t){return e.match2.fehlerpunkte[4]=t})),_.Nb(),_.Nb(),_.Nb(),_.Nb(),_.Nb(),_.Nb(),_.Ob(213,"div",2),_.Ob(214,"div",27),_.Ob(215,"button",28),_.Vb("click",(function(){return e.back()})),_.wc(216,"Zur\xfcck "),_.Nb(),_.Ob(217,"button",29),_.Vb("click",(function(){return e.save()})),_.wc(218,"Speichern "),_.Nb(),_.Ob(219,"bla-download-button",30),_.wc(220,"Drucken "),_.Nb(),_.Nb(),_.Ob(221,"div",31),_.Ob(222,"button",32),_.Vb("click",(function(){return e.previous()})),_.wc(223,"Vorheriges Match "),_.Nb(),_.Ob(224,"button",32),_.Vb("click",(function(){return e.next()})),_.wc(225,"N\xe4chstes Match "),_.Nb(),_.Nb(),_.Nb(),_.uc(226,Ct,13,2,"div",33),_.uc(227,Mt,13,3,"div",33),_.Ob(228,"div",34),_.Ob(229,"div",20),_.Ob(230,"h1"),_.wc(231),_.Nb(),_.Ob(232,"p"),_.wc(233,"Unterschrift"),_.Nb(),_.Nb(),_.Ob(234,"div",21),_.Ob(235,"h1"),_.wc(236),_.Nb(),_.Ob(237,"p"),_.wc(238,"Unterschrift"),_.Nb(),_.Nb(),_.Nb(),_.Nb()),2&t&&(_.xb(5),_.xc(e.match1.mannschaftName),_.xb(2),_.yc("",e.match1.nr,". Match"),_.xb(3),_.xc(e.match1.mannschaftName),_.xb(4),_.xc(e.match2.mannschaftName),_.xb(4),_.dc("ngForOf",e.match1singlesatzpoints),_.xb(4),_.dc("value",e.match1.satzpunkte),_.xb(4),_.dc("value",e.match1.matchpunkte),_.xb(2),_.dc("ngForOf",e.match2singlesatzpoints),_.xb(2),_.dc("value",e.match2.satzpunkte),_.xb(2),_.dc("value",e.match2.matchpunkte),_.xb(42),_.dc("ngForOf",e.match1.schuetzen),_.xb(6),_.dc("ngModel",e.match1.fehlerpunkte[0]),_.xb(5),_.dc("ngModel",e.match1.fehlerpunkte[1]),_.xb(5),_.dc("ngModel",e.match1.fehlerpunkte[2]),_.xb(5),_.dc("ngModel",e.match1.fehlerpunkte[3]),_.xb(5),_.dc("ngModel",e.match1.fehlerpunkte[4]),_.xb(4),_.xc(e.match2.mannschaftName),_.xb(5),_.xc(e.match1.mannschaftName),_.xb(8),_.xc(e.match2.mannschaftName),_.xb(2),_.yc("",e.match2.nr,". Match"),_.xb(3),_.xc(e.match1.mannschaftName),_.xb(4),_.xc(e.match2.mannschaftName),_.xb(4),_.dc("ngForOf",e.match1singlesatzpoints),_.xb(4),_.dc("value",e.match1.satzpunkte),_.xb(4),_.dc("value",e.match1.matchpunkte),_.xb(2),_.dc("ngForOf",e.match2singlesatzpoints),_.xb(2),_.dc("value",e.match2.satzpunkte),_.xb(2),_.dc("value",e.match2.matchpunkte),_.xb(42),_.dc("ngForOf",e.match2.schuetzen),_.xb(6),_.dc("ngModel",e.match2.fehlerpunkte[0]),_.xb(5),_.dc("ngModel",e.match2.fehlerpunkte[1]),_.xb(5),_.dc("ngModel",e.match2.fehlerpunkte[2]),_.xb(5),_.dc("ngModel",e.match2.fehlerpunkte[3]),_.xb(5),_.dc("ngModel",e.match2.fehlerpunkte[4]),_.xb(7),_.dc("id","downloadMatchSchusszettel")("downloadUrl",e.onButtonDownload("pdf/schusszettel_matches"))("fileName","match_schusszettel.pdf")("disabled",!1),_.xb(7),_.dc("ngIf",e.popupSelberTag),_.xb(1),_.dc("ngIf",e.popupAndererTag),_.xb(4),_.xc(e.match2.mannschaftName),_.xb(5),_.xc(e.match1.mannschaftName))},directives:[c.s,o.c,lt,o.n,o.q,G.a,c.t,rt,mt,o.t,ot,dt],styles:["input[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{display:block}input[_ngcontent-%COMP%]::-webkit-inner-spin-button, input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[_ngcontent-%COMP%]{height:55px;width:55px;-moz-appearance:textfield;font-size:30px;text-align:center}input[_ngcontent-%COMP%]:focus{box-shadow:0 0 8px 0 #057aff}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{alignment:center;text-align:center;margin:10px;font-size:10px;padding:5px}td[_ngcontent-%COMP%]{font-size:16px}label[_ngcontent-%COMP%]{font-size:10px}.split[_ngcontent-%COMP%]{border-left:3px solid #4a4a4a}.match1[_ngcontent-%COMP%]{margin-top:20px}.match2[_ngcontent-%COMP%]{margin-top:-150px;margin-bottom:20px}.match1[_ngcontent-%COMP%], .match2[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.1)}.schuetzensumme[_ngcontent-%COMP%]{font-size:30px}.btn[_ngcontent-%COMP%]{margin:0 15px 20px 20px}.signature[_ngcontent-%COMP%], hr[_ngcontent-%COMP%]{visibility:hidden}.match[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2vw}.mannschaften_col-3[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .match[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1vw}.mannschaften_col-3[_ngcontent-%COMP%]{max-width:16em;min-width:8em;margin-left:1em}.henlo.match_col-3[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1vw}.match_col-3[_ngcontent-%COMP%]{max-width:17em;min-width:8em;margin-left:1.5em}@media print{input[_ngcontent-%COMP%]{border:2px solid #dee2e6;height:45px;width:45px;font-size:25px}h1[_ngcontent-%COMP%]{font-size:10px!important}h3[_ngcontent-%COMP%]{font-size:2vm}.match1[_ngcontent-%COMP%]{margin-bottom:1cm}.match2[_ngcontent-%COMP%]{margin-top:1cm}.m1[_ngcontent-%COMP%], .m2[_ngcontent-%COMP%]{float:left}.m2[_ngcontent-%COMP%]{margin-left:20%}.signature[_ngcontent-%COMP%]{visibility:visible;margin-top:-2cm;margin-bottom:1cm;border-bottom:1px solid #000;display:inline-block;width:90%}.signature[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1cm;margin-bottom:.5cm}.s1[_ngcontent-%COMP%]{margin-top:.5cm;margin-bottom:-2cm}hr[_ngcontent-%COMP%]{visibility:visible;width:100%;height:5px;border-style:dotted;size:1px;background:#dee2e6;margin-top:2.5cm;margin-bottom:.5cm}}.fehlerfeld[_ngcontent-%COMP%]{margin-left:-26px}.schuetze-popup[_ngcontent-%COMP%]{position:fixed;top:0;bottom:0;left:0;right:0;background:rgba(0,0,0,.7);transition:opacity;visibility:visible;opacity:1}.popup[_ngcontent-%COMP%]{margin:70px auto;padding:20px;background:#fff;border-radius:5px;width:30%;height:auto;position:relative;transition:all 5s ease-in-out}.popup[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:#333;font-family:Tahoma,Arial,sans-serif}.popup[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:20px;right:30px;transition:all .2s;font-size:30px;font-weight:700;text-decoration:none;color:#333}.popup[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#02bdd5;cursor:pointer}"]}),Rt),Dt=((At=function(e){t(i,e);var a=n(i);function i(t){var e;return r(this,i),(e=a.call(this)).restClient=t,e.serviceSubUrl="v1/passen",e}return l(i,[{key:"get",value:function(t){var e=this;return new Promise((function(n,a){e.restClient.GET((new g.UriBuilder).fromPath(e.getUrl()).path(t).build()).then((function(t){var e=E.passeToDO(t);n({result:g.RequestResult.SUCCESS,payload:e})}),(function(t){a(0===t.status?{result:g.RequestResult.CONNECTION_PROBLEM}:{result:g.RequestResult.FAILURE})}))}))}},{key:"create",value:function(t){var e=this,n=E.passeToDTO(t);return new Promise((function(t,a){e.restClient.POST(e.getUrl(),n).then((function(e){var n=E.passeToDO(e);t({result:g.RequestResult.SUCCESS,payload:n})}),(function(t){a(0===t.status?{result:g.RequestResult.CONNECTION_PROBLEM}:{result:g.RequestResult.FAILURE})}))}))}},{key:"update",value:function(t){var e=this,n=E.passeToDTO(t);return new Promise((function(t,a){e.restClient.PUT(e.getUrl(),n).then((function(e){var n=E.passeToDO(e);t({result:g.RequestResult.SUCCESS,payload:n})}),(function(t){a(0===t.status?{result:g.RequestResult.CONNECTION_PROBLEM}:{result:g.RequestResult.FAILURE})}))}))}}]),i}(g.DataProviderService)).\u0275fac=function(t){return new(t||At)(_.Sb(g.RestClient))},At.\u0275prov=_.Fb({token:At,factory:At.\u0275fac,providedIn:"root"}),At),Lt=i("VXT6"),_t=i("yVnM"),Ut=i("6NWb");function Ft(t,e){if(1&t){var n=_.Pb();_.Ob(0,"button",11),_.Vb("click",(function(){_.nc(n);var t=_.Xb().$implicit;return _.Xb().updateSessionWithoutTokenGeneration(t.scheibenNr)})),_.Kb(1,"fa-icon",12),_.Nb()}2&t&&(_.xb(1),_.dc("icon","trash"))}function Vt(t,e){if(1&t){var n=_.Pb();_.Ob(0,"button",13),_.Vb("click",(function(){_.nc(n);var t=_.Xb().$implicit;return _.Xb().updateSession(t.scheibenNr)})),_.Kb(1,"fa-icon",12),_.Nb()}2&t&&(_.xb(1),_.dc("icon","plus-circle"))}function Ht(t,e){if(1&t&&(_.Ob(0,"label"),_.wc(1),_.Nb()),2&t){var n=_.Xb().$implicit;_.xb(1),_.xc(n.accessToken)}}function Bt(t,e){if(1&t&&(_.Ob(0,"tr"),_.Ob(1,"td"),_.Ob(2,"span",6),_.wc(3),_.Nb(),_.Nb(),_.Ob(4,"td"),_.Ob(5,"span",7),_.wc(6),_.Nb(),_.Nb(),_.Ob(7,"td"),_.uc(8,Ft,2,1,"button",8),_.uc(9,Vt,2,1,"button",9),_.Nb(),_.Ob(10,"td"),_.uc(11,Ht,2,1,"label",10),_.Nb(),_.Nb()),2&t){var n=e.$implicit;_.xb(3),_.xc(n.scheibenNr),_.xb(2),_.Bb("badge-danger",!n.isActive)("badge-success",n.isActive),_.xb(1),_.yc(" ",n.isActive?"Aktiv":"Nicht aktiv"," "),_.xb(2),_.dc("ngIf",n.isActive),_.xb(1),_.dc("ngIf",!n.isActive),_.xb(2),_.dc("ngIf",n.isActive)}}var Kt,Jt=["[]","null","undefined"],Wt=((Kt=function(){function t(e,n,a){r(this,t),this.route=e,this.router=n,this.tabletSessionService=a,this.currentDeviceIsActive=!1,this.accessToken=""}return l(t,[{key:"ngOnInit",value:function(){var t=this;this.route.params.subscribe((function(e){if(!Object(O.c)(e.wettkampfId)){var n=e.wettkampfId;t.tabletSessionService.findAllTabletSessions(n).then((function(e){t.sessions=e.payload,t.setActiveSession(),t.setTabletEingabeRoute(),t.accessToken=t.currentSession.accessToken.toString()}),(function(e){console.error(e),t.sessions=[];for(var a=0;a<8;a++)t.sessions.push(new Lt.a(a+1,parseInt(n,10),!1));t.setActiveSession()}))}}))}},{key:"updateSession",value:function(t){var e=this,n=this.sessions[t-1];n.isActive=!n.isActive,this.storeCurrentSession(n),this.tabletSessionService.update(n).then((function(n){e.sessions[t-1]=e.currentSession=n.payload,e.storeCurrentSession(e.currentSession),e.accessToken=e.currentSession.accessToken.toString(),e.setTabletEingabeRoute(),e.currentDeviceIsActive&&e.currentSession&&e.currentSession.otherMatchId&&e.router.navigate([e.tabletEingabeRoute])}),(function(t){console.log(t)}))}},{key:"updateSessionWithoutTokenGeneration",value:function(t){var e=this,n=this.sessions[t-1];n.isActive=!n.isActive,this.storeCurrentSession(n),this.tabletSessionService.updateWithoutTokenCreation(n).then((function(n){e.sessions[t-1]=e.currentSession=n.payload,e.storeCurrentSession(e.currentSession),e.accessToken="",e.setTabletEingabeRoute(),e.currentDeviceIsActive&&e.currentSession&&e.currentSession.otherMatchId&&e.router.navigate([e.tabletEingabeRoute])}),(function(t){console.log(t)}))}},{key:"setActiveSession",value:function(){var t=localStorage.getItem("tabletSession");this.currentDeviceIsActive=Boolean(t)&&Jt.indexOf(t)<0,this.currentDeviceIsActive&&(this.currentSession=JSON.parse(t),this.sessions[this.currentSession.scheibenNr-1]=this.currentSession)}},{key:"storeCurrentSession",value:function(t){t.isActive?(localStorage.setItem("tabletSession",JSON.stringify(t)),this.currentDeviceIsActive=!0):(localStorage.removeItem("tabletSession"),this.currentDeviceIsActive=!1)}},{key:"setTabletEingabeRoute",value:function(){this.currentSession&&(this.tabletEingabeRoute="/"+this.currentSession.matchID+"/"+this.currentSession.otherMatchId+"/tablet")}},{key:"canNavigateToEingabe",value:function(t){return this.currentDeviceIsActive&&this.currentSession&&this.currentSession.otherMatchId&&this.currentSession.scheibenNr===t.scheibenNr}}]),t}()).\u0275fac=function(t){return new(t||Kt)(_.Jb(u.a),_.Jb(u.c),_.Jb(_t.a))},Kt.\u0275cmp=_.Db({type:Kt,selectors:[["bla-tablet-admin"]],decls:15,vars:1,consts:[[1,"container"],[1,"mb-4","mt-3"],[1,"table-responsive"],[1,"table"],[2,"width","25%"],[4,"ngFor","ngForOf"],[1,"h4","text-secondary","text-center","m-0","p-0"],[1,"badge"],["class","btn btn-danger",3,"click",4,"ngIf"],["class","btn btn-success",3,"click",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-danger",3,"click"],[3,"icon"],[1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&(_.Ob(0,"div",0),_.Ob(1,"h2",1),_.wc(2,"Tabletverwaltung"),_.Nb(),_.Ob(3,"div",2),_.Ob(4,"table",3),_.Ob(5,"tr"),_.Ob(6,"th",4),_.wc(7,"Scheibe"),_.Nb(),_.Ob(8,"th",4),_.wc(9,"Status"),_.Nb(),_.Ob(10,"th",4),_.wc(11,"Aktionen"),_.Nb(),_.Ob(12,"th",4),_.wc(13,"Access Token"),_.Nb(),_.Nb(),_.uc(14,Bt,12,9,"tr",5),_.Nb(),_.Nb(),_.Nb()),2&t&&(_.xb(14),_.dc("ngForOf",e.sessions))},directives:[c.s,c.t,Ut.b],styles:["input[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{display:block}input[_ngcontent-%COMP%]::-webkit-inner-spin-button, input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{alignment:center;text-align:center}"]}),Kt);function Xt(t,e){if(1&t){var n=_.Pb();_.Ob(0,"div",14),_.Ob(1,"label",15),_.wc(2),_.Nb(),_.Ob(3,"input",16),_.Vb("ngModelChange",(function(t){_.nc(n);var a=e.index;return _.Xb(3).schuetzen[a].schuetzeNr=t})),_.Nb(),_.Nb()}if(2&t){var a=e.index,i=_.Xb(3);_.xb(1),_.dc("for","schuetze"+a+"1Nummer"),_.xb(1),_.yc("",a+1,". Sch\xfctze"),_.xb(1),_.dc("ngModel",i.schuetzen[a].schuetzeNr)("id","schuetze"+a+"1Nummer")("tabindex",a+1)}}function jt(t,e){if(1&t){var n=_.Pb();_.Ob(0,"div",3),_.Ob(1,"h2",8),_.wc(2,"Bitte geben Sie die Sch\xfctzen-Nummern f\xfcr dieses Match ein:"),_.Nb(),_.Nb(),_.Ob(3,"div",9),_.Ob(4,"div",10),_.uc(5,Xt,4,5,"ng-template",11),_.Nb(),_.Nb(),_.Ob(6,"div",12),_.Ob(7,"button",13),_.Vb("click",(function(){return _.nc(n),_.Xb(2).submitSchuetzenNr()})),_.wc(8," Speichern "),_.Nb(),_.Nb()}if(2&t){var a=_.Xb(2);_.xb(5),_.dc("ngForOf",a.schuetzen),_.xb(2),_.dc("disabled",!a.hasValidSchuetzenNr())}}function Zt(t,e){if(1&t){var n=_.Pb();_.Ob(0,"input",26),_.Vb("ngModelChange",(function(t){_.nc(n);var e=_.Xb().$implicit;return _.Xb(3).onChange(t,1,e)}))("ngModelChange",(function(t){_.nc(n);var e=_.Xb().$implicit,a=_.Xb(3);return e.passen[a.tabletSession.satzNr-1].ringzahlPfeil1=t})),_.Nb(),_.Ob(1,"input",26),_.Vb("ngModelChange",(function(t){_.nc(n);var e=_.Xb().$implicit;return _.Xb(3).onChange(t,2,e)}))("ngModelChange",(function(t){_.nc(n);var e=_.Xb().$implicit,a=_.Xb(3);return e.passen[a.tabletSession.satzNr-1].ringzahlPfeil2=t})),_.Nb()}if(2&t){var a=_.Xb().$implicit,i=_.Xb(3);_.dc("ngModel",a.passen[i.tabletSession.satzNr-1].ringzahlPfeil1),_.xb(1),_.dc("ngModel",a.passen[i.tabletSession.satzNr-1].ringzahlPfeil2)}}var Yt=function(t,e){return{"offset-lg-2 offset-xl-3":t,"mb-4":e}};function qt(t,e){if(1&t&&(_.Ob(0,"div",23),_.Ob(1,"div",24),_.Ob(2,"h4"),_.wc(3),_.Nb(),_.Ob(4,"div",25),_.uc(5,Zt,2,2,"ng-template",2),_.Nb(),_.Nb(),_.Nb()),2&t){var n=e.index,a=e.$implicit,i=_.Xb(3);_.dc("ngClass",_.jc(3,Yt,0===n,2===n)),_.xb(3),_.yc("Sch\xfctze ",a.schuetzeNr,""),_.xb(2),_.dc("ngIf",a.passen.length>=i.tabletSession.satzNr)}}function Gt(t,e){if(1&t){var n=_.Pb();_.Ob(0,"div",17),_.Ob(1,"h2"),_.wc(2),_.Nb(),_.Ob(3,"span",7),_.wc(4,"\u2022"),_.Nb(),_.Ob(5,"h2",18),_.wc(6),_.Nb(),_.Nb(),_.uc(7,qt,6,6,"ng-template",11),_.Ob(8,"div",19),_.Ob(9,"button",20),_.Vb("click",(function(){return _.nc(n),_.Xb(2).nextMatch()})),_.wc(10," N\xe4chstes Match "),_.Kb(11,"i",21),_.Nb(),_.Ob(12,"button",22),_.Vb("click",(function(){return _.nc(n),_.Xb(2).nextSatz()})),_.wc(13," N\xe4chster Satz "),_.Kb(14,"i",21),_.Nb(),_.Nb()}if(2&t){var a=_.Xb(2);_.xb(2),_.xc(a.currentMatch.mannschaftName),_.xb(4),_.yc("Satz ",a.tabletSession.satzNr,""),_.xb(1),_.dc("ngForOf",a.schuetzen),_.xb(5),_.dc("disabled",!a.allPasseFilled())}}function $t(t,e){if(1&t&&(_.Ob(0,"div",3),_.Ob(1,"h1",4),_.wc(2),_.Nb(),_.Nb(),_.Ob(3,"div",5),_.Ob(4,"h3",6),_.wc(5),_.Nb(),_.Ob(6,"span",7),_.wc(7,"\u2022"),_.Nb(),_.Ob(8,"h3",6),_.wc(9),_.Nb(),_.Ob(10,"span",7),_.wc(11,"\u2022"),_.Nb(),_.Ob(12,"h3",6),_.wc(13),_.Nb(),_.Nb(),_.Ob(14,"div",3),_.Kb(15,"hr"),_.Nb(),_.uc(16,jt,9,2,"ng-template",2),_.uc(17,Gt,15,4,"ng-template",2)),2&t){var n=_.Xb();_.xb(2),_.yc("Scheibe ",n.tabletSession.scheibenNr,""),_.xb(3),_.yc("Wettkampftag ",n.match1.wettkampfTag,""),_.xb(4),_.yc("Match ",n.match1.nr,""),_.xb(4),_.zc("",n.match1.mannschaftName," vs. ",n.match2.mannschaftName,""),_.xb(3),_.dc("ngIf",!n.hasSchuetzenNummern()),_.xb(1),_.dc("ngIf",n.hasSchuetzenNummern())}}function Qt(t,e){if(1&t&&(_.Ob(0,"div",27),_.Ob(1,"div",28),_.wc(2," Bitte Konfigurieren Sie zun\xe4chst Ihr Ger\xe4t mit Hilfe der "),_.Ob(3,"a",29),_.wc(4,"Tablet-Administration in der Ligatabelle-Verwaltung"),_.Nb(),_.wc(5,". "),_.Nb(),_.Nb()),2&t){var n=_.Xb();_.xb(3),_.ec("routerLink",n.tabletAdminRoute)}}var te,ee,ne,ae,ie,se,ce=function(){function t(e){r(this,t),this.passen=[],this.addPasse(),this.schuetzeNr=Number.isNaN(e)?null:e}return l(t,[{key:"addPasse",value:function(){var t=new T;t.lfdNr=this.passen.length+1,t.rueckennummer=this.schuetzeNr,this.passen.push(t)}}]),t}(),re=new y(null,null,null,1,1,1,1,[],1,1,null,null),oe=((te=function(){function t(e,n,a,i,s,c,o){r(this,t),this.schusszettelService=e,this.passeService=n,this.matchService=a,this.tabletSessionService=i,this.route=s,this.router=c,this.notificationService=o}return l(t,[{key:"ngOnInit",value:function(){var t=this;this.match1=re,this.match2=re,this.currentMatch=re,this.route.params.subscribe((function(e){Object(O.c)(e.match1id)||Object(O.c)(e.match2id)||t.schusszettelService.findMatches(e.match1id,e.match2id).then((function(e){t.match1=e.payload[0],t.match2=e.payload[1],t.tabletAdminRoute="/schusszettel/tabletadmin/"+t.match1.wettkampfId,t.initStorageData(),t.tabletSession&&(t.currentMatch=t.match2.scheibenNummer===t.tabletSession.scheibenNr?t.match2:t.match1,t.initExistingPassen()),t.tabletSession.matchID=t.currentMatch&&t.currentMatch.id?t.currentMatch.id:t.tabletSession.matchID,t.updateTabletSession(),t.dumpStorageData()}),(function(t){console.error(t)}))}))}},{key:"initStorageData",value:function(){var t=this,e=Number.parseInt(localStorage.getItem("submittedSchuetzenNr"),10);try{this.tabletSession=JSON.parse(localStorage.getItem("tabletSession")),this.tabletSession.satzNr||(this.tabletSession.satzNr=1,this.updateTabletSession())}catch(n){this.notificationService.observeNotification("tabletSessionMissing").subscribe((function(e){e.userAction===nt.h.ACCEPTED&&t.router.navigate([t.tabletAdminRoute])})),this.resetStorageData(),this.showMissingTabletSessionNotification()}this.submittedSchuetzenNr=!(!Boolean(e)||isNaN(e))&&1===e,this.initSchuetzen()}},{key:"initSchuetzen",value:function(){var e=localStorage.getItem("schuetzen"),n=Boolean(e)?JSON.parse(e):[];if(this.schuetzen=[],0===n.length){var a,i=s(t.getSchuetzeIdxValues());try{for(i.s();!(a=i.n()).done;){var c=a.value,r=Number.parseInt(localStorage.getItem("schuetze"+(c+1)),10);this.schuetzen.push(new ce(r))}}catch(N){i.e(N)}finally{i.f()}}else{var o,l=s(n);try{for(l.s();!(o=l.n()).done;){var u=o.value,h=new ce(Number(u.schuetzeNr));h.passen=[];var b,f=s(u.passen);try{for(f.s();!(b=f.n()).done;){for(var d=b.value,m=new T,p=0,g=Object.keys(d);p<g.length;p++){var v=g[p];m[v]=d[v]}h.passen.push(m)}}catch(N){f.e(N)}finally{f.f()}this.schuetzen.push(h)}}catch(N){l.e(N)}finally{l.f()}}}},{key:"dumpStorageData",value:function(){if(localStorage.setItem("tabletSession",JSON.stringify(this.tabletSession)),localStorage.setItem("submittedSchuetzenNr",this.submittedSchuetzenNr?Number(1).toString():Number(0).toString()),localStorage.setItem("schuetzen",Boolean(this.schuetzen)?JSON.stringify(this.schuetzen):""),this.hasSchuetzenNummern()){var e,n=s(t.getSchuetzeIdxValues());try{for(n.s();!(e=n.n()).done;){var a=e.value;localStorage.setItem("schuetze"+(a+1),this.schuetzen[a].schuetzeNr.toString())}}catch(i){n.e(i)}finally{n.f()}}}},{key:"resetStorageData",value:function(){localStorage.setItem("submittedSchuetzenNr","0"),localStorage.setItem("schuetzen","");var e,n=s(t.getSchuetzeIdxValues());try{for(n.s();!(e=n.n()).done;){var a=e.value;localStorage.setItem("schuetze"+(a+1),"")}}catch(i){n.e(i)}finally{n.f()}this.schuetzen=[],this.submittedSchuetzenNr=!1}},{key:"initExistingPassen",value:function(){var t,e=0,n=s(this.currentMatch.schuetzen);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.length>0)for(this.schuetzen[e].passen=a;this.schuetzen[e].passen.length<this.tabletSession.satzNr;)this.schuetzen[e].addPasse();e++}}catch(i){n.e(i)}finally{n.f()}this.dumpStorageData()}},{key:"submitSchuetzenNr",value:function(){this.hasValidSchuetzenNr()&&(this.submittedSchuetzenNr=!0,this.dumpStorageData())}},{key:"hasValidSchuetzenNr",value:function(){return Boolean(this.schuetzen)&&null!==this.schuetzen[0].schuetzeNr&&null!==this.schuetzen[1].schuetzeNr&&null!==this.schuetzen[2].schuetzeNr&&this.schuetzen[0].schuetzeNr>0&&this.schuetzen[1].schuetzeNr>0&&this.schuetzen[2].schuetzeNr>0}},{key:"hasSchuetzenNummern",value:function(){return this.hasValidSchuetzenNr()&&this.submittedSchuetzenNr}},{key:"onChange",value:function(t,e,n){var a=n.passen[this.tabletSession.satzNr-1];a["ringzahlPfeil"+e]=t,this.passeIsValid(a)&&(this.enrichPasseDO(a,n),this.createOrUpdatePasse(a,n))}},{key:"createOrUpdatePasse",value:function(t,e){var n=this;null!==t.id?this.passeService.update(t).then((function(t){e.passen[n.tabletSession.satzNr-1]=t.payload,n.dumpStorageData()})).catch((function(t){console.error(t)})):this.passeService.create(t).then((function(t){e.passen[n.tabletSession.satzNr-1]=t.payload,n.dumpStorageData()})).catch((function(t){console.error(t)}))}},{key:"nextSatz",value:function(){this.allPasseFilled()&&(this.addEmptyPassen(),this.tabletSession.satzNr++,this.updateTabletSession(),this.dumpStorageData())}},{key:"addEmptyPassen",value:function(){var t,e=s(this.schuetzen);try{for(e.s();!(t=e.n()).done;)t.value.addPasse()}catch(n){e.e(n)}finally{e.f()}}},{key:"allPasseFilled",value:function(){var t,e=!0,n=s(this.schuetzen);try{for(n.s();!(t=n.n()).done;){var a=t.value;e=e&&this.passeIsValid(a.passen[this.tabletSession.satzNr-1])}}catch(i){n.e(i)}finally{n.f()}return e}},{key:"nextMatch",value:function(){var t=this;this.showConfirmNextMatchNotification(),this.notificationService.observeNotification("tabletEingabeConfirmNextMatch").subscribe((function(e){e.userAction===nt.h.ACCEPTED&&(t.showNextMatchNotification(),t.matchService.next(t.currentMatch.id).then((function(e){2===e.payload.length&&(t.resetStorageData(),t.initStorageData(),t.router.navigate(["/schusszettel/"+e.payload[0]+"/"+e.payload[1]+"/tablet"]),t.notificationService.discardNotification())})))}))}},{key:"updateTabletSession",value:function(){var t=this;this.tabletSession&&this.tabletSessionService.update(this.tabletSession).then((function(e){t.tabletSession=e.payload,t.dumpStorageData()}))}},{key:"showMissingTabletSessionNotification",value:function(){this.notificationService.showNotification({id:"tabletSessionMissing",title:"Konfigurationsfehler",description:"Dieses Ger\xe4t wurde noch f\xfcr keine Scheibe registriert. Bitte holen Sie dies in der Ligatabelle-Administration nach.",severity:nt.f.ERROR,origin:nt.d.SYSTEM,type:nt.g.OK,userAction:nt.h.PENDING})}},{key:"showConfirmNextMatchNotification",value:function(){this.notificationService.showNotification({id:"tabletEingabeConfirmNextMatch",title:"N\xe4chstes Match starten",description:"Wollen Sie wirklich das n\xe4chste Match starten?",severity:nt.f.QUESTION,origin:nt.d.SYSTEM,type:nt.g.YES_NO,userAction:nt.h.PENDING})}},{key:"showNextMatchNotification",value:function(){this.notificationService.showNotification({id:"tabletEingabeNextMatch",title:"L\xe4dt ...",description:"Das n\xe4chste anstehende Match auf dieser Scheibe wird geladen...",severity:nt.f.INFO,origin:nt.d.USER,type:nt.g.OK,userAction:nt.h.PENDING})}},{key:"passeIsValid",value:function(t){return!!t&&t.ringzahlPfeil1&&t.ringzahlPfeil1>=0&&t.ringzahlPfeil2&&t.ringzahlPfeil2>=0}},{key:"enrichPasseDO",value:function(t,e){t.mannschaftId=this.currentMatch.mannschaftId,t.matchNr=this.currentMatch.nr,t.matchId=this.currentMatch.id,t.wettkampfId=this.currentMatch.wettkampfId,t.rueckennummer=e.schuetzeNr}}],[{key:"getSchuetzeIdxValues",value:function(){return Array.apply(null,{length:3}).map(Number.call,Number)}}]),t}()).\u0275fac=function(t){return new(t||te)(_.Jb(et),_.Jb(Dt),_.Jb(U),_.Jb(_t.a),_.Jb(u.a),_.Jb(u.c),_.Jb(nt.e))},te.\u0275cmp=_.Db({type:te,selectors:[["bla-tableteingabe"]],decls:4,vars:2,consts:[[1,"tablet-eingabe"],[1,"row"],[3,"ngIf"],[1,"col-sm-12"],[1,"w-100","text-center","my-3"],[1,"col-sm-12","tablet-eingabe-info-section"],[1,"text-center","d-inline-block"],[1,"mx-3","separator"],[1,"w-100","text-center","d-inline-block"],[1,"offset-lg-3","col-lg-6","offset-xl-4","col-xl-4"],[1,"pb-5","pt-3","w-100","flex-container","justify-content-around"],["ngFor","",3,"ngForOf"],[1,"offset-4","col-sm-4","justify-content-end","flex-container"],[1,"btn","btn-primary","mb-5",3,"disabled","click"],[1,"d-inline-flex","align-items-center","flex-column"],[1,"h4",3,"for"],["blaMyNumberOnly","","type","number",3,"ngModel","id","tabindex","ngModelChange"],[1,"col-sm-12","tablet-eingabe-current"],[1,"mb-3"],[1,"offset-2","col-sm-8","justify-content-between","flex-container"],[1,"btn","btn-primary","mr-3","my-5",3,"click"],[1,"fa","fa-fw","fa-chevron-right"],[1,"btn","btn-primary","mr-3","my-5",3,"disabled","click"],[1,"col-lg-3","col-xl-2",3,"ngClass"],[1,"schuetze"],[1,"flex-container"],["blaMyNumberOnly","","type","text",1,"m-2",3,"ngModel","ngModelChange"],[1,"col-sm-12","justify-content-around"],[1,"alert","alert-warning","m-3"],[3,"routerLink"]],template:function(t,e){1&t&&(_.Ob(0,"div",0),_.Ob(1,"div",1),_.uc(2,$t,18,7,"ng-template",2),_.uc(3,Qt,6,1,"ng-template",2),_.Nb(),_.Nb()),2&t&&(_.xb(2),_.dc("ngIf",e.tabletSession),_.xb(1),_.dc("ngIf",!e.tabletSession))},directives:[c.t,c.s,o.t,o.c,o.n,o.q,c.q,u.f],styles:[".tablet-eingabe[_ngcontent-%COMP%]   .tablet-eingabe-info-section[_ngcontent-%COMP%]{text-align:center}.tablet-eingabe[_ngcontent-%COMP%]   .tablet-eingabe-info-section[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{font-size:1.75rem}.tablet-eingabe[_ngcontent-%COMP%]   .tablet-eingabe-current[_ngcontent-%COMP%]{text-align:center}.tablet-eingabe[_ngcontent-%COMP%]   .tablet-eingabe-current[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{font-size:2rem}input[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{display:block}input[_ngcontent-%COMP%]::-webkit-inner-spin-button, input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[_ngcontent-%COMP%]{height:55px;width:55px;-moz-appearance:textfield;font-size:30px;text-align:center}input[_ngcontent-%COMP%]:focus{box-shadow:0 0 8px 0 #057aff}.flex-container[_ngcontent-%COMP%]{display:flex}"]}),te),le=i("th7h"),ue=((ee=function(){function t(e){r(this,t),this.currentUserService=e}return l(t,[{key:"canActivate",value:function(){return this.currentUserService.hasAnyPermisson([le.b.CAN_READ_WETTKAMPF,le.b.CAN_MODIFY_WETTKAMPF])}}]),t}()).\u0275fac=function(t){return new(t||ee)(_.Sb(le.a))},ee.\u0275prov=_.Fb({token:ee,factory:ee.\u0275fac}),ee),he=[{path:"",pathMatch:"full",component:Q,canActivate:[ue]},{path:"",pathMatch:"full",component:xt},{path:"",pathMatch:"full",component:oe},{path:"",pathMatch:"full",component:Wt},{path:":wettkampfId",pathMatch:"full",component:Q},{path:"tabletadmin/:wettkampfId",pathMatch:"full",component:Wt},{path:"schusszettel/:match1id/:match2id",pathMatch:"full",component:xt},{path:":match1id/:match2id/tablet",pathMatch:"full",component:oe}],be=((se=function(){function t(e){r(this,t),this.currentUserService=e}return l(t,[{key:"canActivate",value:function(t,e){return this.currentUserService.hasPermission(nt.i.CAN_READ_MY_VERANSTALTUNG)}}]),t}()).\u0275fac=function(t){return new(t||se)(_.Sb(nt.a))},se.\u0275prov=_.Fb({token:se,factory:se.\u0275fac}),se),fe=((ie=function(){function t(e){r(this,t),this.currentUserService=e}return l(t,[{key:"canActivate",value:function(t,e){return this.currentUserService.hasPermission(nt.i.CAN_OPERATE_SPOTTING)}}]),t}()).\u0275fac=function(t){return new(t||ie)(_.Sb(nt.a))},ie.\u0275prov=_.Fb({token:ie,factory:ie.\u0275fac}),ie),de=((ae=function(){function t(e){r(this,t),this.currentUserService=e}return l(t,[{key:"canActivate",value:function(t,e){return this.currentUserService.hasAnyPermisson([nt.i.CAN_MODIFY_MY_VERANSTALTUNG,nt.i.CAN_OPERATE_SPOTTING])}}]),t}()).\u0275fac=function(t){return new(t||ae)(_.Sb(nt.a))},ae.\u0275prov=_.Fb({token:ae,factory:ae.\u0275fac}),ae),me=((ne=function(){function t(){r(this,t)}return l(t,null,[{key:"forRoot",value:function(){return{ngModule:h.a,providers:[ue,be,fe,de]}}}]),t}()).\u0275mod=_.Hb({type:ne}),ne.\u0275inj=_.Gb({factory:function(t){return new(t||ne)},providers:[ue,be,fe,de],imports:[[c.c,u.g.forChild(he),h.a.forChild(),o.k]]}),ne)}}])}();