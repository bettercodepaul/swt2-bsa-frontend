!function(){function e(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw o}}}}function n(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}function t(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,n){return(i=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function a(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,i=o(e);if(n){var a=o(this).constructor;t=Reflect.construct(i,arguments,a)}else t=i.apply(this,arguments);return r(this,t)}}function r(e,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{wQCW:function(n,r,o){"use strict";o.r(r),o.d(r,"VereineModule",(function(){return B}));var l,c,u=o("ofXK"),f=o("3Pt+"),h=o("tyNb"),d=o("FpXt"),p=o("mrSG"),v=o("tY1a"),g={moduleTranslationKey:"VEREINE",pageTitleTranslationKey:"VEREINE.VEREINE.TITLE",navigationCardsConfig:{navigationCards:[]}},b={columns:[{translationKey:"VEREINE.VEREINE.TABLE.HEADERS.VERANSTALTUNG",propertyName:"veranstaltung_name",width:20},{translationKey:"VEREINE.VEREINE.TABLE.HEADERS.WETTKAMPF",propertyName:"wettkampfTag",width:20},{translationKey:"TABLE.PLACE",propertyName:"wettkampfOrtsname",width:20},{translationKey:"VEREINE.VEREINE.TABLE.HEADERS.MANNSCHAFT",propertyName:"mannschaftsName",width:20}],actions:{actionTypes:[v.a.MAP],width:6}},y=o("X628"),m=o("FlTZ"),w=o("PEb7"),E=o("ny2l"),k=o("sQ0O"),T=o("nr0C"),V=function e(n,t,i,a){s(this,e),this.veranstaltung_name=n,this.wettkampfTag=t,this.wettkampfOrtsname=a,this.mannschaftsName=i,this.id=1,this.version=1},S=o("gQPg"),I=o("hEMT"),O=o("20cS"),R=o("NJqk"),P=o("fXoL"),D=o("U9hD"),A=o("ghtv"),C=o("hIfO"),N=o("zLSN"),M=o("xOPY"),F=o("sYmb"),L=function(e){return[e]},j=((l=function(n){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&i(e,n)}(u,n);var r,o,l,c=a(u);function u(e,n,t,i,a,r,o,l){var f;return s(this,u),(f=c.call(this)).router=e,f.route=n,f.notificationService=t,f.wettkampfDataProvider=i,f.veranstaltungsDataProvider=a,f.vereinDataProvider=r,f.mannschaftsDataProvider=o,f.currentUserService=l,f.PLACEHOLDER_VAR="Bitte Verein eingeben...",f.config=g,f.config_table=b,f.multipleSelections=!0,f.loadingVereine=!0,f.loadingTable=!1,f.tableContent=[],f.sessionHandling=new O.a(f.currentUserService),f}return r=u,(o=[{key:"ngOnInit",value:function(){var e=this;console.log("Bin in Vereine"),this.currentVerein=null,this.providedID=null,this.hasID=!1,this.loading=!0,this.notificationService.discardNotification(),this.route.params.subscribe((function(n){Object(y.c)(n.id)||(e.hasID=!0,e.providedID=parseInt(n.id,10),console.log("This.providedID: "+e.providedID))})),this.loadVereine(),this.getAllVeranstaltungen(),this.getAllMannschaften()}},{key:"onMouseOver",value:function(e){this.sessionHandling.checkSessionExpired()&&window.location.reload()}},{key:"changeSelectedVerein",value:function(){var e=this;this.selectedVereine=[],this.vereinDataProvider.findById(this.selectedVereinsId).then((function(n){return e.getVereinSuccess(n.payload)})).catch((function(e){return console.log("Fehler im Verein laden")}))}},{key:"getVereinSuccess",value:function(e){this.currentVerein=e,this.selectedVereine.push(this.currentVerein)}},{key:"onSelect",value:function(e){this.selectedDTOs=[],this.selectedDTOs=e,this.selectedDTOs&&this.selectedDTOs.length>0&&(this.selectedVereinsId=this.selectedDTOs[0].id),this.changeVerein()}},{key:"changeVerein",value:function(){this.rows=[],this.tableContent=[],null!=this.selectedVereinsId&&this.loadTableRows()}},{key:"getSelectedDTO",value:function(){if(Object(y.a)(this.selectedDTOs))return"";var e=[];return this.selectedDTOs.forEach((function(n){e.push(n.name)})),e.join(", ")}},{key:"onView",value:function(e){}},{key:"onEdit",value:function(e){}},{key:"onDelete",value:function(e){}},{key:"getSelectedColumn",value:function(e){this.typeOfTableColumn=e.propertyName}},{key:"getAllVeranstaltungen",value:function(){var e=this;this.veranstaltungsDataProvider.findAll().then((function(n){e.veranstaltungen=n.payload}))}},{key:"getAllMannschaften",value:function(){var e=this;this.mannschaftsDataProvider.findAll().then((function(n){e.mannschaften=n.payload}))}},{key:"getSelectedRow",value:function(e){return Object(p.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=e.veranstaltung_name,i=e.mannschaftsName.replace(". Mannschaft",""),this.linkPreperation(this.typeOfTableColumn,t,i);case 2:case"end":return n.stop()}}),n,this)})))}},{key:"linkPreperation",value:function(e,n,t){var i=this.veranstaltungen.find((function(e){return e.name===n}));if("veranstaltung_name"===e)this.vereineLinking(i.id.toString(10));else if("mannschaftsName"===e){var a=this.mannschaften.find((function(e){return e.name===t}));this.vereineLinking(i.id+"/"+a.id)}}},{key:"vereineLinking",value:function(e){this.router.navigateByUrl("/wettkaempfe/"+e)}},{key:"onMap",value:function(e){Object(I.a)(e)}},{key:"loadVereine",value:function(){var e=this;this.vereine=[],this.vereinDataProvider.findAll().then((function(n){e.vereine=n.payload.sort(),e.loadingVereine=!1,e.selectedVereinsId=e.hasID?e.providedID:n.payload[0].id,e.changeSelectedVerein(),e.onSelect(e.selectedVereine)})).catch((function(n){e.vereine=n.payload}))}},{key:"loadTableRows",value:function(){var e=this;this.loadingTable=!0,this.mannschaftsDataProvider.findAllByVereinsId(this.selectedVereinsId).then((function(n){return e.handleFindMannschaftenSuccess(n)})).catch((function(n){return e.handleFindMannschaftenFailure(n)}))}},{key:"handleFindMannschaftenFailure",value:function(e){this.rows=[],this.loadingTable=!1}},{key:"handleFindMannschaftenSuccess",value:function(e){var n,t=this,i=function(){var i=e.payload[n].name+". Mannschaft";t.wettkampfDataProvider.findAllWettkaempfeByMannschaftsId(e.payload[n].id).then((function(e){return t.handleFindWettkaempfeSuccess(e,i)})).catch((function(e){return t.handleFindWettkaempfeFailure(e)}))};for(this.rows=[],this.remainingMannschaftsRequests=e.payload.length,e.payload.length<=0&&(this.loadingTable=!1),n=0;n<e.payload.length;n++)i()}},{key:"handleFindWettkaempfeFailure",value:function(e){this.rows=[],this.loadingTable=!1}},{key:"handleFindWettkaempfeSuccess",value:function(n,t){var i=this;console.log("success"),this.remainingRequests=n.payload.length,this.remainingMannschaftsRequests-=1,n.payload.length<=0&&(this.loadingTable=!1);var a,r=e(n.payload);try{var o=function(){var e=a.value,n=e.wettkampfTag+". Wettkampftag",r=e.wettkampfOrtsname;i.veranstaltungsDataProvider.findById(e.wettkampfVeranstaltungsId).then((function(e){return i.handleFindVeranstaltungSuccess(e,t,n,r)})).catch((function(e){return i.handleFindVeranstaltungFailure(e)}))};for(r.s();!(a=r.n()).done;)o()}catch(l){r.e(l)}finally{r.f()}if(0===n.payload.length){var s=new V("","",t,"");this.tableContent.push(s)}this.remainingMannschaftsRequests<=0&&(this.rows=Object(w.toTableRows)(this.tableContent))}},{key:"handleFindVeranstaltungFailure",value:function(e){this.rows=[],this.loadingTable=!1}},{key:"handleFindVeranstaltungSuccess",value:function(e,n,t,i){console.log("Content:"+e.payload.name+t+n+i);var a=new V(e.payload.name,t,n,i);this.tableContent.push(a),this.remainingRequests-=1,this.remainingRequests<=0&&(this.rows=Object(w.toTableRows)(this.tableContent),this.tableContent=[],this.loadingTable=!1)}}])&&t(r.prototype,o),l&&t(r,l),u}(w.CommonComponentDirective)).\u0275fac=function(e){return new(e||l)(P.Lb(h.c),P.Lb(h.a),P.Lb(S.c),P.Lb(k.a),P.Lb(T.a),P.Lb(m.a),P.Lb(E.a),P.Lb(R.a))},l.\u0275cmp=P.Fb({type:l,selectors:[["bla-vereine"]],features:[P.wb],decls:15,vars:16,consts:[[3,"config","mouseover"],["href","https://wiki.bsapp.de/doku.php?id=liga:vereine","target","_blank"],[1,"subtitle"],[1,"row"],[2,"display","inline"],["selectionListHeight","15em",2,"width","50%","flex-grow","0",3,"selectedItemIds","items","loading","multipleSelections","placeholderTranslationKey","optionFieldSelector","onSelect"],[3,"config","loading","rows","onColumnEntry","onRowEntry","onMapEntry"]],template:function(e,n){1&e&&(P.Qb(0,"bla-navigation-dialog",0),P.Xb("mouseover",(function(e){return n.onMouseOver(e)})),P.Mb(1,"bla-hilfe-button",1),P.Qb(2,"p",2),P.Bc(3),P.ac(4,"translate"),P.Pb(),P.Qb(5,"div",3),P.Qb(6,"div"),P.Qb(7,"h2",4),P.Bc(8,"Gew\xe4hlter Verein: "),P.Pb(),P.Qb(9,"h3",4),P.Bc(10),P.Pb(),P.Pb(),P.Qb(11,"bla-col-layout"),P.Qb(12,"bla-quicksearch-list",5),P.Xb("onSelect",(function(e){return n.onSelect(e)})),P.Pb(),P.Pb(),P.Pb(),P.Qb(13,"div",3),P.Qb(14,"bla-data-table",6),P.Xb("onColumnEntry",(function(e){return n.getSelectedColumn(e)}))("onRowEntry",(function(e){return n.getSelectedRow(e)}))("onMapEntry",(function(e){return n.onMap(e)})),P.Pb(),P.Pb(),P.Pb()),2&e&&(P.fc("config",n.config),P.zb(3),P.Cc(P.bc(4,12,"VEREINE.VEREINE.DESCRIPTION")),P.zb(7),P.Cc(n.getSelectedDTO()),P.zb(2),P.fc("selectedItemIds",P.kc(14,L,n.selectedVereinsId))("items",n.vereine)("loading",n.loadingVereine)("multipleSelections",!n.multipleSelections)("placeholderTranslationKey",n.PLACEHOLDER_VAR)("optionFieldSelector","name"),P.zb(2),P.fc("config",n.config_table)("loading",n.loadingTable)("rows",n.rows))},directives:[D.a,A.a,C.a,N.a,M.a],pipes:[F.d],styles:[".row[_ngcontent-%COMP%]{margin:20px;display:flex;flex-direction:column}"]}),l),_=[{path:"",pathMatch:"full",component:j},{path:"/:id",pathMatch:"full",component:j}],B=((c=function e(){s(this,e)}).\u0275mod=P.Jb({type:c}),c.\u0275inj=P.Ib({factory:function(e){return new(e||c)},imports:[[u.c,h.g.forChild(_),d.a,f.k]]}),c)}}])}();