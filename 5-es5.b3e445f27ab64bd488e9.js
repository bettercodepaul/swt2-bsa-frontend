!function(){function t(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&e(t,n)}function e(t,n){return(e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,n)}function n(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=i(t);if(e){var c=i(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,o=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,r=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw r}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function l(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"3UX2":function(e,a,i){"use strict";i.r(a),i.d(a,"WkdurchfuehrungModule",(function(){return $e}));var c=i("ofXK"),o=i("3Pt+"),u=i("tyNb"),h=i("FpXt"),f=i("mrSG"),b=i("PEb7"),d=i("tY1a"),m={moduleTranslationKey:"WKDURCHFUEHRUNG",pageTitleTranslationKey:"WKDURCHFUEHRUNG.WKDURCHFUEHRUNG.TITLE",navigationCardsConfig:{navigationCards:[]}},p={columns:[{translationKey:"WKDURCHFUEHRUNG.WETTKAMPF.TABLE.CDAY",propertyName:"wettkampfTag",width:20},{translationKey:"WKDURCHFUEHRUNG.WETTKAMPF.TABLE.DATE",propertyName:"wettkampfDatum",width:15},{translationKey:"WKDURCHFUEHRUNG.WETTKAMPF.TABLE.TIME",propertyName:"wettkampfBeginn",width:15},{translationKey:"WKDURCHFUEHRUNG.WETTKAMPF.TABLE.PLACE",propertyName:"wettkampfOrtsname",width:40}],actions:{actionTypes:[d.a.VIEW,d.a.MAP],width:6}},g={columns:[{translationKey:"WKDURCHFUEHRUNG.MATCH.TABLE.NUMMER",propertyName:"nr",width:5},{translationKey:"WKDURCHFUEHRUNG.MATCH.TABLE.SCHEIBE",propertyName:"scheibenNummer",width:5},{translationKey:"WKDURCHFUEHRUNG.MATCH.TABLE.MANNSCHAFT",propertyName:"mannschaftName",width:20},{translationKey:"WKDURCHFUEHRUNG.MATCH.TABLE.BEGEGNUNG",propertyName:"begegnung",width:5},{translationKey:"WKDURCHFUEHRUNG.MATCH.TABLE.MATCHPUNKTE",propertyName:"matchpunkte",type:5,currentSortOrder:1,width:5},{translationKey:"WKDURCHFUEHRUNG.MATCH.TABLE.SATZPUNKTE",propertyName:"satzpunkte",width:5}],actions:{actionTypes:[d.a.EDIT],width:6}},v=i("YfBl"),S=i("S/GV"),E=i("nr0C"),C=i("sQ0O"),k=i("BMmu"),T=i("4ipa"),P=i("X628"),U=function(){function t(e,n,a,i,r,c,o,l,u,h,f,b,d,m,p,g,v){s(this,t),this.id=e||null,this.mannschaftId=n||null,this.mannschaftName=a||"Mannschaft 1",this.wettkampfId=i||null,this.nr=r||null,this.begegnung=c||null,this.scheibenNummer=o||null,this.matchpunkte=l,this.satzpunkte=u,this.strafPunkteSatz1=h||0,this.strafPunkteSatz2=f||0,this.strafPunkteSatz3=b||0,this.strafPunkteSatz4=d||0,this.strafPunkteSatz5=m||0,this.passen=p||[],this.wettkampfTyp=v,this.wettkampfTag=g}return l(t,null,[{key:"copyFrom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new t;return n.id=e.id>=0?e.id:null,n.version=e.version>=0?e.version:null,n.mannschaftId=e.mannschaftId>=0?e.mannschaftId:null,n.mannschaftName=e.mannschaftName||"",n.wettkampfId=e.wettkampfId>=0?e.wettkampfId:null,n.wettkampfTag=e.wettkampfTag>=0?e.wettkampfTag:null,n.wettkampfTyp=e.wettkampfTyp||"",n.nr=e.nr>=0?e.nr:null,n.begegnung=e.begegnung>=0?e.begegnung:null,n.scheibenNummer=e.scheibenNummer>=0?e.scheibenNummer:null,n.matchpunkte=e.matchpunkte>=0?e.matchpunkte:null,n.satzpunkte=e.satzpunkte>=0?e.satzpunkte:null,n.strafPunkteSatz1=e.strafPunkteSatz1>=0?e.strafPunkteSatz1:null,n.strafPunkteSatz2=e.strafPunkteSatz2>=0?e.strafPunkteSatz2:null,n.strafPunkteSatz3=e.strafPunkteSatz3>=0?e.strafPunkteSatz3:null,n.strafPunkteSatz4=e.strafPunkteSatz4>=0?e.strafPunkteSatz4:null,n.strafPunkteSatz5=e.strafPunkteSatz5>=0?e.strafPunkteSatz5:null,Object(P.a)(e.passen)?n.passen=null:(n.passen=new Array,e.passen.forEach((function(t){n.passen.push(t)}))),n}}]),t}(),N=function t(e,n,a,i,r,c,o,l,u,h,f,b,d,m){s(this,t),this.id=e||null,this.mannschaftId=n||null,this.mannschaftName=a||"Mannschaft 1",this.wettkampfId=i||null,this.nr=r,this.begegnung=c,this.scheibenNummer=o||null,this.sumSatz=l||[5],this.matchpunkte=u,this.satzpunkte=h,this.fehlerpunkte=f||[],this.schuetzen=b||[],this.wettkampfTyp=m,this.wettkampfTag=d},R=function t(e,n,a,i,r,c,o,l,u){s(this,t),this.id=e||null,this.matchId=n||null,this.mannschaftId=a||null,this.wettkampfId=i||null,this.matchNr=r||null,this.lfdNr=c||null,this.dsbMitgliedId=o||null,this.ringzahl=l||[],this.rueckennummer=u||null},I=function t(e,n,a,i,r,c,o,l,u,h,f,b,d,m){s(this,t),this.id=e||null,this.matchId=n||null,this.mannschaftId=a||null,this.wettkampfId=i||null,this.matchNr=r||null,this.lfdNr=c||null,this.dsbMitgliedId=o||null,this.ringzahlPfeil1=l||null,this.ringzahlPfeil2=u||null,this.ringzahlPfeil3=h||null,this.ringzahlPfeil4=f||null,this.ringzahlPfeil5=b||null,this.ringzahlPfeil6=d||null,this.rueckennummer=m||null},z=function(){function t(){s(this,t)}return l(t,null,[{key:"passeToDO",value:function(t){return new I(t.id,t.matchId,t.mannschaftId,t.wettkampfId,t.matchNr,t.lfdNr,t.dsbMitgliedId,t.ringzahl[0],t.ringzahl[1],t.ringzahl[2],t.ringzahl[3],t.ringzahl[4],t.ringzahl[5],t.rueckennummer)}},{key:"passeToDTO",value:function(t){return new R(t.id,t.matchId,t.mannschaftId,t.wettkampfId,t.matchNr,t.lfdNr,t.dsbMitgliedId,[t.ringzahlPfeil1,t.ringzahlPfeil2,t.ringzahlPfeil3,t.ringzahlPfeil4,t.ringzahlPfeil5,t.ringzahlPfeil6],t.rueckennummer)}}]),t}();var y=function(){function t(){s(this,t)}return l(t,null,[{key:"matchToDO",value:function(t){var e=[],n=[];if(t.passen.length>0){var a=new Map;e[0]=[],e[1]=[],e[2]=[],n=[0,0,0,0,0];var i,c=r(t.passen);try{for(c.s();!(i=c.n()).done;){var s=i.value,o=z.passeToDO(s);if(a.has(s.rueckennummer))a.get(s.rueckennummer).push(o);else{var l=[];l.push(o),a.set(s.rueckennummer,l)}}}catch(E){c.e(E)}finally{c.f()}console.log("schuetzenPasseMap",a);var u=0;a.forEach((function(t,n){e[u]=t,u++})),console.log("schuetzen",e);for(var h=0;h<e[0].length;h++){if(e[0].length>5)for(var f=e[0].length;f>5;f--)e[0].pop();var b,d=r(e);try{for(d.s();!(b=d.n()).done;){var m=b.value;h<5&&(n[h]+=m[h].ringzahlPfeil1+m[h].ringzahlPfeil2)}}catch(E){d.e(E)}finally{d.f()}}for(var p=0;p<3;p++){for(var g=e[p].length,v=g,S=0;S<5-g;S++)e[p].push(new I(null,t.id,t.mannschaftId,t.wettkampfId,t.nr,v+1)),++v;e[p]=e[p].sort((function(t,e){return t.lfdNr-e.lfdNr}))}}return new N(t.id,t.mannschaftId,t.mannschaftName,t.wettkampfId,t.nr,t.begegnung,t.scheibenNummer,n,t.matchpunkte,t.satzpunkte,[t.strafPunkteSatz1,t.strafPunkteSatz2,t.strafPunkteSatz3,t.strafPunkteSatz4,t.strafPunkteSatz5],e,t.wettkampfTag,t.wettkampfTyp)}},{key:"matchToDTO",value:function(t){var e,n=[],a=r(t.schuetzen);try{for(a.s();!(e=a.n()).done;){var i,c=e.value,s=r(c);try{for(s.s();!(i=s.n()).done;){var o=i.value;o.rueckennummer=c[0].rueckennummer,n.push(z.passeToDTO(o))}}catch(l){s.e(l)}finally{s.f()}}}catch(l){a.e(l)}finally{a.f()}return new U(t.id,t.mannschaftId,t.mannschaftName,t.wettkampfId,t.nr,t.begegnung,t.scheibenNummer,t.matchpunkte,t.satzpunkte,t.fehlerpunkte[0],t.fehlerpunkte[1],t.fehlerpunkte[2],t.fehlerpunkte[3],t.fehlerpunkte[4],n,t.wettkampfTag,t.wettkampfTyp)}}]),t}(),O=i("NJqk"),w=function(){function t(){s(this,t)}return l(t,null,[{key:"copyFrom",value:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=new t;return a.id=n.id||null,a.version=null!==(e=n.version)&&void 0!==e?e:1,a.wettkampfId=n.wettkampfId>=0?n.wettkampfId:null,a.matchNr=n.matchNr>=0?n.matchNr:null,a.matchScheibennummer=n.matchScheibennummer>=0?n.matchScheibennummer:null,a.matchpkt=n.matchpkt>=0?n.matchpkt:null,a.satzpunkte=n.satzpunkte>=0?n.satzpunkte:null,a.mannschaftId=n.mannschaftId>=0?n.mannschaftId:null,a.mannschaftName=n.mannschaftName||null,a.nameGegner=n.nameGegner||null,a.scheibennummerGegner=n.scheibennummerGegner>=0?n.scheibennummerGegner:null,a.matchIdGegner=n.matchIdGegner>=0?n.matchIdGegner:null,a.naechsteMatchId=n.naechsteMatchId>=0?n.naechsteMatchId:null,a.naechsteNaechsteMatchNrMatchId=n.naechsteNaechsteMatchNrMatchId>=0?n.naechsteNaechsteMatchNrMatchId:null,a.strafpunkteSatz1=n.strafpunkteSatz1>=0?n.strafpunkteSatz1:null,a.strafpunkteSatz2=n.strafpunkteSatz2>=0?n.strafpunkteSatz2:null,a.strafpunkteSatz3=n.strafpunkteSatz3>=0?n.strafpunkteSatz3:null,a.strafpunkteSatz4=n.strafpunkteSatz4>=0?n.strafpunkteSatz4:null,a.strafpunkteSatz5=n.strafpunkteSatz5>=0?n.strafpunkteSatz5:null,a}}]),t}();function M(t,e){var n=[];return t.forEach((function(t){return n.push(H(t,e))})),n}function H(t,e){var n=[];e.forEach((function(e){e.matchId===t.matchId&&n.push(e)}));var a=Math.ceil(t.matchScheibennummer/2);return{id:t.matchId,version:t.matchVersion,mannschaftId:t.mannschaftId,mannschaftName:t.mannschaftName,nr:t.matchNr,begegnung:a,matchpunkte:t.matchpkt,scheibenNummer:t.matchScheibennummer,passen:n,satzpunkte:t.satzpunkte,strafPunkteSatz1:t.strafpunkteSatz1,strafPunkteSatz2:t.strafpunkteSatz2,strafPunkteSatz3:t.strafpunkteSatz3,strafPunkteSatz4:t.strafpunkteSatz4,strafPunkteSatz5:t.strafpunkteSatz5,wettkampfId:t.wettkampfId,wettkampfTag:null,wettkampfTyp:""}}var A,D=i("fXoL"),F=((A=function(e){t(i,e);var a=n(i);function i(t,e){var n;return s(this,i),(n=a.call(this)).restClient=t,n.onOfflineService=e,n.serviceSubUrl="v1/match",n}return l(i,[{key:"getmatchoffline",value:function(t){return new Promise((function(e,n){T.a.matchTabelle.where("matchNr").equals(t).toArray().then((function(t){e({result:v.RequestResult.SUCCESS,payload:M(t,[])})}),(function(){n({result:v.RequestResult.FAILURE})}))}))}},{key:"get",value:function(t){var e=this;return new Promise((function(n,a){e.restClient.GET((new v.UriBuilder).fromPath(e.getUrl()).path(t).build()).then((function(t){var e=y.matchToDO(t);n({result:v.RequestResult.SUCCESS,payload:e})}),(function(t){a(0===t.status?{result:v.RequestResult.CONNECTION_PROBLEM}:{result:v.RequestResult.FAILURE})}))}))}},{key:"create",value:function(t){var e=this,n=y.matchToDTO(t);return new Promise((function(t,a){e.restClient.POST(e.getUrl(),n).then((function(e){var n=y.matchToDO(e);t({result:v.RequestResult.SUCCESS,payload:n})}),(function(t){a(0===t.status?{result:v.RequestResult.CONNECTION_PROBLEM}:{result:v.RequestResult.FAILURE})}))}))}},{key:"update",value:function(t){var e=this,n=y.matchToDTO(t);return new Promise((function(t,a){e.restClient.PUT(e.getUrl(),n).then((function(e){var n=y.matchToDO(e);t({result:v.RequestResult.SUCCESS,payload:n})}),(function(t){a(0===t.status?{result:v.RequestResult.CONNECTION_PROBLEM}:{result:v.RequestResult.FAILURE})}))}))}},{key:"findAllWettkampfMatchesAndNamesById",value:function(t){var e=this;return this.onOfflineService.isOffline()?(console.log("Choosing offline way for findallmatches by wettkampfid "+t),new Promise((function(e,n){T.a.matchTabelle.where("wettkampfId").equals(t).toArray().then((function(t){e({result:v.RequestResult.SUCCESS,payload:M(t,[])})}),(function(){n({result:v.RequestResult.FAILURE})}))}))):new Promise((function(n,a){e.restClient.GET((new v.UriBuilder).fromPath(e.getUrl()).path("findByWettkampfId/wettkampfid="+t).build()).then((function(t){var e,a;n({result:v.RequestResult.SUCCESS,payload:(e=t,a=[],e.forEach((function(t){return a.push(function(t){return U.copyFrom(t)}(t))})),a)})}),(function(t){a(0===t.status?{result:v.RequestResult.CONNECTION_PROBLEM}:{result:v.RequestResult.FAILURE})}))}))}},{key:"next",value:function(t){var e=this;return new Promise((function(n,a){e.restClient.GET((new v.UriBuilder).fromPath(e.getUrl()).path(t).path("next").build()).then((function(t){n({result:v.RequestResult.SUCCESS,payload:t})}),(function(t){a(0===t.status?{result:v.RequestResult.CONNECTION_PROBLEM}:{result:v.RequestResult.FAILURE})}))}))}},{key:"pair",value:function(t){var e=this;return this.onOfflineService.isOffline()?new Promise((function(e,n){T.a.matchTabelle.get(t).then((function(t){e({result:v.RequestResult.SUCCESS,payload:[Math.min(t.matchId,t.matchIdGegner),Math.max(t.matchId,t.matchIdGegner)]})}),(function(){n({result:v.RequestResult.FAILURE})}))})):new Promise((function(n,a){e.restClient.GET((new v.UriBuilder).fromPath(e.getUrl()).path(t).path("pair").build()).then((function(t){n({result:v.RequestResult.SUCCESS,payload:t})}),(function(t){a(0===t.status?{result:v.RequestResult.CONNECTION_PROBLEM}:{result:v.RequestResult.FAILURE})}))}))}},{key:"pairToFollow",value:function(t){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,a,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.onOfflineService.isOffline()){e.next=7;break}return e.next=3,this.pair(t).then((function(t){return n=t.payload})).catch((function(t){return console.error(t)}));case 3:return a=0,e.next=6,T.a.matchTabelle.get(n[1]).then((function(e){a=e.naechsteMatchId<=t?e.naechsteNaechsteMatchNrMatchId:e.naechsteMatchId}));case 6:return e.abrupt("return",this.pair(a));case 7:return e.abrupt("return",new Promise((function(e,n){i.restClient.GET((new v.UriBuilder).fromPath(i.getUrl()).path(t).path("pairToFollow").build()).then((function(t){e({result:v.RequestResult.SUCCESS,payload:t})}),(function(t){n(0===t.status?{result:v.RequestResult.CONNECTION_PROBLEM}:{result:v.RequestResult.FAILURE})}))})));case 8:case"end":return e.stop()}}),e,this)})))}},{key:"previousPair",value:function(t){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,a,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.onOfflineService.isOffline()){e.next=13;break}return n=[],e.next=4,this.pair(t).then((function(t){return n=t.payload})).catch((function(t){return console.error(t)}));case 4:return a=null,e.next=7,T.a.matchTabelle.where("naechsteMatchId").equals(n[0]).first().then((function(t){return a=t.matchId})).catch((function(t){return console.error(t)}));case 7:if(e.t0=null===a,!e.t0){e.next=11;break}return e.next=11,T.a.matchTabelle.where("naechsteNaechsteMatchNrMatchId").equals(n[0]).last().then((function(t){return a=t.matchId})).catch((function(t){return console.error(t)}));case 11:return a||(a=t),e.abrupt("return",this.pair(a));case 13:return e.abrupt("return",new Promise((function(e,n){i.restClient.GET((new v.UriBuilder).fromPath(i.getUrl()).path(t).path("previousPair").build()).then((function(t){e({result:v.RequestResult.SUCCESS,payload:t})}),(function(t){n(0===t.status?{result:v.RequestResult.CONNECTION_PROBLEM}:{result:v.RequestResult.FAILURE})}))})));case 14:case"end":return e.stop()}}),e,this)})))}}]),i}(v.DataProviderService)).\u0275fac=function(t){return new(t||A)(D.Ub(v.RestClient),D.Ub(O.i))},A.\u0275prov=D.Hb({token:A,factory:A.\u0275fac,providedIn:"root"}),A),L=i("9VTN"),Q=i("gQPg"),G=i("AytR"),_=i("hEMT"),x=i("TcZ0"),W=function t(){s(this,t)},K=function(){function t(){s(this,t)}return l(t,null,[{key:"copyFrom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new t;return n.veranstaltungId=e.veranstaltungId,n.veranstaltungName=e.veranstaltungName,n.wettkampfId=e.wettkampfId,n.wettkampfTag=e.wettkampfTag,n.mannschaftId=e.mannschaftId,n.mannschaftName=e.mannschaftName,n.matchpkt=e.matchpkt,n.matchpktGegen=e.matchpktGegen,n.satzpkt=e.satzpkt,n.satzpktGegen=e.satzpktGegen,n.satzpktDifferenz=e.satzpktDifferenz,n.sortierung=e.sortierung,n.tabellenplatz=e.tabellenplatz,n}}]),t}();var Z,B,V,j,q=i("KDU1"),Y=i("BcWp"),X=i("L93z"),$=i("z6cu"),J=i("dLXM"),tt=i("XcAF"),et=i("BGab"),nt=i("ykT2"),at=i("FlTZ"),it=i("QOHg"),rt=i("ny2l"),ct=((Z=function(e){t(i,e);var a=n(i);function i(t,e,n,r,c){var o;return s(this,i),(o=a.call(this)).restClient=t,o.mannschaftDataProvider=e,o.vereinDataProvider=n,o.veranstaltungDataProvider=r,o.dsbMitgliedDataProvider=c,o.serviceSubUrl="v1/sync",o}return l(i,[{key:"loadLigatabelleVeranstaltungOffline",value:function(t){var e=this;return new Promise((function(n,a){e.loadLigatabelleVeranstaltung(t).then((function(t){e.handleLoadLigatabelleVeranstaltungSuccess(t),n()})).catch((function(t){console.log("error loading offline ligatabelle"),a()}))}))}},{key:"loadMatchOffline",value:function(t){var e=this;return new Promise((function(n,a){e.loadMatch(t).then((function(t){e.handleLoadMatchTabelleSuccess(t.payload),n()})).catch((function(t){console.log("error loading offline match"),a()}))}))}},{key:"handleLoadMatchTabelleSuccess",value:function(t){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.passeTabelle.toArray().then((function(e){var a=n.getOfflineMatchPunkte(t,e);T.a.matchTabelle.bulkPut(a,a.map((function(t){return t.matchId}))).then((function(t){console.log("offline match added to offlinedb",t)})).catch((function(t){console.log("error adding offline match to offlinedb",t)}))}));case 2:case"end":return e.stop()}}),e)})))}},{key:"getOfflineMatchPunkte",value:function(t,e){var n=this,a=[];return t.forEach((function(i){if(!a.find((function(t){return t.matchId===i.matchId}))){var r=t.find((function(t){return t.matchId===i.matchIdGegner})),c=n.getOfflineMatchSatzSumme(i.matchId,e),s=n.getOfflineMatchSatzSumme(r.matchId,e);c[0]>0&&(i.satzpunkte=0),s[0]>0&&(r.satzpunkte=0);for(var o=0;o<5;o++)c[o]>s[o]?i.satzpunkte+=2:c[o]<s[o]?r.satzpunkte+=2:c[o]===s[o]&&0!==c[o]&&(i.satzpunkte+=1,r.satzpunkte+=1);i.satzpunkte>=6?(i.matchpkt=2,r.matchpkt=0):r.satzpunkte>=6?(r.matchpkt=2,i.matchpkt=0):i.satzpunkte===r.satzpunkte&&i.satzpunkte>=5?(i.matchpkt=1,r.matchpkt=1):i.satzpunkte>0&&r.satzpunkte>0&&(i.matchpkt=0,r.matchpkt=0),a.push(i,r)}})),a}},{key:"getOfflineMatchSatzSumme",value:function(t,e){var n=[0,0,0,0,0];return e.forEach((function(e){e.matchID===t&&(n[e.lfdNr-1]+=e.ringzahlPfeil1+e.ringzahlPfeil2)})),n}},{key:"loadPasseOffline",value:function(t){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,T.a.mannschaftsmitgliedTabelle.toArray().then((function(t){return n=t})).catch((function(t){return console.error(t)}));case 3:return e.abrupt("return",new Promise((function(e,i){a.loadPasse(t).then((function(t){var a=t.payload.map((function(t){return t.rueckennummer=n.find((function(e){return e.dsbMitgliedId===t.dsbMitgliedId})).rueckennummer,t}));T.a.passeTabelle.bulkPut(a,a.map((function(t){return t.id}))).then((function(t){console.log("offline passe added to offlinedb",t),e()})).catch((function(t){console.error("error adding offline passe to offlinedb",t),i()}))})).catch((function(t){console.error("error loading offline passe payload:",t.payload),i()}))})));case 4:case"end":return e.stop()}}),e)})))}},{key:"loadWettkampfOffline",value:function(t){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){n.loadWettkampf(t).then((function(t){console.log("offline wettkampf from mapper",t),T.a.wettkampfTabelle.add(t.payload,t.payload.id).then((function(t){console.log("offline wettkampf added to offlinedb",t),e()})).catch((function(t){console.error("error adding offline wettkampf to offlinedb",t),a()}))})).catch((function(t){console.error("error loading offline wettkampf payload:",t.payload),a()}))})));case 1:case"end":return e.stop()}}),e)})))}},{key:"loadMannschaftOffline",value:function(t){var e=this;return new Promise((function(n,a){e.loadMannschaft(t).then((function(t){T.a.mannschaftTabelle.bulkPut(t.payload,t.payload.map((function(t){return t.id}))).then((function(t){console.log("offline mannschaft added to offlinedb",t),n()})).catch((function(t){console.error("error adding offline mannschaft to offlinedb",t),a()}))})).catch((function(t){console.error("error loading offline mannschaft payload:",t.payload),a()}))}))}},{key:"loadMannschaftsmitgliedOffline",value:function(t){var e=this;return new Promise((function(n,a){e.loadMannschaftsmitglied(t).then((function(t){T.a.mannschaftsmitgliedTabelle.bulkPut(t.payload,t.payload.map((function(t){return t.id}))).then((function(t){console.log("offline mannschaftsmitglied added to offlinedb",t),n()})).catch((function(t){console.error("error adding offline mannschaftsmitglied to offlinedb",t),a()}))})).catch((function(t){console.error("error loading offline mannschaftsmitglied payload:",t.payload),a()}))}))}},{key:"loadDsbMitgliedOffline",value:function(){var t=this;return new Promise((function(e,n){t.loadDsbMitglieder().then((function(t){T.a.dsbMitgliedTabelle.bulkPut(t.payload,t.payload.map((function(t){return t.id}))).then((function(t){console.log("offline dsb mitglied added to offlinedb",t),e()})).catch((function(t){console.error("error adding offline dsb mitglied to offlinedb",t),n()}))})).catch((function(t){console.error("error loading offline dsb mitglied payload:",t.payload),n()}))}))}},{key:"loadVereineOffline",value:function(){var t=this;return new Promise((function(e,n){t.loadVereine().then((function(t){T.a.vereinTabelle.bulkPut(t.payload,t.payload.map((function(t){return t.id}))).then((function(t){console.log("offline vereine added to offlinedb",t),e()})).catch((function(t){console.error("error adding offline vereine to offlinedb",t),n()}))})).catch((function(t){console.error("error loading offline verein payload:",t.payload),n()}))}))}},{key:"loadManschaftenOffline",value:function(){var t=this;return new Promise((function(e,n){t.loadMannschaften().then((function(t){T.a.mannschaftTabelle.bulkPut(t.payload,t.payload.map((function(t){return t.id}))).then((function(t){console.log("offline mannschaften added to offlinedb",t),e()})).catch((function(t){console.error("error adding offline mannschaften to offlinedb",t),n()}))})).catch((function(t){console.error("error loading offline manschaften payload:",t.payload),n()}))}))}},{key:"loadVeranstaltungOffline",value:function(t){var e=this;return new Promise((function(n,a){e.loadVeranstaltung(t).then((function(t){T.a.veranstaltungTabelle.bulkPut(t.payload,t.payload.map((function(t){return t.id}))).then((function(t){console.log("offline veranstaltung added to offlinedb",t),n()})).catch((function(t){console.error("error adding offline veranstaltung to offlinedb",t),a()}))})).catch((function(t){console.error("error loading offline veranstaltung payload:",t.payload),a()}))}))}},{key:"loadMatch",value:function(t){var e=this,n=(new v.UriBuilder).fromPath(this.getUrl()).path("match/"+t).build();return new Promise((function(t,a){e.restClient.GET(n).then((function(e){var n,a;t({result:v.RequestResult.SUCCESS,payload:(n=e,a=[],n.forEach((function(t){return a.push(function(t){return{offlineVersion:1,matchId:(e=w.copyFrom(t)).id,matchVersion:e.version,mannschaftId:e.mannschaftId,mannschaftName:e.mannschaftName,matchIdGegner:e.matchIdGegner,matchNr:e.matchNr,matchScheibennummer:e.matchScheibennummer,matchpkt:e.matchpkt,satzpunkte:e.satzpunkte,naechsteMatchId:e.naechsteMatchId,naechsteNaechsteMatchNrMatchId:e.naechsteNaechsteMatchNrMatchId,nameGegner:e.nameGegner,scheibennummerGegner:e.scheibennummerGegner,strafpunkteSatz1:e.strafpunkteSatz1,strafpunkteSatz2:e.strafpunkteSatz2,strafpunkteSatz3:e.strafpunkteSatz3,strafpunkteSatz4:e.strafpunkteSatz4,strafpunkteSatz5:e.strafpunkteSatz5,wettkampfId:e.wettkampfId};var e}(t))})),a)})}),(function(t){return e.handleErrorResponse(t,a)}))}))}},{key:"loadVereine",value:function(){var t=this;return new Promise((function(e,n){t.vereinDataProvider.findAll().then((function(t){e({result:v.RequestResult.SUCCESS,payload:Object(it.a)(t.payload)})})).catch((function(t){return console.error(t)}))}))}},{key:"loadMannschaften",value:function(){var t=this;return new Promise((function(e,n){t.mannschaftDataProvider.findAll().then((function(t){e({result:v.RequestResult.SUCCESS,payload:Object(Y.d)(t.payload)})})).catch((function(t){return console.error(t)}))}))}},{key:"loadPasse",value:function(t){var e=this,n=(new v.UriBuilder).fromPath(this.getUrl()).path("passe/"+t).build();return new Promise((function(t,a){e.restClient.GET(n).then((function(e){t({result:v.RequestResult.SUCCESS,payload:Object(q.a)(e)})}),(function(t){return a({result:v.RequestResult.FAILURE,payload:"Fehler beim Laden der P\xe4sse"})}))}))}},{key:"loadWettkampf",value:function(t){var e=this,n=(new v.UriBuilder).fromPath(this.getUrl()).path("wettkampf/"+t).build();return new Promise((function(t,a){e.restClient.GET(n).then((function(e){t({result:v.RequestResult.SUCCESS,payload:Object(tt.a)(e[0])})}),(function(t){return e.handleErrorResponse(t,a)}))}))}},{key:"loadMannschaft",value:function(t){var e=this;return new Promise((function(n,a){e.restClient.GET((new v.UriBuilder).fromPath(e.getUrl()).path("mannschaft="+t).build()).then((function(t){n({result:v.RequestResult.SUCCESS,payload:Object(Y.a)(t)})}),(function(t){return e.handleErrorResponse(t,a)}))}))}},{key:"loadMannschaftsmitglied",value:function(t){var e=this;return new Promise((function(n,a){e.restClient.GET((new v.UriBuilder).fromPath(e.getUrl()).path("mannschaftsmitglieder/"+t).build()).then((function(t){n({result:v.RequestResult.SUCCESS,payload:Object(X.b)(t)})}),(function(t){return e.handleErrorResponse(t,a)}))}))}},{key:"loadDsbMitglieder",value:function(){var t=this;return new Promise((function(e,n){t.dsbMitgliedDataProvider.findAll().then((function(t){e({result:v.RequestResult.SUCCESS,payload:Object(nt.a)(t.payload)})})).catch((function(t){return console.error(t)}))}))}},{key:"loadVeranstaltung",value:function(t){var e=this;return new Promise((function(n,a){e.veranstaltungDataProvider.findById(t).then((function(t){n({result:v.RequestResult.SUCCESS,payload:[Object(J.c)(t.payload)]})})).catch((function(t){return console.error(t)}))}))}},{key:"loadLigatabelleVeranstaltung",value:function(t){var e=this;return new Promise((function(n,a){e.restClient.GET((new v.UriBuilder).fromPath(e.getUrl()).path("veranstaltung="+t).build()).then((function(t){var e,a;n({result:v.RequestResult.SUCCESS,payload:(e=t,a=[],e.forEach((function(t){return a.push(function(t){return{veranstaltungId:(e=K.copyFrom(t)).veranstaltungId,veranstaltungName:e.veranstaltungName,wettkampfId:e.wettkampfId,wettkampfTag:e.wettkampfTag,mannschaftId:e.mannschaftId,mannschaftName:e.mannschaftName,matchpkt:e.matchpkt,matchpktGegen:e.matchpktGegen,satzpkt:e.satzpkt,satzpktGegen:e.satzpktGegen,satzpktDifferenz:e.satzpktDifferenz,sortierung:e.sortierung,tabellenplatz:e.tabellenplatz};var e}(t))})),a)})}),(function(t){return e.handleErrorResponse(t,a)}))}))}},{key:"handleLoadLigatabelleVeranstaltungSuccess",value:function(t){T.a.ligaTabelle.clear(),T.a.ligaTabelle.bulkAdd(t.payload).then((function(t){return console.log("Finished adding numbers til "+t)})).catch((function(t){return Object($.a)(t)}))}},{key:"handleLoadLigatabelleVeranstaltungFailure",value:function(t){console.log("Failure")}},{key:"handleErrorResponse",value:function(t,e){e(0===t.status?{result:v.RequestResult.CONNECTION_PROBLEM}:{result:v.RequestResult.FAILURE})}},{key:"createWettkampfDummyData",value:function(){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(e=[],n=0;n<4;n++)e.push({id:30+n,datum:"2017-12-30",ausrichter:"2",beginn:"12:5"+n,offlinetoken:"dsfgsgffddfdfhfghfhfhfgdsaljfgkjdyfgfdkljbdfjhdfsklbhndsklghdfslgjhdyfkl\xf6hdfkljghdfsjghljkglhkjdsflhkdfshjkghjkldgkhjldgkhjldkjhlg",disziplinId:0,plz:"72108",version:5,ortsinfo:null,tag:""+(n+1),ortsname:"Ofterdingen",strasse:"Brunnenstra\xdfe",wettkampftypId:1,veranstaltungId:0});T.a.wettkampfTabelle.clear(),T.a.wettkampfTabelle.bulkPut(e,e.map((function(t){return t.id})));case 3:case"end":return t.stop()}}),t)})))}},{key:"goOnlineSync",value:function(t){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(console.clear(),new Promise((function(e,a){return Object(f.a)(n,void 0,void 0,regeneratorRuntime.mark((function n(){var i,c,s,o,l,u,h,f,b,d,m,p,g;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,T.a.wettkampfTabelle.get(t).then((function(t){return t.offlinetoken}));case 3:return i=n.sent,c=[],n.next=7,T.a.matchTabelle.where("offlineVersion").above(1).toArray();case 7:return c=n.sent,n.next=10,T.a.mannschaftsmitgliedTabelle.where("offlineVersion").above(1).toArray();case 10:s=n.sent,o=[],l=r(c),n.prev=13,l.s();case 15:if((u=l.n()).done){n.next=27;break}return h=u.value,f=[],n.next=20,T.a.passeTabelle.where("matchID").equals(h.matchId).toArray();case 20:f=n.sent,b=Object(q.d)(f),d=r(b);try{for(d.s();!(m=d.n()).done;)m.value.matchNr=h.matchNr}catch(S){d.e(S)}finally{d.f()}o.push(H(h,b));case 25:n.next=15;break;case 27:n.next=32;break;case 29:n.prev=29,n.t0=n.catch(13),l.e(n.t0);case 32:return n.prev=32,l.f(),n.finish(32);case 35:return g=Object(X.e)(s),p={wettkampfId:t,offlineToken:i,matchesDTO:o,mannschaftsmitgliederDTO:g},console.log("Sync Payload: ",p),n.next=41,this.restClient.POST((new v.UriBuilder).fromPath(this.getUrl()).path("wettkampf/".concat(t,"/sync")).build(),p);case 41:n.next=46;break;case 43:n.prev=43,n.t1=n.catch(0),console.error(n.t1),a(n.t1);case 46:e();case 47:case"end":return n.stop()}}),n,this,[[0,43],[13,29,32,35]])})))}))));case 1:case"end":return e.stop()}}),e)})))}},{key:"resetWettkampfToken",value:function(t){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){return Object(f.a)(n,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.restClient.GET((new v.UriBuilder).fromPath(this.getUrl()).path("wettkampf/".concat(t,"/reset")).build());case 3:console.log("Wettkampf Token reseted"),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.error(n.t0),a(n.t0);case 9:e();case 10:case"end":return n.stop()}}),n,this,[[0,6]])})))})));case 1:case"end":return e.stop()}}),e)})))}}]),i}(v.DataProviderService)).\u0275fac=function(t){return new(t||Z)(D.Ub(v.RestClient),D.Ub(rt.a),D.Ub(at.a),D.Ub(E.a),D.Ub(et.a))},Z.\u0275prov=D.Hb({token:Z,factory:Z.\u0275fac,providedIn:"root"}),Z),st=i("sNGV"),ot=i("0IaG"),lt=i("KKVP"),ut=i("cWIM"),ht=((B=function(){function t(e){s(this,t),this.dialogRef=e,this.ActionButtonColors=st.a}return l(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||B)(D.Lb(ot.d))},B.\u0275cmp=D.Fb({type:B,selectors:[["bla-dsb-mitglied-detail-pop-up"]],decls:4,vars:4,consts:[[1,"mat-dialog-content"],[3,"isPopUp","dialogRef"],[3,"color","iconClass","onClick"]],template:function(t,e){1&t&&(D.Qb(0,"div",0),D.Mb(1,"bla-dsb-mitglied-detail",1),D.Qb(2,"bla-actionbutton",2),D.Xb("onClick",(function(){return e.dialogRef.close()})),D.Cc(3,"Zur\xfcck"),D.Pb(),D.Pb()),2&t&&(D.zb(1),D.fc("isPopUp",!0)("dialogRef",e.dialogRef),D.zb(1),D.fc("color",e.ActionButtonColors.SECONDARY)("iconClass","arrow-left"))},directives:[lt.a,ut.a],styles:["*[_ngcontent-%COMP%]{color:#000}"]}),B),ft=i("a7Kz"),bt=i("20cS"),dt=i("w90F"),mt=i("ghtv"),pt=i("hIfO"),gt=i("zLSN"),vt=i("xOPY"),St={columns:[{translationKey:"MANAGEMENT.VEREIN_DETAIL.TABLE.HEADERS.MANNSCHAFTSNAME",propertyName:"name",width:20}],actions:{actionTypes:[d.a.ADD],width:6},deletePermission:[O.j.CAN_DELETE_STAMMDATEN],editPermission:[O.j.CAN_MODIFY_MY_VEREIN]},Et=i("Fado"),Ct=((j=function(){function t(e,n){s(this,t),this.dialogRef=e,this.data=n}return l(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||j)(D.Lb(ot.d),D.Lb(ot.a))},j.\u0275cmp=D.Fb({type:j,selectors:[["bla-schuetzen-pop-up"]],decls:1,vars:3,consts:[[3,"isPopUp","dialogRef","selectedMannschaftId"]],template:function(t,e){1&t&&D.Mb(0,"bla-schuetzen",0),2&t&&D.fc("isPopUp",!0)("dialogRef",e.dialogRef)("selectedMannschaftId",e.data.selectedMannschaftId)},directives:[Et.a],styles:[""]}),j),kt=((V=function(){function t(e,n,a){s(this,t),this.mannschaftsdataprovider=e,this.veranstaltungsProvider=n,this.dialog=a,this.config_table=St,this.loading=!1}return l(t,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(t){var e=this;this.veranstaltungsId||0===this.veranstaltungsId?(this.loading=!0,this.mannschaftsdataprovider.findAllByVeranstaltungsId(this.veranstaltungsId).then((function(t){t=e.addTableAttributes(t),e.rows=[],e.rows=Object(b.toTableRows)(t.payload),e.loading=!1})).catch((function(){console.log("Error Loading Mannschaften"),e.loading=!1}))):this.rows=[]}},{key:"addTableAttributes",value:function(t){var e;return t.payload.forEach((function(t){e=t.name.substring(0,t.name.length-1),t.name=e+" "+t.nummer+".Mannschaft"})),t}},{key:"onAdd",value:function(t){t.id>=0&&(this.selectedMannschaft=t.id.toString(),this.dialog.open(Ct,{data:{selectedMannschaftId:this.selectedMannschaft}}))}}]),t}()).\u0275fac=function(t){return new(t||V)(D.Lb(rt.a),D.Lb(E.a),D.Lb(ot.b))},V.\u0275cmp=D.Fb({type:V,selectors:[["bla-teilnemende-manschaften-tabelle"]],inputs:{veranstaltungsId:"veranstaltungsId"},features:[D.xb],decls:4,vars:3,consts:[[3,"config","rows","loading","onAddEntry"]],template:function(t,e){1&t&&(D.Qb(0,"h2"),D.Cc(1,"Teilnehmende Mannschaften"),D.Pb(),D.Qb(2,"div"),D.Qb(3,"bla-data-table",0),D.Xb("onAddEntry",(function(t){return e.onAdd(t)})),D.Pb(),D.Pb()),2&t&&(D.zb(3),D.fc("config",e.config_table)("rows",e.rows)("loading",e.loading))},directives:[vt.a],styles:[""]}),V),Tt=i("WBa3"),Pt=i("sYmb");function Ut(t,e){if(1&t){var n=D.Rb();D.Qb(0,"div",26),D.Qb(1,"bla-actionbutton",27),D.Xb("click",(function(){return D.pc(n),D.Zb().onButtonTabletClick()})),D.Cc(2),D.ac(3,"translate"),D.Pb(),D.Pb()}if(2&t){var a=D.Zb();D.zb(1),D.fc("color",a.ActionButtonColors.PRIMARY)("iconClass","table")("disabled",a.isDisabled()),D.zb(1),D.Ec("",D.bc(3,4,"WKDURCHFUEHRUNG.BUTTON.TABLE_SETUP")," ")}}function Nt(t,e){if(1&t){var n=D.Rb();D.Qb(0,"div"),D.Qb(1,"bla-actionbutton",27),D.Xb("click",(function(){return D.pc(n),D.Zb().onButtonTabletClick()})),D.Cc(2),D.ac(3,"translate"),D.Pb(),D.Pb()}if(2&t){var a=D.Zb();D.zb(1),D.fc("color",a.ActionButtonColors.PRIMARY)("iconClass","table")("disabled",!0),D.zb(1),D.Ec("",D.bc(3,4,"WKDURCHFUEHRUNG.BUTTON.TABLE_SETUP")," ")}}function Rt(t,e){if(1&t){var n=D.Rb();D.Qb(0,"div",28),D.Qb(1,"bla-actionbutton",29),D.Xb("click",(function(){return D.pc(n),D.Zb().onButtonGoOfflineClick()})),D.Cc(2),D.ac(3,"translate"),D.Pb(),D.Pb()}if(2&t){var a=D.Zb();D.zb(1),D.fc("color",a.ActionButtonColors.DANGER)("iconClass","power-off")("disabled",a.isDisabled()),D.zb(1),D.Ec("",D.bc(3,4,"WKDURCHFUEHRUNG.BUTTON.OFFLINE_GEHEN")," ")}}function It(t,e){if(1&t){var n=D.Rb();D.Qb(0,"div"),D.Qb(1,"bla-actionbutton",27),D.Xb("click",(function(){return D.pc(n),D.Zb().onButtonGoOfflineClick()})),D.Cc(2),D.ac(3,"translate"),D.Pb(),D.Pb()}if(2&t){var a=D.Zb();D.zb(1),D.fc("color",a.ActionButtonColors.SUCCESS)("iconClass","cloud")("disabled",a.isDisabled()),D.zb(1),D.Ec("",D.bc(3,4,"WKDURCHFUEHRUNG.BUTTON.ONLINE_GEHEN")," ")}}function zt(t,e){if(1&t){var n=D.Rb();D.Qb(0,"div",30),D.Qb(1,"bla-actionbutton",27),D.Xb("click",(function(){D.pc(n);var t=D.Zb();return t.resetWettkampfToken(t.selectedWettkampfId)})),D.Cc(2),D.ac(3,"translate"),D.Pb(),D.Pb()}if(2&t){var a=D.Zb();D.zb(1),D.fc("color",a.ActionButtonColors.DANGER)("iconClass","trash")("disabled",a.isDisabled()),D.zb(1),D.Ec("",D.bc(3,4,"WKDURCHFUEHRUNG.BUTTON.OFFLINE_TOKEN")," ")}}var yt,Ot,wt,Mt,Ht,At,Dt,Ft,Lt=((Ot=function(e){t(i,e);var a=n(i);function i(t,e,n,r,c,o,l,u,h,f,b,d,v,S){var E;return s(this,i),(E=a.call(this)).router=t,E.route=e,E.notificationService=n,E.veranstaltungsDataProvider=r,E.einstellungenDataProvider=c,E.wettkampfDataProvider=o,E.matchDataProvider=l,E.passeDataProviderService=u,E.matchProvider=h,E.onOfflineService=f,E.currentUserService=b,E.wettkampfOfflineSyncService=d,E.dialog=v,E.dsbMannschaftDataProviderService=S,E.ActionButtonColors=st.a,E.config=m,E.config_table=p,E.config_table_match=g,E.PLACEHOLDER_VAR="Veranstaltung ausw\xe4hlen...",E.pdf=new Blob,E.multipleSelections=!0,E.loadingVeranstaltungen=!0,E.loadingWettkampfe=!1,E.loadingMatch=!1,E.tableContent=[],E.tableContentMatch=[],E.disabledButton=!0,E.disabledOtherButtons=!0,E.wettkaempfe=[new L.a],E.matches=[],E.loadingYears=!0,E.sessionHandling=new bt.a(E.currentUserService,E.onOfflineService),E}return l(i,[{key:"ngOnInit",value:function(){var t=this;this.route.params.subscribe((function(e){Object(P.c)(e.wettkampfId)?t.onOfflineService.isOffline()?(t.loadingWettkampfe=!0,t.wettkampfIdEnthalten=!0,t.wettkampfId=t.onOfflineService.getOfflineWettkampfID(),console.log("WettkampfID used for loading offlinepage Wkdurchfuehrung:",t.wettkampfId),t.findAvailableYears(),t.visible=!1):(t.wettkampfIdEnthalten=!1,t.findAvailableYears(),t.visible=!1):(t.wettkampfIdEnthalten=!0,t.wettkampfId=parseInt(e.wettkampfId,10),console.log("WettkampfID:",t.wettkampfId),t.findAvailableYears(),t.visible=!1)}))}},{key:"onMouseOver",value:function(t){this.sessionHandling.checkSessionExpired()&&window.location.reload()}},{key:"isOffline",value:function(){return this.onOfflineService.isOffline()}},{key:"isAdmin",value:function(){return this.currentUserService.hasPermission(O.j.CAN_MODIFY_STAMMDATEN)}},{key:"resetWettkampfToken",value:function(t){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.wettkampfOfflineSyncService.resetWettkampfToken(t);case 3:this.notificationService.showNotification({id:"Offlinetoken gel\xf6scht",description:"Der Offlinetoken wurde erfolgreich gel\xf6scht und somit der Wettkampf entsperrt.",title:"Offlinetoken gel\xf6scht",origin:Q.b.SYSTEM,userAction:Q.f.ACCEPTED,type:Q.e.OK,severity:Q.d.INFO}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.notificationService.showNotification({id:"Offlinetoken gel\xf6scht Fehler",description:"Ein fehler ist aufgetreten und der Offlinetoken wurde nicht gel\xf6scht.",title:"Fehler beim L\xf6schen des Offlinetokens",origin:Q.b.SYSTEM,userAction:Q.f.ACCEPTED,type:Q.e.OK,severity:Q.d.INFO});case 9:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"onButtonGoOfflineClick",value:function(){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.onOfflineService.isOffline()){t.next=14;break}return t.prev=1,t.next=4,this.wettkampfOfflineSyncService.goOnlineSync(this.onOfflineService.getOfflineWettkampfID());case 4:this.onOfflineService.goOnline(),this.disabledOtherButtons=!0,this.notificationService.showNotification({id:"GO_ONLINE_ERROR",description:"WKDURCHFUEHRUNG.ONLINE.NOTIFICATION.SUCCESS.DESCRIPTION",title:"WKDURCHFUEHRUNG.ONLINE.NOTIFICATION.SUCCESS.TITLE",origin:Q.b.SYSTEM,userAction:Q.f.ACCEPTED,type:Q.e.OK,severity:Q.d.INFO}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0),this.notificationService.discardNotification(),this.notificationService.showNotification({id:"GO_ONLINE_ERROR",description:"WKDURCHFUEHRUNG.ONLINE.NOTIFICATION.FAILURE.DESCRIPTION",title:"WKDURCHFUEHRUNG.ONLINE.NOTIFICATION.FAILURE.TITLE",origin:Q.b.SYSTEM,userAction:Q.f.ACCEPTED,type:Q.e.OK,severity:Q.d.ERROR});case 12:t.next=15;break;case 14:console.log("Going offline for Veranstaltung "+this.selectedVeranstaltungId),T.a.delete().then((function(){T.a.open().then((function(){return Object(f.a)(e,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Database opened"),t.prev=1,t.next=4,this.wettkampfOfflineSyncService.loadLigatabelleVeranstaltungOffline(this.selectedVeranstaltungId);case 4:return t.next=6,this.wettkampfOfflineSyncService.loadMannschaftsmitgliedOffline(this.selectedWettkampfId);case 6:return t.next=8,this.wettkampfOfflineSyncService.loadPasseOffline(this.selectedWettkampfId);case 8:return t.next=10,this.wettkampfOfflineSyncService.loadMatchOffline(this.selectedWettkampfId);case 10:return t.next=12,this.wettkampfOfflineSyncService.loadVeranstaltungOffline(this.selectedVeranstaltungId);case 12:return t.next=14,this.wettkampfOfflineSyncService.loadDsbMitgliedOffline();case 14:return t.next=16,this.wettkampfOfflineSyncService.loadVereineOffline();case 16:return t.next=18,this.wettkampfOfflineSyncService.loadManschaftenOffline();case 18:return t.next=20,this.wettkampfOfflineSyncService.loadWettkampfOffline(this.selectedWettkampfId);case 20:return this.onOfflineService.goOffline(this.selectedWettkampfId,this.selectedDTOs[0].sportjahr),this.loadingVeranstaltungen=!0,this.wettkampfIdEnthalten=!0,this.wettkampfId=this.onOfflineService.getOfflineWettkampfID(),t.next=26,this.LoadWettkampf();case 26:this.visible=!1,this.notificationService.showNotification({id:"OFFLINE_MODE_ON",description:"WKDURCHFUEHRUNG.OFFLINE.NOTIFICATION.SUCCESS.DESCRIPTION",title:"WKDURCHFUEHRUNG.OFFLINE.NOTIFICATION.SUCCESS.TITLE",origin:Q.b.SYSTEM,userAction:Q.f.ACCEPTED,type:Q.e.OK,severity:Q.d.INFO}),t.next=33;break;case 30:t.prev=30,t.t0=t.catch(1),console.error("Error while loading offline data"),this.notificationService.showNotification({id:"OFFLINE_MODE_OFF",description:"WKDURCHFUEHRUNG.OFFLINE.NOTIFICATION.FAILURE.DESCRIPTION",title:"WKDURCHFUEHRUNG.OFFLINE.NOTIFICATION.FAILURE.TITLE",origin:Q.b.SYSTEM,userAction:Q.f.PENDING,type:Q.e.OK,severity:Q.d.ERROR});case 33:case"end":return t.stop()}}),t,this,[[1,30]])})))}))}));case 15:case"end":return t.stop()}}),t,this,[[1,9]])})))}},{key:"LoadWettkampf",value:function(){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.loadingWettkampfe=!0,this.wettkampfDataProvider.findAll().then((function(t){return e.handleLoadWettkampfSuccess(t)})).catch((function(){return e.handleLoadWettkampfFailure()}));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"handleLoadWettkampfFailure",value:function(){console.log("ERROR: Keine Wettkaempfe gefunden"),this.wettkampfIdEnthalten=!1,this.loadingWettkampfe=!1,this.loadVeranstaltungen()}},{key:"handleLoadWettkampfSuccess",value:function(t){var e=this;this.wettkaempfe=[],this.wettkaempfe=t.payload,this.wettkaempfe.forEach((function(t){return e.findWettkampf(t)}))}},{key:"findWettkampf",value:function(t){this.wettkampfId===t.id&&(this.wettkampf=t,this.loadVeranstaltungen())}},{key:"onSelectYear",value:function(t){var e=this;this.veranstaltungsDataProvider.findBySportyearLaufend(t.sportjahr).then((function(t){e.veranstaltungen=t.payload,e.loadingVeranstaltungen=!1})).catch((function(){e.loadVeranstaltungenYearsFailure()}))}},{key:"loadVeranstaltungen",value:function(){var t=this;this.veranstaltungen=[],this.selectedWettkampf="",this.selectedWettkampfId=null,this.veranstaltungsDataProvider.findAll().then((function(e){t.loadVeranstaltungenSuccess(e)})).catch((function(e){t.loadVeranstaltungenFailure(e)}))}},{key:"loadVeranstaltungenSuccess",value:function(t){var e=this;this.veranstaltungen=t.payload,this.loadingVeranstaltungen=!1,this.wettkampfIdEnthalten&&this.veranstaltungen.forEach((function(t){return e.findVeranstaltung(t)}))}},{key:"loadVeranstaltungenFailure",value:function(t){this.veranstaltungen=t.payload}},{key:"findVeranstaltung",value:function(t){if(this.wettkampf.wettkampfVeranstaltungsId===t.id){var e,n;this.veranstaltung=t,this.currentVeranstaltungName=this.veranstaltung.name+" "+this.veranstaltung.sportjahr;var a,i=r(this.availableYears);try{for(i.s();!(a=i.n()).done;){var c=a.value;c.sportjahr===this.veranstaltung.sportjahr&&(this.selItemId=c.id,e=c)}}catch(s){i.e(s)}finally{i.f()}n=[this.veranstaltung],this.onSelectYear(e),this.onSelect(n),this.onView(this.wettkampf)}}},{key:"loadVeranstaltungenByYear",value:function(t){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.veranstaltungen=[],this.selectedWettkampf="",this.selectedWettkampfId=null,this.veranstaltungsDataProvider.findBySportyearLaufend(t).then((function(t){n.loadVeranstaltungenSuccess(t)})).catch((function(t){n.loadVeranstaltungenFailure(t)}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"onSelect",value:function(t){var e=this;this.disabledButton=!0,this.selectedDTOs=[],this.selectedDTOs=t,this.selectedDTOs&&this.selectedDTOs.length>0&&(this.selectedVeranstaltungId=this.selectedDTOs[0].id),this.veranstaltungsDataProvider.findById(this.selectedVeranstaltungId).then((function(t){e.currentVeranstaltungName=t.payload.name+" "+t.payload.sportjahr})).catch((function(t){console.log("error in onSelect wkdurchfuehrung"),console.log(t),e.currentVeranstaltungName=""})),this.rows=[],this.tableContent=[],null!=this.selectedVeranstaltungId&&this.loadTableRows()}},{key:"onView",value:function(t){if(t.id>=0){this.selectedWettkampfId=t.id,this.selectedWettkampf=t.id.toString(),this.selectedWettkampfListeIndex=0;for(var e=0;e<this.wettkampfListe.length;e++)this.wettkampfListe[e].id===this.selectedWettkampfId&&(this.selectedWettkampfListeIndex=e);var n=t;document.getElementById("WettkampfTitle").innerText=this.currentVeranstaltungName+" - "+n.wettkampfTag+". Wettkampftag",this.visible=!0,this.tableContentMatch=[],this.showMatches()}}},{key:"checkMannschaften",value:function(){var t=this;this.dsbMannschaftDataProviderService.findAllByVeranstaltungsId(this.selectedVeranstaltungId).then((function(e){t.disabledButton=!(e.payload.length>0)}))}},{key:"showMatches",value:function(){var t=this;this.disabledButton=!0,this.matchProvider.findAllWettkampfMatchesAndNamesById(this.selectedWettkampfId).then((function(e){0!==e.payload.length?t.checkMannschaften():(t.checkMannschaften(),0===t.selectedWettkampfListeIndex?t.disabledButton=!1:t.matchProvider.findAllWettkampfMatchesAndNamesById(t.wettkampfListe[t.selectedWettkampfListeIndex-1].id).then((function(e){t.disabledButton=0===e.payload.length})).catch((function(t){console.error("Error at findAllWettkampfMatchesAndNamesByID: "+t)}))),t.handleFindMatchSuccess(e)})).catch((function(){return t.handleFindMatchFailure()}))}},{key:"onMap",value:function(t){var e=t;Object(_.a)(e)}},{key:"onButtonTabletClick",value:function(){this.router.navigateByUrl("/wkdurchfuehrung/tabletadmin/"+this.selectedWettkampf)}},{key:"onButtonDownload",value:function(t){return(new v.UriBuilder).fromPath(G.a.backendBaseUrl).path("v1/download").path(t).path("?wettkampfid="+this.selectedWettkampf).build()}},{key:"isDisabled",value:function(){return!this.selectedWettkampfId}},{key:"isOfflineDisabled",value:function(){return this.onOfflineService.isOffline()}},{key:"isDisabledGMButton",value:function(){return!this.selectedWettkampfId||this.disabledButton}},{key:"generateMatches",value:function(){var t=this;this.disabledButton=!0,this.matchDataProvider.generateDataForMatches(this.selectedWettkampfId).then((function(){t.showMatches(),t.disabledButton=!1})).catch((function(e){t.disabledButton=!1,t.handleFailureGenerateMatchesMissingMitglied(),t.showMatches()}))}},{key:"handleFailureGenerateMatchesMissingMitglied",value:function(){this.notificationService.showNotification({id:"NOTIFICATION_GENERIERE_MATCHES_MITGLIED_FEHLT",title:"WKDURCHFUEHRUNG.GENERIERE_MATCHES_MITGLIED_FEHLT.NOTIFICATION.TITLE",description:"WKDURCHFUEHRUNG.GENERIERE_MATCHES_MITGLIED_FEHLT.NOTIFICATION.DESCRIPTION",severity:Q.d.INFO,origin:Q.b.USER,type:Q.e.OK,userAction:Q.f.ACCEPTED})}},{key:"handleFailureGenerateMatches",value:function(){this.notificationService.showNotification({id:"NOTIFICATION_GENERIERE_MATCHES",title:"WKDURCHFUEHRUNG.GENERIERE_MATCHES.NOTIFICATION.TITLE",description:"WKDURCHFUEHRUNG.GENERIERE_MATCHES.NOTIFICATION.DESCRIPTION",severity:Q.d.INFO,origin:Q.b.USER,type:Q.e.OK,userAction:Q.f.ACCEPTED})}},{key:"onEdit",value:function(t){var e=this;t.id>=0&&(this.selectedMatchId=t.id,this.matchProvider.pair(this.selectedMatchId).then((function(t){2===t.payload.length&&e.router.navigate(["/wkdurchfuehrung/schusszettel/"+t.payload[0]+"/"+t.payload[1]])})))}},{key:"loadTableRows",value:function(){var t=this;this.loadingWettkampfe=!0,this.selectedWettkampf="",this.selectedWettkampfId=null,this.wettkampfDataProvider.findAllByVeranstaltungId(this.selectedVeranstaltungId).then((function(e){t.wettkampfListe=e.payload,t.handleFindWettkampfSuccess(e)})).catch((function(){return t.handleFindWettkampfFailure()}))}},{key:"handleFindWettkampfFailure",value:function(){this.rows=[],this.loadingWettkampfe=!1}},{key:"handleFindWettkampfSuccess",value:function(t){this.rows=[],this.remainingWettkampfRequests=t.payload.length,t.payload.length<=0&&(this.loadingWettkampfe=!1);var e,n=r(t.payload);try{for(n.s();!(e=n.n()).done;){var a=e.value,i=new L.a;i.wettkampfStrasse=a.wettkampfStrasse,i.wettkampfPlz=a.wettkampfPlz,i.wettkampfOrtsname=a.wettkampfOrtsname,i.wettkampfOrtsinfo=a.wettkampfOrtsinfo,i.wettkampfBeginn=a.wettkampfBeginn,i.wettkampfTag=a.wettkampfTag,i.wettkampfDatum=a.wettkampfDatum,i.id=a.id,i.wettkampfVeranstaltungsId=a.wettkampfVeranstaltungsId,i.version=a.version,this.tableContent.push(i)}}catch(c){n.e(c)}finally{n.f()}this.rows=Object(b.toTableRows)(this.tableContent),this.loadingWettkampfe=!1}},{key:"handleFindMatchFailure",value:function(){this.matchRows=[],this.loadingMatch=!1}},{key:"handleFindMatchSuccess",value:function(t){this.matchRows=[],this.remainingMatchRequests=t.payload.length,t.payload.length<=0&&(this.loadingMatch=!1);var e,n=r(t.payload);try{for(n.s();!(e=n.n()).done;){var a=e.value,i=new N;i.id=a.id,i.nr=a.nr,i.begegnung=a.begegnung,i.scheibenNummer=a.scheibenNummer,i.mannschaftName=a.mannschaftName,i.matchpunkte=a.matchpunkte,i.satzpunkte=a.satzpunkte,i.version=a.version,this.tableContentMatch.push(i)}}catch(c){n.e(c)}finally{n.f()}this.matchRows=Object(b.toTableRows)(this.tableContentMatch),this.loadingMatch=!1}},{key:"findAvailableYears",value:function(){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.availableYears=[],t.t0=this.onOfflineService.isOffline(),t.t0){t.next=6;break}return t.next=5,Object(ft.a)(this.einstellungenDataProvider);case 5:this.aktivesSportjahr=t.sent;case 6:this.veranstaltungsDataProvider.findAllSportyearDestinct().then((function(t){e.loadVeranstaltungenYearsSuccess(t)})).catch((function(){e.loadVeranstaltungenYearsFailure()}));case 7:case"end":return t.stop()}}),t,this)})))}},{key:"loadVeranstaltungenYearsSuccess",value:function(t){this.loadingYears=!1;var e=1,n=0;if(t.payload!==[]){var a,i=r(t.payload);try{for(i.s();!(a=i.n()).done;){var c=a.value,s=new W;s.sportjahr=c.sportjahr.valueOf(),s.version=1,this.availableYears.push(s)}}catch(h){i.e(h)}finally{i.f()}this.availableYears.sort((function(t,e){return t.sportjahr.valueOf()<e.sportjahr.valueOf()?1:t.sportjahr.valueOf()>e.sportjahr.valueOf()?-1:void 0}));var o,l=r(this.availableYears);try{for(l.s();!(o=l.n()).done;){var u=o.value;u.id=e,u.sportjahr===this.aktivesSportjahr&&(n=e-1),e++}}catch(h){l.e(h)}finally{l.f()}this.wettkampfIdEnthalten?this.onOfflineService.isOffline()&&(this.selItemId=this.availableYears[n].id,this.LoadWettkampf()):(this.selItemId=this.availableYears[n].id,this.loadVeranstaltungenByYear(this.availableYears[n].sportjahr.valueOf()))}}},{key:"loadVeranstaltungenYearsFailure",value:function(){this.loadingYears=!1}},{key:"addDSBMitglied",value:function(){this.dialog.open(ht)}}]),i}(b.CommonComponentDirective)).\u0275fac=function(t){return new(t||Ot)(D.Lb(u.d),D.Lb(u.a),D.Lb(Q.c),D.Lb(E.a),D.Lb(S.a),D.Lb(C.a),D.Lb(k.a),D.Lb(x.a),D.Lb(F),D.Lb(O.i),D.Lb(O.a),D.Lb(ct),D.Lb(ot.b),D.Lb(rt.a))},Ot.\u0275cmp=D.Fb({type:Ot,selectors:[["bla-wkdurchfuehrung"]],features:[D.wb],decls:74,vars:88,consts:[[3,"config"],[3,"mouseover"],["href","https://wiki.bsapp.de/doku.php?id=liga:wettkampfdurchfuehrung","target","_blank"],[1,"subtitle"],[1,"layout-elements"],[1,"flexChild"],["routerLink","/wkdurchfuehrung",1,"blackLink"],["id","example",1,"table","table-hover","table-sm","table-responsive-sm","thead-light","table-striped",2,"width","80%"],["selectionListHeight","15em","data-cy","wkduchfuehrung-veranstaltung-list",2,"width","40%","flex-grow","0",3,"items","loading","multipleSelections","placeholderTranslationKey","optionFieldSelector","disabled","onSelect"],[1,"row"],[1,"overview-dialog-content"],["data-cy","wkdurchfuehrung-wettkampftage-list",3,"config","rows","loading","onViewEntry","onMapEntry"],[3,"veranstaltungsId"],["id","WettkampfTitle"],[3,"id","disabled","color","iconClass","onClick"],[3,"id","downloadUrl","fileName","color","iconClass","disabled"],["id","setupTable",4,"ngIf","ngIfElse"],[3,"id","color","iconClass","onClick"],["id","onlineSetupTables"],["onlineSetupTables",""],["id","offlineButton",4,"ngIf","ngIfElse"],["id","onlineButton"],["backOnline",""],["id","adminOfflineResetButton",4,"ngIf"],[1,"row",2,"margin-left","5px"],["data-cy","wkdurchfuehrung-match-list",3,"config","rows","loading","onEditEntry"],["id","setupTable"],[3,"color","iconClass","disabled","click"],["id","offlineButton"],["data-cy","wkdurchfuehrung-btn-offlinegehen",3,"color","iconClass","disabled","click"],["id","adminOfflineResetButton"]],template:function(t,e){if(1&t&&(D.Qb(0,"bla-common-dialog",0),D.Qb(1,"div",1),D.Xb("mouseover",(function(t){return e.onMouseOver(t)})),D.Mb(2,"bla-hilfe-button",2),D.Qb(3,"p",3),D.Cc(4),D.ac(5,"translate"),D.Pb(),D.Qb(6,"div",4),D.Qb(7,"bla-col-layout"),D.Qb(8,"div",5),D.Qb(9,"h2"),D.Qb(10,"a",6),D.Cc(11),D.ac(12,"translate"),D.Pb(),D.Pb(),D.Qb(13,"table",7),D.Qb(14,"bla-quicksearch-list",8),D.Xb("onSelect",(function(t){return e.onSelect(t)})),D.Pb(),D.Pb(),D.Pb(),D.Qb(15,"div"),D.Qb(16,"h2"),D.Cc(17),D.ac(18,"translate"),D.Pb(),D.Qb(19,"div",9),D.Qb(20,"section",10),D.Qb(21,"bla-data-table",11),D.Xb("onViewEntry",(function(t){return e.onView(t)}))("onMapEntry",(function(t){return e.onMap(t)})),D.Pb(),D.Mb(22,"bla-teilnemende-manschaften-tabelle",12),D.Pb(),D.Pb(),D.Pb(),D.Pb(),D.Qb(23,"bla-col-layout"),D.Mb(24,"h2",13),D.Pb(),D.Qb(25,"bla-col-layout"),D.Qb(26,"div"),D.Mb(27,"BR"),D.Qb(28,"h2"),D.Cc(29),D.ac(30,"translate"),D.Pb(),D.Qb(31,"p"),D.Cc(32),D.ac(33,"translate"),D.Pb(),D.Pb(),D.Pb(),D.Qb(34,"bla-col-layout"),D.Qb(35,"bla-actionbutton",14),D.Xb("onClick",(function(){return e.generateMatches()})),D.Cc(36),D.ac(37,"translate"),D.Pb(),D.Qb(38,"bla-download-actionbutton",15),D.Cc(39),D.ac(40,"translate"),D.Pb(),D.Qb(41,"bla-download-actionbutton",15),D.Cc(42),D.ac(43,"translate"),D.Pb(),D.Qb(44,"bla-download-actionbutton",15),D.Cc(45),D.ac(46,"translate"),D.Pb(),D.Qb(47,"bla-download-actionbutton",15),D.Cc(48),D.ac(49,"translate"),D.Pb(),D.Ac(50,Ut,4,6,"div",16),D.Qb(51,"bla-actionbutton",17),D.Xb("onClick",(function(){return e.addDSBMitglied()})),D.Cc(52),D.ac(53,"translate"),D.Pb(),D.Ac(54,Nt,4,6,"ng-template",18,19,D.Bc),D.Ac(56,Rt,4,6,"div",20),D.Ac(57,It,4,6,"ng-template",21,22,D.Bc),D.Ac(59,zt,4,6,"div",23),D.Pb(),D.Qb(60,"bla-col-layout"),D.Mb(61,"BR"),D.Qb(62,"h2"),D.Mb(63,"BR"),D.Cc(64),D.ac(65,"translate"),D.Mb(66,"BR"),D.Cc(67,"\xa0"),D.Pb(),D.Mb(68,"BR"),D.Pb(),D.Qb(69,"bla-col-layout"),D.Qb(70,"div",24),D.Qb(71,"section",10),D.Qb(72,"bla-data-table",25),D.Xb("onEditEntry",(function(t){return e.onEdit(t)})),D.Pb(),D.Pb(),D.Pb(),D.Pb(),D.Mb(73,"router-outlet"),D.Pb(),D.Pb(),D.Pb()),2&t){var n=D.oc(55),a=D.oc(58);D.fc("config",e.config),D.zb(4),D.Dc(D.bc(5,64,"WKDURCHFUEHRUNG.WKDURCHFUEHRUNG.DESCRIPTION")),D.zb(7),D.Dc(D.bc(12,66,"WKDURCHFUEHRUNG.TITEL.VERANSTALTUNG")),D.zb(3),D.fc("items",e.veranstaltungen)("loading",e.loadingVeranstaltungen)("multipleSelections",!e.multipleSelections)("placeholderTranslationKey",e.PLACEHOLDER_VAR)("optionFieldSelector","name")("disabled",e.isOfflineDisabled()),D.zb(3),D.Ec(" ",D.bc(18,68,"WKDURCHFUEHRUNG.TITEL.WKTAG")," "),D.zb(4),D.fc("config",e.config_table)("rows",e.rows)("loading",e.loadingWettkampfe),D.zb(1),D.fc("veranstaltungsId",e.selectedVeranstaltungId),D.zb(7),D.Dc(D.bc(30,70,"MANNSCHAFTEN.LIGATABELLE.LIGATABELLE_VORBEREITUNG")),D.zb(3),D.Dc(D.bc(33,72,"MANNSCHAFTEN.LIGATABELLE.TEXT")),D.zb(2),D.wc("flex-wrap: wrap"),D.zb(1),D.fc("id","generiereMatches")("disabled",e.isDisabledGMButton())("color",e.ActionButtonColors.PRIMARY)("iconClass","cogs"),D.zb(1),D.Ec(" ",D.bc(37,74,"WKDURCHFUEHRUNG.BUTTON.MATCHES")," "),D.zb(2),D.fc("id","downloadSetzliste")("downloadUrl",e.onButtonDownload("pdf/setzliste"))("fileName","setzliste.pdf")("color",e.ActionButtonColors.PRIMARY)("iconClass","file-download")("disabled",e.isDisabled()),D.zb(1),D.Ec("",D.bc(40,76,"WKDURCHFUEHRUNG.BUTTON.SETZLISTE")," "),D.zb(2),D.fc("id","downloadSchusszettel")("downloadUrl",e.onButtonDownload("pdf/schusszettel"))("fileName","schusszettel.pdf")("color",e.ActionButtonColors.PRIMARY)("iconClass","file-download")("disabled",e.isDisabled()),D.zb(1),D.Ec("",D.bc(43,78,"WKDURCHFUEHRUNG.BUTTON.SCHUSSZETTEL")," "),D.zb(2),D.fc("id","downloadBogenkontrollliste")("downloadUrl",e.onButtonDownload("pdf/bogenkontrollliste"))("fileName","bogenkontrollliste.pdf")("color",e.ActionButtonColors.PRIMARY)("iconClass","file-download")("disabled",e.isDisabled()),D.zb(1),D.Ec("",D.bc(46,80,"WKDURCHFUEHRUNG.BUTTON.KONTROLLLISTE")," "),D.zb(2),D.fc("id","downloadMeldezettel")("downloadUrl",e.onButtonDownload("pdf/meldezettel"))("fileName","meldezettel.pdf")("color",e.ActionButtonColors.PRIMARY)("iconClass","file-download")("disabled",e.isDisabled()),D.zb(1),D.Ec("",D.bc(49,82,"WKDURCHFUEHRUNG.BUTTON.MELDEZETTEL")," "),D.zb(2),D.fc("ngIf",!e.isOffline())("ngIfElse",n),D.zb(1),D.fc("id","DSB-Mitglied anlegen")("color",e.ActionButtonColors.PRIMARY)("iconClass","user-plus"),D.zb(1),D.Ec(" ",D.bc(53,84,"WKDURCHFUEHRUNG.BUTTON.MITGLIED_ANLEGEN")," "),D.zb(4),D.fc("ngIf",!e.isOffline())("ngIfElse",a),D.zb(3),D.fc("ngIf",e.isAdmin()),D.zb(5),D.Ec("",D.bc(65,86,"WKDURCHFUEHRUNG.TITEL.LT_DURCHFUEHRUNG")," "),D.zb(8),D.fc("config",e.config_table_match)("rows",e.matchRows)("loading",e.loadingMatch)}},directives:[dt.a,mt.a,pt.a,u.g,gt.a,vt.a,kt,ut.a,Tt.a,c.t,u.i],pipes:[Pt.d],styles:[""]}),Ot),Qt=((yt=function(e){t(i,e);var a=n(i);function i(t,e,n){var r;return s(this,i),(r=a.call(this)).restClient=t,r.onOfflineService=e,r.passeDataProvider=n,r.serviceSubUrl="v1/match/schusszettel",r}return l(i,[{key:"findMatches",value:function(t,e){var n=this;if(this.onOfflineService.isOffline()){var a=[];return new Promise((function(i,r){n.passeDataProvider.findOfflineByMatchIds(Number(t),Number(e)).then((function(r){a=Object(q.c)(r.payload),n.offlineFindMatches(Number(t),Number(e),a).then((function(t){i({result:v.RequestResult.SUCCESS,payload:t.payload})}))})).catch((function(t){return console.error(t)}))}))}return new Promise((function(a,i){n.restClient.GET((new v.UriBuilder).fromPath(n.getUrl()).path(t).path(e).build()).then((function(t){console.log("data in MatchDTO",t);var e=[y.matchToDO(t[0]),y.matchToDO(t[1])];a({result:v.RequestResult.SUCCESS,payload:e})}),(function(t){i(0===t.status?{result:v.RequestResult.CONNECTION_PROBLEM}:{result:v.RequestResult.FAILURE})}))}))}},{key:"offlineFindMatches",value:function(t,e,n){return new Promise((function(a,i){T.a.matchTabelle.bulkGet([t,e]).then((function(t){a({result:v.RequestResult.SUCCESS,payload:[y.matchToDO(H(t[0],n)),y.matchToDO(H(t[1],n))]})}),(function(){i({result:v.RequestResult.FAILURE})}))}))}},{key:"offlineAddPassen",value:function(t){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T.a.transaction("rw",T.a.passeTabelle,(function(e){return Object(f.a)(n,void 0,void 0,regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,a=new Map,e.next=3,T.a.passeTabelle.toArray().then((function(t){t.forEach((function(t){a.set(t.id,t.passeId),t.id>=n&&(n=t.id)}))}));case 3:t.passen.filter((function(t){return t})).forEach((function(t){var e,i;null===t.id&&(n+=1),T.a.passeTabelle.put({offlineVersion:2,id:null!==(e=t.id)&&void 0!==e?e:n,passeId:a.get(t.id),dsbMitgliedId:t.dsbMitgliedId,lfdNr:t.lfdNr,mannschaftId:t.mannschaftId,matchID:t.matchId,matchNr:t.matchNr,ringzahlPfeil1:t.ringzahl[0],ringzahlPfeil2:t.ringzahl[1],ringzahlPfeil3:t.ringzahl[2],ringzahlPfeil4:t.ringzahl[3],ringzahlPfeil5:t.ringzahl[4],ringzahlPfeil6:0,rueckennummer:t.rueckennummer,version:2,wettkampfId:t.wettkampfId},null!==(i=t.id)&&void 0!==i?i:n).then((function(t){return console.log(t+" passe offline hinzugef\xfcgt")})).catch((function(t){return console.error(t)}))}));case 4:case"end":return e.stop()}}),e)})))}));case 1:case"end":return e.stop()}}),e)})))}},{key:"create",value:function(t,e){var n=this,a=y.matchToDTO(t),i=y.matchToDTO(e);return this.onOfflineService.isOffline()?new Promise((function(t,e){T.a.transaction("rw",T.a.matchTabelle,T.a.passeTabelle,(function(t){return Object(f.a)(n,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.a.matchTabelle.update(a.id,{matchpkt:a.matchpunkte,satzpunkte:a.satzpunkte,strafpunkteSatz1:a.strafPunkteSatz1,strafpunkteSatz2:a.strafPunkteSatz2,strafpunkteSatz3:a.strafPunkteSatz3,strafpunkteSatz4:a.strafPunkteSatz4,strafpunkteSatz5:a.strafPunkteSatz5,offlineVersion:2});case 2:return t.next=4,T.a.matchTabelle.update(i.id,{matchpkt:i.matchpunkte,satzpunkte:i.satzpunkte,strafpunkteSatz1:i.strafPunkteSatz1,strafpunkteSatz2:i.strafPunkteSatz2,strafpunkteSatz3:i.strafPunkteSatz3,strafpunkteSatz4:i.strafPunkteSatz4,strafpunkteSatz5:i.strafPunkteSatz5,offlineVersion:2});case 4:return t.next=6,this.offlineAddPassen(a);case 6:return t.next=8,this.offlineAddPassen(i);case 8:T.a.passeTabelle.where("matchID").equals(a.id).or("matchID").equals(i.id).modify((function(t){t.version?t.version+=1:t.version=2}));case 9:case"end":return t.stop()}}),t,this)})))})).then((function(){n.findMatches(a.id.toString(),i.id.toString()).then((function(e){return t({result:v.RequestResult.SUCCESS,payload:e.payload})}))})).catch((function(t){return e(t)}))})):new Promise((function(t,e){n.restClient.POST(n.getUrl(),[a,i]).then((function(e){var n=[y.matchToDO(e[0]),y.matchToDO(e[1])];t({result:v.RequestResult.SUCCESS,payload:n})}),(function(t){e(0===t.status?{result:v.RequestResult.CONNECTION_PROBLEM}:{result:v.RequestResult.FAILURE})}))}))}}]),i}(v.DataProviderService)).\u0275fac=function(t){return new(t||yt)(D.Ub(v.RestClient),D.Ub(O.i),D.Ub(x.a))},yt.\u0275prov=D.Hb({token:yt,factory:yt.\u0275fac,providedIn:"root"}),yt),Gt=i("TmMT"),_t=i("v1Mt"),xt=((At=function(){function t(e,n,a,i,r){s(this,t),this.specialKeys=["Backspace","Tab","End","Home","Delete","Del","ArrowLeft","ArrowRight","Left","Right","Shift"],this.ALIAS_10="+",this.el=e,this.notificationService=r,this.allowedKeys=n,this.MIN_VAL=a,this.MAX_VAL=i}return l(t,[{key:"notificationMethod",value:function(t){this.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_EINGABEFEHLER",title:"WKDURCHFUEHRUNG.SCHUSSZETTEL.NOTIFICATION.EINGABEFEHLER.TITLE",description:"WKDURCHFUEHRUNG.SCHUSSZETTEL.NOTIFICATION.EINGABEFEHLER.DESCRIPTION",severity:O.f.INFO,origin:O.d.USER,type:O.g.OK,userAction:O.h.PENDING}),t.preventDefault()}},{key:"inRange",value:function(t){return parseInt(t,10)>=this.MIN_VAL&&parseInt(t,10)<=this.MAX_VAL}},{key:"onKeyDown",value:function(t){-1===this.specialKeys.indexOf(t.key)&&(this.allowedKeys.includes(t.key)&&this.inRange(this.el.nativeElement.value+parseInt(t.key,10))||this.notificationMethod(t))}},{key:"onKeyUp",value:function(t){if(-1===this.specialKeys.indexOf(t.key)&&(this.allowedKeys.includes(t.key)||this.inRange(this.el.nativeElement.value+parseInt(t.key,10)))){var e=parseInt(this.el.nativeElement.getAttribute("tabindex"),10);document.querySelector('[tabindex="'+(e+1)+'"]').focus()}}}]),t}()).\u0275fac=function(t){D.Wb()},At.\u0275dir=D.Gb({type:At,hostBindings:function(t,e){1&t&&D.Xb("keydown",(function(t){return e.onKeyDown(t)}))("keyup",(function(t){return e.onKeyUp(t)}))}}),At),Wt=((Ht=function(e){t(i,e);var a=n(i);function i(t,e){var n;return s(this,i),(n=a.call(this,t,["1","2","3","4","5","6","7","8","9","0"],0,10,e)).ALIAS_10="+",n}return l(i,[{key:"onKeyDown",value:function(t){-1===this.specialKeys.indexOf(t.key)&&(t.key!==this.ALIAS_10?this.allowedKeys.includes(t.key)&&this.inRange(this.el.nativeElement.value+parseInt(t.key,10))||this.notificationMethod(t):this.el.nativeElement.value="10")}}]),i}(xt)).\u0275fac=function(t){return new(t||Ht)(D.Lb(D.l),D.Lb(O.e))},Ht.\u0275dir=D.Gb({type:Ht,selectors:[["","blaPfeilNumberOnly",""]],hostBindings:function(t,e){1&t&&D.Xb("keydown",(function(t){return e.onKeyDown(t)}))},features:[D.wb]}),Ht),Kt=((Mt=function(e){t(i,e);var a=n(i);function i(t,e){return s(this,i),a.call(this,t,["1","2","3","4","5","6","7","8","9","0"],1,99,e)}return i}(xt)).\u0275fac=function(t){return new(t||Mt)(D.Lb(D.l),D.Lb(O.e))},Mt.\u0275dir=D.Gb({type:Mt,selectors:[["","blaSchuetzeNumberOnly",""]],features:[D.wb]}),Mt),Zt=((wt=function(e){t(i,e);var a=n(i);function i(t,e){return s(this,i),a.call(this,t,["1","2","3","4","5","6","7","8","9","0"],0,60,e)}return i}(xt)).\u0275fac=function(t){return new(t||wt)(D.Lb(D.l),D.Lb(O.e))},wt.\u0275dir=D.Gb({type:wt,selectors:[["","blaFehlerNumberOnly",""]],features:[D.wb]}),wt),Bt=i("xRjW"),Vt=function(){function t(){s(this,t)}return l(t,[{key:"getNext",value:function(){if(this.currIdx<this.indices.length){var t=this.indices[this.currIdx];return this.currIdx+=1,t}return this.currIdx=0,this.getNext()}}]),t}(),jt=new(function(e){t(i,e);var a=n(i);function i(){var t;return s(this,i),(t=a.call(this)).indices=[1,2,3,34,35,36],t.currIdx=0,t}return i}(Vt)),qt=new(function(e){t(i,e);var a=n(i);function i(){var t;s(this,i);(t=a.call(this)).indices=[];for(var e=0,n=[[4,29],[6,31],[8,33],[37,62],[39,64],[41,66]];e<n.length;e++)for(var r=n[e],c=r[0];c<=r[1];c+=6)t.indices.push(c),t.indices.push(c+1);return t.currIdx=0,t}return i}(Vt)),Yt=function t(e){s(this,t),this.el=e},Xt=((Ft=function(e){t(i,e);var a=n(i);function i(t){var e;return s(this,i),(e=a.call(this,t)).el.nativeElement.setAttribute("tabindex",jt.getNext()),e}return i}(Yt)).\u0275fac=function(t){return new(t||Ft)(D.Lb(D.l))},Ft.\u0275dir=D.Gb({type:Ft,selectors:[["","blaSchuetzenTabIndexDirective",""]],features:[D.wb]}),Ft),$t=((Dt=function(e){t(i,e);var a=n(i);function i(t){var e;return s(this,i),(e=a.call(this,t)).el.nativeElement.setAttribute("tabindex",qt.getNext()),e}return i}(Yt)).\u0275fac=function(t){return new(t||Dt)(D.Lb(D.l))},Dt.\u0275dir=D.Gb({type:Dt,selectors:[["","blaRingzahlTabIndexDirective",""]],features:[D.wb]}),Dt);function Jt(t,e){if(1&t&&(D.Qb(0,"td"),D.Qb(1,"label"),D.Cc(2),D.ac(3,"translate"),D.Pb(),D.Mb(4,"input",8),D.Pb()),2&t){var n=e.$implicit,a=e.index;D.zb(2),D.Fc("",a+1,". ",D.bc(3,3,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SATZ"),""),D.zb(2),D.fc("value",n)}}function te(t,e){if(1&t&&(D.Qb(0,"td"),D.Mb(1,"input",8),D.Pb()),2&t){var n=e.$implicit;D.zb(1),D.fc("value",n)}}function ee(t,e){if(1&t){var n=D.Rb();D.Qb(0,"td"),D.Qb(1,"input",38),D.Xb("ngModelChange",(function(t){return D.pc(n),D.Zb().$implicit.rueckennummer=t}))("ngModelChange",(function(t){D.pc(n);var e=D.Zb(2).index;return D.Zb().onSchuetzeChange(t,1,e)})),D.Pb(),D.Pb()}if(2&t){var a=D.Zb().$implicit;D.zb(1),D.fc("ngModel",a.rueckennummer)}}function ne(t,e){if(1&t){var n=D.Rb();D.Ac(0,ee,2,1,"td",35),D.Qb(1,"td",36),D.Qb(2,"input",37),D.Xb("ngModelChange",(function(t){D.pc(n);var a=e.index,i=D.Zb().index;return D.Zb().onChange(t,1,i,a,1)})),D.Pb(),D.Pb(),D.Qb(3,"td"),D.Qb(4,"input",37),D.Xb("ngModelChange",(function(t){D.pc(n);var a=e.index,i=D.Zb().index;return D.Zb().onChange(t,1,i,a,2)})),D.Pb(),D.Pb()}if(2&t){var a=e.$implicit;D.fc("ngIf",0==e.index),D.zb(2),D.fc("ngModel",a.ringzahlPfeil1),D.zb(2),D.fc("ngModel",a.ringzahlPfeil2)}}function ae(t,e){if(1&t&&(D.Qb(0,"td"),D.Cc(1),D.ac(2,"translate"),D.Pb(),D.Qb(3,"td"),D.Mb(4,"input",39),D.Pb()),2&t){var n=e.$implicit;D.zb(1),D.Dc(D.bc(2,2,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SUMME")),D.zb(3),D.fc("value",n)}}function ie(t,e){if(1&t&&(D.Qb(0,"tr"),D.Mb(1,"td"),D.Ac(2,ae,5,4,"ng-template",14),D.Pb()),2&t){var n=D.Zb(2);D.zb(2),D.fc("ngForOf",n.match1.sumSatz)}}function re(t,e){if(1&t&&(D.Qb(0,"tr"),D.Ac(1,ne,5,3,"ng-template",14),D.Qb(2,"td",34),D.Cc(3),D.Pb(),D.Pb(),D.Ac(4,ie,3,1,"tr",35)),2&t){var n=e.index,a=e.$implicit,i=D.Zb();D.zb(1),D.fc("ngForOf",a),D.zb(2),D.Ec(" ",i.getSummeSchuetze(n,1)," "),D.zb(1),D.fc("ngIf",n>=i.match1.schuetzen.length-1)}}function ce(t,e){if(1&t&&(D.Qb(0,"td"),D.Qb(1,"label"),D.Cc(2),D.ac(3,"translate"),D.Pb(),D.Mb(4,"input",8),D.Pb()),2&t){var n=e.$implicit,a=e.index;D.zb(2),D.Fc("",a+1,". ",D.bc(3,3,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SATZ"),""),D.zb(2),D.fc("value",n)}}function se(t,e){if(1&t&&(D.Qb(0,"td"),D.Mb(1,"input",8),D.Pb()),2&t){var n=e.$implicit;D.zb(1),D.fc("value",n)}}function oe(t,e){if(1&t){var n=D.Rb();D.Qb(0,"td"),D.Qb(1,"input",38),D.Xb("ngModelChange",(function(t){return D.pc(n),D.Zb().$implicit.rueckennummer=t}))("ngModelChange",(function(t){D.pc(n);var e=D.Zb(2).index;return D.Zb().onSchuetzeChange(t,1,e)})),D.Pb(),D.Pb()}if(2&t){var a=D.Zb().$implicit;D.zb(1),D.fc("ngModel",a.rueckennummer)}}function le(t,e){if(1&t){var n=D.Rb();D.Ac(0,oe,2,1,"td",35),D.Qb(1,"td",36),D.Qb(2,"input",37),D.Xb("ngModelChange",(function(t){D.pc(n);var a=e.index,i=D.Zb().index;return D.Zb().onChange(t,2,i,a,1)})),D.Pb(),D.Pb(),D.Qb(3,"td"),D.Qb(4,"input",37),D.Xb("ngModelChange",(function(t){D.pc(n);var a=e.index,i=D.Zb().index;return D.Zb().onChange(t,2,i,a,2)})),D.Pb(),D.Pb()}if(2&t){var a=e.$implicit;D.fc("ngIf",0==e.index),D.zb(2),D.fc("ngModel",a.ringzahlPfeil1),D.zb(2),D.fc("ngModel",a.ringzahlPfeil2)}}function ue(t,e){if(1&t&&(D.Qb(0,"td"),D.Cc(1),D.ac(2,"translate"),D.Pb(),D.Qb(3,"td"),D.Mb(4,"input",39),D.Pb()),2&t){var n=e.$implicit;D.zb(1),D.Dc(D.bc(2,2,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SUMME")),D.zb(3),D.fc("value",n)}}function he(t,e){if(1&t&&(D.Qb(0,"tr"),D.Mb(1,"td"),D.Ac(2,ue,5,4,"ng-template",14),D.Pb()),2&t){var n=D.Zb(2);D.zb(2),D.fc("ngForOf",n.match2.sumSatz)}}function fe(t,e){if(1&t&&(D.Qb(0,"tr"),D.Ac(1,le,5,3,"ng-template",14),D.Qb(2,"td",34),D.Cc(3),D.Pb(),D.Pb(),D.Ac(4,he,3,1,"tr",35)),2&t){var n=e.index,a=e.$implicit,i=D.Zb();D.zb(1),D.fc("ngForOf",a),D.zb(2),D.Ec(" ",i.getSummeSchuetze(n,2)," "),D.zb(1),D.fc("ngIf",n>=i.match2.schuetzen.length-1)}}function be(t,e){if(1&t){var n=D.Rb();D.Qb(0,"div",40),D.Qb(1,"div",41),D.Qb(2,"h2"),D.Cc(3),D.ac(4,"translate"),D.Pb(),D.Mb(5,"br"),D.Qb(6,"a",42),D.Xb("click",(function(){return D.pc(n),D.Zb().popupSelberTag=!1})),D.Cc(7,"\xd7"),D.Pb(),D.Qb(8,"a"),D.Cc(9),D.ac(10,"translate"),D.ac(11,"translate"),D.ac(12,"translate"),D.Pb(),D.Mb(13,"br"),D.Mb(14,"br"),D.Qb(15,"button",43),D.Xb("click",(function(){return D.pc(n),D.Zb().popupSelberTag=!1})),D.Cc(16,"OK"),D.Pb(),D.Pb(),D.Pb()}if(2&t){var a=D.Zb();D.zb(3),D.Dc(D.bc(4,6,"WKDURCHFUEHRUNG.SCHUSSZETTEL.PRUEF_D_SCHUETZEN")),D.zb(6),D.Gc("",D.bc(10,8,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SCHUETZE")," ",a.passeSelberTag," ",D.bc(11,10,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SELBER_TAG_PRUEFUNG1")," ",a.selberTagVeranstaltung," ",D.bc(12,12,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SELBER_TAG_PRUEFUNG2"),"")}}function de(t,e){if(1&t){var n=D.Rb();D.Qb(0,"div",40),D.Qb(1,"div",41),D.Qb(2,"h2"),D.Cc(3),D.ac(4,"translate"),D.Pb(),D.Mb(5,"br"),D.Qb(6,"a",42),D.Xb("click",(function(){return D.pc(n),D.Zb().popupAndererTag=!1})),D.Cc(7,"\xd7"),D.Pb(),D.Qb(8,"a"),D.Cc(9),D.ac(10,"translate"),D.ac(11,"translate"),D.ac(12,"translate"),D.ac(13,"translate"),D.Pb(),D.Mb(14,"br"),D.Mb(15,"br"),D.Qb(16,"button",43),D.Xb("click",(function(){return D.pc(n),D.Zb().popupAndererTag=!1})),D.Cc(17,"OK"),D.Pb(),D.Pb(),D.Pb()}if(2&t){var a=D.Zb();D.zb(3),D.Dc(D.bc(4,8,"WKDURCHFUEHRUNG.SCHUSSZETTEL.PRUEF_D_SCHUETZEN")),D.zb(6),D.Hc("",D.bc(10,10,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SCHUETZE")," ",a.passeAndererTag," ",D.bc(11,12,"WKDURCHFUEHRUNG.SCHUSSZETTEL.ANDERER_TAG_PRUEFUNG1")," ",a.andererTagAnzahl," ",D.bc(12,14,"WKDURCHFUEHRUNG.SCHUSSZETTEL.ANDERER_TAG_PRUEFUNG2")," ",a.andererTagVeranstaltung.name," ",D.bc(13,16,"WKDURCHFUEHRUNG.SCHUSSZETTEL.ANDERER_TAG_PRUEFUNG3"),"")}}var me,pe,ge=((pe=function(){function t(e,n,a,i,r,c,o,l,u,h,f,b,d){s(this,t),this.router=e,this.schusszettelService=n,this.ligatabelleService=a,this.matchProvider=i,this.route=r,this.notificationService=c,this.vereinDataProvider=o,this.dsbMannschaftDataProvider=l,this.passeDataProvider=u,this.wettkampfDataProvider=h,this.veranstaltungDataProvider=f,this.mannschaftsMitgliedDataProvider=b,this.onOfflineService=d,this.match1singlesatzpoints=[],this.match2singlesatzpoints=[],this.mannschaften=[],this.vereine=[],this.allPasse=[],this.matchAllPasse=new Array,this.selberWettkampftag=new Array,this.selberWettkampftagVeranstaltung=Array(),this.anzahlAnTagenMannschaft=new Array}return l(t,[{key:"ngOnInit",value:function(){var t=this;this.match1=new N(null,null,null,1,1,1,1,[],0,0,null,null),this.match1.nr=1,this.match1.schuetzen=[],this.match1singlesatzpoints=[],this.match2=new N(null,null,null,1,1,1,1,[],0,0,null,null),this.match2.nr=1,this.match2.schuetzen=[],this.match2singlesatzpoints=[],this.dirtyFlag=!1,this.initSchuetzenMatch1(),this.initSchuetzenMatch2(),this.route.params.subscribe((function(e){if(!Object(P.c)(e.match1id)&&!Object(P.c)(e.match2id)){var n=e.match1id,a=e.match2id;t.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_LOADING",title:"WKDURCHFUEHRUNG.SCHUSSZETTEL.NOTIFICATION.LADEN.TITLE",description:"WKDURCHFUEHRUNG.SCHUSSZETTEL.NOTIFICATION.LADEN.DESCRIPTION",severity:O.f.INFO,origin:O.d.USER,userAction:O.h.PENDING}),t.schusszettelService.findMatches(n,a).then((function(e){if(t.match1=e.payload[0],t.match2=e.payload[1],0!=t.match1.schuetzen.length){if(t.match1.schuetzen.length>3)for(var n=t.match1.schuetzen.length;n>3;n--)t.match1.schuetzen.pop();for(var a=0;a<3;a++)if(t.match1.schuetzen[a].length>5&&0!=t.match1.schuetzen[a].length)for(var i=t.match1.schuetzen[a].length;i>5;i--)t.match1.schuetzen[a].pop()}if(0!=t.match2.schuetzen.length){if(t.match2.schuetzen.length>3)for(var r=t.match2.schuetzen.length;r>3;r--)t.match2.schuetzen.pop();for(var c=0;c<3;c++)if(t.match2.schuetzen[c].length>5&&0!=t.match1.schuetzen[c].length)for(var s=t.match2.schuetzen[c].length;s>5;s--)t.match2.schuetzen[c].pop()}console.log("match1",t.match1),console.log("match2",t.match2);var o=!0;t.match1.schuetzen.length<=0&&(t.initSchuetzenMatch1(),o=!1),t.match2.schuetzen.length<=0&&(t.initSchuetzenMatch2(),o=!1),o&&(t.initSumSatz(),t.setPoints()),t.wettkampfDataProvider.findAllowedMember(t.match1.wettkampfId,t.match1.mannschaftId,t.match2.mannschaftId).then((function(e){t.allowedMitglieder1=e,console.log("Allowed for match1: ",t.allowedMitglieder1),t.match1.wettkampfId===t.match2.wettkampfId&&(t.allowedMitglieder2=t.allowedMitglieder1,t.notificationService.discardNotification())})),t.match1.wettkampfId!==t.match2.wettkampfId&&t.wettkampfDataProvider.findAllowedMember(t.match2.wettkampfId,t.match1.mannschaftId,t.match2.mannschaftId).then((function(e){t.allowedMitglieder2=e,console.log("Allowed for match2: ",t.allowedMitglieder2),t.notificationService.discardNotification()})),t.onOfflineService.isOffline()&&t.notificationService.discardNotification()})).catch((function(t){console.error(t)}))}}))}},{key:"onChange",value:function(t,e,n,a,i){var r=this["match"+e],c=r.schuetzen[n][a],s=parseInt(t,10);s=s>=0?s:null,1===i?c.ringzahlPfeil1=s:c.ringzahlPfeil2=s,r.sumSatz[a]=this.getSumSatz(r,a),this.setPoints(),this.dirtyFlag=!0}},{key:"onSchuetzeChange",value:function(t,e,n){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var a,i,r,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=1===e?this.match1.mannschaftId:this.match2.mannschaftId,i=!0,r=null,n.prev=2,n.next=5,this.mannschaftsMitgliedDataProvider.findByTeamIdAndRueckennummer(a,t);case 5:r=n.sent,n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),i=!1;case 11:null!=r&&r.result===v.RequestResult.SUCCESS&&(c=r.payload.dsbMitgliedId,console.log("DsbNummer for Mannschaftsmitglied in Mannschaft "+a+" and Rueckennummer "+t+" is "+c),(1==e?this.allowedMitglieder1:this.allowedMitglieder2).includes(c)||(i=!1)),i||this.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_SCHUETZENNUMMER",title:"WKDURCHFUEHRUNG.SCHUSSZETTEL.NOTIFICATION.SCHUETZENNUMMER.TITLE",description:"WKDURCHFUEHRUNG.SCHUSSZETTEL.NOTIFICATION.SCHUETZENNUMMER.DESCRIPTION",severity:O.f.ERROR,origin:O.d.SYSTEM,type:O.g.OK,userAction:O.h.ACCEPTED});case 13:case"end":return n.stop()}}),n,this,[[2,8]])})))}},{key:"onFehlerpunkteChange",value:function(t,e,n){var a=this["match"+e],i=parseInt(t,10);i=i>=1?i:null,a.fehlerpunkte[n]=i,a.sumSatz[n]=this.getSumSatz(a,n),this.setPoints(),this.dirtyFlag=!0}},{key:"getAllMannschaften",value:function(){var t=this;this.dsbMannschaftDataProvider.findAll().then((function(e){t.mannschaften=e.payload}))}},{key:"getAllVerein",value:function(){var t=this;this.vereinDataProvider.findAll().then((function(e){t.vereine=e.payload}))}},{key:"getAllPasse",value:function(){var t=this;this.passeDataProvider.findAll().then((function(e){t.allPasse=e.payload}))}},{key:"getAllWettkaempfe",value:function(){var t=this;this.wettkampfDataProvider.findAll().then((function(e){t.allWettkaempfe=e.payload}))}},{key:"maxMannschaftsId",value:function(){var t=this.mannschaften[0].id;return this.mannschaften.forEach((function(e){e.id>t&&(t=e.id)})),t}},{key:"savepopSelberTag",value:function(){this.popupSelberTag=!0}},{key:"savepopAndererTag",value:function(){this.popupAndererTag=!0}},{key:"save",value:function(){return Object(f.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,a,i,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=null,n=null,t.t0=this.onOfflineService.isOffline(),!t.t0){t.next=6;break}return t.next=5,this.matchProvider.getmatchoffline(this.match1.nr);case 5:t.sent.payload.forEach((function(t){t.mannschaftId===r.match1.mannschaftId?e=t:t.mannschaftId===r.match2.mannschaftId&&(n=t)}));case 6:if(!(this.match1.satzpunkte>7||this.match2.satzpunkte>7)){t.next=10;break}this.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_ENTSCHIEDEN",title:"WKDURCHFUEHRUNG.SCHUSSZETTEL.NOTIFICATION.ENTSCHIEDEN.TITLE",description:"WKDURCHFUEHRUNG.SCHUSSZETTEL.NOTIFICATION.ENTSCHIEDEN.DESCRIPTION",severity:O.f.ERROR,origin:O.d.SYSTEM,type:O.g.OK,userAction:O.h.ACCEPTED}),t.next=26;break;case 10:if(null!=this.match1.schuetzen[0][0].rueckennummer&&null!=this.match1.schuetzen[1][0].rueckennummer&&null!=this.match1.schuetzen[2][0].rueckennummer&&null!=this.match2.schuetzen[0][0].rueckennummer&&null!=this.match2.schuetzen[1][0].rueckennummer&&null!=this.match2.schuetzen[2][0].rueckennummer){t.next=14;break}this.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_SCHUETZENNUMMER",title:"WKDURCHFUEHRUNG.SCHUSSZETTEL.NOTIFICATION.SCHUETZENNUMMER.TITLE",description:"WKDURCHFUEHRUNG.SCHUSSZETTEL.NOTIFICATION.SCHUETZENNUMMER.DESCRIPTION",severity:O.f.ERROR,origin:O.d.SYSTEM,type:O.g.OK,userAction:O.h.ACCEPTED}),t.next=26;break;case 14:if(this.match1.schuetzen[0][0].rueckennummer!==this.match1.schuetzen[1][0].rueckennummer&&this.match1.schuetzen[1][0].rueckennummer!==this.match1.schuetzen[2][0].rueckennummer&&this.match1.schuetzen[2][0].rueckennummer!==this.match1.schuetzen[0][0].rueckennummer&&this.match2.schuetzen[0][0].rueckennummer!==this.match2.schuetzen[1][0].rueckennummer&&this.match2.schuetzen[1][0].rueckennummer!==this.match2.schuetzen[2][0].rueckennummer&&this.match2.schuetzen[2][0].rueckennummer!==this.match2.schuetzen[0][0].rueckennummer){t.next=18;break}this.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_SCHUETZENNUMMER",title:"WKDURCHFUEHRUNG.SCHUSSZETTEL.NOTIFICATION.SCHUETZENEINDEUTIG.TITLE",description:"WKDURCHFUEHRUNG.SCHUSSZETTEL.NOTIFICATION.SCHUETZENEINDEUTIG.DESCRIPTION",severity:O.f.ERROR,origin:O.d.SYSTEM,type:O.g.OK,userAction:O.h.ACCEPTED}),t.next=26;break;case 18:for(this.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_SPEICHERN",title:"wkdurchfuehrung.SCHUSSZETTEL.NOTIFICATION.SPEICHERN.TITLE",description:"wkdurchfuehrung.SCHUSSZETTEL.NOTIFICATION.SPEICHERN.DESCRIPTION",severity:O.f.INFO,origin:O.d.USER,userAction:O.h.PENDING}),a=0;a<3;a++)for(i=1;i<5;i++)this.match1.schuetzen[a][i].lfdNr<=1&&(this.match1.schuetzen[a][i].lfdNr=i+1),this.match2.schuetzen[a][i].lfdNr<=1&&(this.match2.schuetzen[a][i].lfdNr=i+1),this.match1.schuetzen[a][i].dsbMitgliedId=this.match1.schuetzen[a][0].dsbMitgliedId,this.match2.schuetzen[a][i].dsbMitgliedId=this.match2.schuetzen[a][0].dsbMitgliedId,this.match1.schuetzen[a][i].rueckennummer=this.match1.schuetzen[a][0].rueckennummer,this.match2.schuetzen[a][i].rueckennummer=this.match2.schuetzen[a][0].rueckennummer;if(this.schusszettelService.create(this.match1,this.match2).then((function(t){r.match1=t.payload[0],r.match2=t.payload[1],r.ngOnInit(),r.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_ENTSCHIEDEN",title:"wkdurchfuehrung.SCHUSSZETTEL.NOTIFICATION.GESPEICHERT.TITLE",description:"wkdurchfuehrung.SCHUSSZETTEL.NOTIFICATION.GESPEICHERT.DESCRIPTION",severity:O.f.ERROR,origin:O.d.SYSTEM,type:O.g.OK,userAction:O.h.ACCEPTED})}),(function(t){console.error(t),r.notificationService.showNotification({id:"NOTIFICATION_SCHUSSZETTEL_ENTSCHIEDEN",title:"wkdurchfuehrung.SCHUSSZETTEL.NOTIFICATION.RUECKENNUMMERZUHOCH.TITLE",description:"wkdurchfuehrung.SCHUSSZETTEL.NOTIFICATION.RUECKENNUMMERZUHOCH.DESCRIPTION",severity:O.f.ERROR,origin:O.d.SYSTEM,type:O.g.OK,userAction:O.h.ACCEPTED}),r.notificationService.discardNotification()})),t.t1=this.onOfflineService.isOffline(),!t.t1){t.next=25;break}return t.next=25,this.ligatabelleService.updateLigatabelleVeranstaltung(this.match1,e,this.match2,n);case 25:this.dirtyFlag=!1;case 26:case"end":return t.stop()}}),t,this)})))}},{key:"back",value:function(){var t=this;if(!0===this.dirtyFlag){var e={id:"schusszettel-weiter",title:"wkdurchfuehrung.SCHUSSZETTEL.NOTIFICATION.ZURUECK.TITLE",description:"wkdurchfuehrung.SCHUSSZETTEL.NOTIFICATION.ZURUECK.DESCRIPTION",severity:O.f.QUESTION,origin:O.d.USER,type:O.g.YES_NO,userAction:O.h.PENDING};console.log("show notification"),this.notificationService.showNotification(e),console.log("notification.userAction before: "+e.userAction),this.notificationService.observeNotification("schusszettel-weiter").subscribe((function(n){console.log("observe notification"),n.userAction===O.h.ACCEPTED&&(console.log("accepted"),t.dirtyFlag=!1,console.log("Wettkampftag",t.match1.wettkampfTag),t.router.navigate(["/wkdurchfuehrung/"+t.match1.wettkampfId])),console.log("notification.userAction after: "+e.userAction)}))}else console.log("Keine \xc4nderung"),console.log("Wettkampftag",this.match1.wettkampfTag),this.router.navigate(["/wkdurchfuehrung"])}},{key:"next",value:function(){var t=this;if(!0===this.dirtyFlag){var e={id:"schusszettel_weiter",title:"wkdurchfuehrung.SCHUSSZETTEL.NOTIFICATION.WEITER.TITLE",description:"wkdurchfuehrung.SCHUSSZETTEL.NOTIFICATION.WEITER.DESCRIPTION",severity:O.f.QUESTION,origin:O.d.USER,type:O.g.YES_NO,userAction:O.h.PENDING};this.notificationService.observeNotification("schusszettel_weiter").subscribe((function(e){e.userAction===O.h.ACCEPTED&&(t.dirtyFlag=!1,t.matchProvider.pairToFollow(t.match2.id).then((function(e){2===e.payload.length&&t.router.navigate(["/wkdurchfuehrung/schusszettel/"+e.payload[0]+"/"+e.payload[1]])})))})),this.notificationService.showNotification(e)}else this.matchProvider.pairToFollow(this.match2.id).then((function(e){2===e.payload.length&&t.router.navigate(["/wkdurchfuehrung/schusszettel/"+e.payload[0]+"/"+e.payload[1]])}))}},{key:"previous",value:function(){var t=this;if(!0===this.dirtyFlag){var e={id:"schusszettel_weiter",title:"wkdurchfuehrung.SCHUSSZETTEL.NOTIFICATION.WEITER.TITLE",description:"wkdurchfuehrung.SCHUSSZETTEL.NOTIFICATION.WEITER.DESCRIPTION",severity:O.f.QUESTION,origin:O.d.USER,type:O.g.YES_NO,userAction:O.h.PENDING};this.notificationService.observeNotification("schusszettel_weiter").subscribe((function(e){e.userAction===O.h.ACCEPTED&&(t.dirtyFlag=!1,t.matchProvider.previousPair(t.match1.id).then((function(e){2===e.payload.length&&t.router.navigate(["/wkdurchfuehrung/schusszettel/"+e.payload[0]+"/"+e.payload[1]])})))})),this.notificationService.showNotification(e)}else this.matchProvider.previousPair(this.match1.id).then((function(e){2===e.payload.length&&t.router.navigate(["/wkdurchfuehrung/schusszettel/"+e.payload[0]+"/"+e.payload[1]])}))}},{key:"trackByIndex",value:function(t,e){return t}},{key:"initSchuetzenMatch1",value:function(){this.match1singlesatzpoints=[],this.match1.sumSatz=[];for(var t=0;t<5;t++)this.match1.sumSatz.push(0),this.match1singlesatzpoints.push(0);this.match1.schuetzen=[];for(var e=0;e<3;e++){this.match1.schuetzen.push(new Array);for(var n=0;n<5;n++)this.match1.schuetzen[e].push(new I(null,this.match1.id,this.match1.mannschaftId,this.match1.wettkampfId,this.match1.nr,n+1))}}},{key:"initSchuetzenMatch2",value:function(){this.match2singlesatzpoints=[],this.match2.sumSatz=[];for(var t=0;t<5;t++)this.match2.sumSatz.push(0),this.match2singlesatzpoints.push(0);this.match2.schuetzen=[];for(var e=0;e<3;e++){this.match2.schuetzen.push(new Array);for(var n=0;n<5;n++)this.match2.schuetzen[e].push(new I(null,this.match2.id,this.match2.mannschaftId,this.match2.wettkampfId,this.match2.nr,n+1))}}},{key:"getSumSatz",value:function(t,e){for(var n=0,a=0,i=Object.keys(t.schuetzen);a<i.length;a++){var r=i[a];n+=t.schuetzen[r][e].ringzahlPfeil1,(n+=t.schuetzen[r][e].ringzahlPfeil2)>0&&null==t.schuetzen[r][e].ringzahlPfeil1&&(t.schuetzen[r][e].ringzahlPfeil1=0),n>0&&null==t.schuetzen[r][e].ringzahlPfeil2&&(t.schuetzen[r][e].ringzahlPfeil2=0)}return n-=t.fehlerpunkte[e]}},{key:"setPoints",value:function(){"Liga kummulativ"===this.match1.wettkampfTyp?this.setKummulativePoints():this.setSatzPoints(),this.match1.satzpunkte>=6?(this.match1.matchpunkte=2,this.match2.matchpunkte=0):this.match2.satzpunkte>=6?(this.match1.matchpunkte=0,this.match2.matchpunkte=2):5===this.match2.satzpunkte&&5===this.match1.satzpunkte&&(this.match1.matchpunkte=1,this.match2.matchpunkte=1)}},{key:"setSatzPoints",value:function(){for(var t=0,e=0,n=0;n<5;n++)this.match1.sumSatz[n]>this.match2.sumSatz[n]?(t+=2,this.match1singlesatzpoints[n]=2,this.match2singlesatzpoints[n]=0):this.match1.sumSatz[n]<this.match2.sumSatz[n]?(e+=2,this.match1singlesatzpoints[n]=0,this.match2singlesatzpoints[n]=2):this.match1.sumSatz[n]===this.match2.sumSatz[n]&&this.match1.sumSatz[n]>0&&this.match2.sumSatz[n]>0&&(t++,e++,this.match1singlesatzpoints[n]=1,this.match2singlesatzpoints[n]=1);this.match1.satzpunkte=t,this.match2.satzpunkte=e,this.match1.matchpunkte=0,this.match2.matchpunkte=0}},{key:"setKummulativePoints",value:function(){for(var t=0,e=0,n=0;n<3;n++)t+=this.match1.sumSatz[n],e+=this.match2.sumSatz[n];t>e?(this.match1.satzpunkte=6,this.match2.satzpunkte=0):t<e&&(this.match1.satzpunkte=0,this.match2.satzpunkte=6)}},{key:"initSumSatz",value:function(){for(var t=0;t<5;t++)this.match1.sumSatz[t]=this.getSumSatz(this.match1,t),this.match2.sumSatz[t]=this.getSumSatz(this.match2,t)}},{key:"getSummeSchuetze",value:function(t,e){var n,a=0,i=r(this["match"+e].schuetzen[t]);try{for(i.s();!(n=i.n()).done;){var c=n.value;a+=c.ringzahlPfeil1+c.ringzahlPfeil2}}catch(s){i.e(s)}finally{i.f()}return a}},{key:"onButtonDownload",value:function(t){return(new v.UriBuilder).fromPath(G.a.backendBaseUrl).path("v1/download").path(t).path(this.match1.id+"/"+this.match2.id).build()}}]),t}()).\u0275fac=function(t){return new(t||pe)(D.Lb(u.d),D.Lb(Qt),D.Lb(_t.a),D.Lb(F),D.Lb(u.a),D.Lb(O.e),D.Lb(at.a),D.Lb(rt.a),D.Lb(x.a),D.Lb(C.a),D.Lb(E.a),D.Lb(Gt.a),D.Lb(O.i))},pe.\u0275cmp=D.Fb({type:pe,selectors:[["bla-schusszettel"]],decls:299,vars:225,consts:[[1,"wettkaempfe","container"],[1,"match1","print"],[1,"row"],[1,"match_col-3"],[1,"mannschaften_col-3"],[1,"tabelle"],["id","punktetabelle",1,"table","table-responsive","thead-light","table-striped",2,"width","100%"],[4,"ngFor","ngForOf"],["readonly","","tabindex","-1","type","text",3,"value"],[1,"col-4","offset-9"],[1,"bigTable","col-9"],[1,"schusstabelle",2,"width","100%"],["rowspan","2"],["colspan","2"],["ngFor","",3,"ngForOf"],[1,"fehlerpunktetabelle"],[1,"row",2,"margin-bottom","10px"],[1,"col-4"],["blaFehlerNumberOnly","",1,"fehlerfeld",3,"ngModel","ngModelChange"],[1,"print","signature","s1"],[1,"m1"],[1,"m2"],[1,"print"],[1,"match2","print"],["id","henlo",1,"match_col-3"],["id","punktetabelle2",1,"table","table-responsive","thead-light","table-striped",2,"width","100%"],["id","buttonContainer"],[1,"btn","btn-primary","nextButton",2,"margin-right","10px","width","170px",3,"click"],[1,"btn","btn-primary","backButton",2,"margin-right","10px",3,"click"],[1,"btn","btn-primary","saveButton",3,"click"],[1,"btn",3,"id","downloadUrl","fileName","disabled"],[1,"btn","btn-primary","nextButton",2,"width","170px",3,"click"],["class","schuetze-popup",4,"ngIf"],[1,"print","signature"],[1,"schuetzensumme"],[4,"ngIf"],[1,"split"],["blaPfeilNumberOnly","","blaRingzahlTabIndexDirective","","type","text",3,"ngModel","ngModelChange"],["blaSchuetzeNumberOnly","","blaSchuetzenTabIndexDirective","","type","number",3,"ngModel","ngModelChange"],["readonly","","tabindex","-1","type","number",3,"value"],[1,"schuetze-popup"],[1,"popup"],[1,"close",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(D.Qb(0,"div",0),D.Qb(1,"div",1),D.Qb(2,"div",2),D.Qb(3,"div",3),D.Qb(4,"h2"),D.Cc(5),D.Pb(),D.Qb(6,"h2"),D.Cc(7),D.ac(8,"translate"),D.Pb(),D.Pb(),D.Qb(9,"div",4),D.Qb(10,"h2"),D.Cc(11),D.Pb(),D.Qb(12,"h2"),D.Cc(13),D.ac(14,"translate"),D.Pb(),D.Qb(15,"h2"),D.Cc(16),D.Pb(),D.Pb(),D.Qb(17,"div",5),D.Qb(18,"table",6),D.Qb(19,"tr"),D.Ac(20,Jt,5,5,"td",7),D.Qb(21,"td"),D.Qb(22,"label"),D.Cc(23),D.ac(24,"translate"),D.Pb(),D.Mb(25,"input",8),D.Pb(),D.Qb(26,"td"),D.Qb(27,"label"),D.Cc(28),D.ac(29,"translate"),D.Pb(),D.Mb(30,"input",8),D.Pb(),D.Pb(),D.Qb(31,"tr"),D.Ac(32,te,2,1,"td",7),D.Qb(33,"td"),D.Mb(34,"input",8),D.Pb(),D.Qb(35,"td"),D.Mb(36,"input",8),D.Pb(),D.Pb(),D.Pb(),D.Pb(),D.Pb(),D.Qb(37,"div",2),D.Qb(38,"div",9),D.Cc(39),D.ac(40,"translate"),D.Pb(),D.Pb(),D.Qb(41,"div",2),D.Qb(42,"div",10),D.Qb(43,"table",11),D.Qb(44,"thead"),D.Qb(45,"tr"),D.Qb(46,"th",12),D.Cc(47),D.ac(48,"translate"),D.Pb(),D.Qb(49,"th",13),D.Cc(50),D.ac(51,"translate"),D.Pb(),D.Qb(52,"th",13),D.Cc(53),D.ac(54,"translate"),D.Pb(),D.Qb(55,"th",13),D.Cc(56),D.ac(57,"translate"),D.Pb(),D.Qb(58,"th",13),D.Cc(59),D.ac(60,"translate"),D.Pb(),D.Qb(61,"th",13),D.Cc(62),D.ac(63,"translate"),D.Pb(),D.Pb(),D.Qb(64,"tr"),D.Qb(65,"th"),D.Cc(66),D.ac(67,"translate"),D.Pb(),D.Qb(68,"th"),D.Cc(69),D.ac(70,"translate"),D.Pb(),D.Qb(71,"th"),D.Cc(72),D.ac(73,"translate"),D.Pb(),D.Qb(74,"th"),D.Cc(75),D.ac(76,"translate"),D.Pb(),D.Qb(77,"th"),D.Cc(78),D.ac(79,"translate"),D.Pb(),D.Qb(80,"th"),D.Cc(81),D.ac(82,"translate"),D.Pb(),D.Qb(83,"th"),D.Cc(84),D.ac(85,"translate"),D.Pb(),D.Qb(86,"th"),D.Cc(87),D.ac(88,"translate"),D.Pb(),D.Qb(89,"th"),D.Cc(90),D.ac(91,"translate"),D.Pb(),D.Qb(92,"th"),D.Cc(93),D.ac(94,"translate"),D.Pb(),D.Pb(),D.Pb(),D.Ac(95,re,5,3,"ng-template",14),D.Pb(),D.Pb(),D.Qb(96,"div",15),D.Qb(97,"div",16),D.Qb(98,"label",17),D.Cc(99),D.ac(100,"translate"),D.Pb(),D.Qb(101,"div",17),D.Qb(102,"input",18),D.Xb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,1,0)}))("ngModelChange",(function(t){return e.match1.fehlerpunkte[0]=t})),D.Pb(),D.Pb(),D.Pb(),D.Qb(103,"div",16),D.Qb(104,"label",17),D.Cc(105),D.ac(106,"translate"),D.Pb(),D.Qb(107,"div",17),D.Qb(108,"input",18),D.Xb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,1,1)}))("ngModelChange",(function(t){return e.match1.fehlerpunkte[1]=t})),D.Pb(),D.Pb(),D.Pb(),D.Qb(109,"div",16),D.Qb(110,"label",17),D.Cc(111),D.ac(112,"translate"),D.Pb(),D.Qb(113,"div",17),D.Qb(114,"input",18),D.Xb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,1,2)}))("ngModelChange",(function(t){return e.match1.fehlerpunkte[2]=t})),D.Pb(),D.Pb(),D.Pb(),D.Qb(115,"div",16),D.Qb(116,"label",17),D.Cc(117),D.ac(118,"translate"),D.Pb(),D.Qb(119,"div",17),D.Qb(120,"input",18),D.Xb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,1,3)}))("ngModelChange",(function(t){return e.match1.fehlerpunkte[3]=t})),D.Pb(),D.Pb(),D.Pb(),D.Qb(121,"div",16),D.Qb(122,"label",17),D.Cc(123),D.ac(124,"translate"),D.Pb(),D.Qb(125,"div",17),D.Qb(126,"input",18),D.Xb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,1,4)}))("ngModelChange",(function(t){return e.match1.fehlerpunkte[4]=t})),D.Pb(),D.Pb(),D.Pb(),D.Pb(),D.Pb(),D.Pb(),D.Qb(127,"div",19),D.Qb(128,"div",20),D.Qb(129,"h1"),D.Cc(130),D.Pb(),D.Qb(131,"p"),D.Cc(132),D.ac(133,"translate"),D.Pb(),D.Pb(),D.Qb(134,"div",21),D.Qb(135,"h1"),D.Cc(136),D.Pb(),D.Qb(137,"p"),D.Cc(138),D.ac(139,"translate"),D.Pb(),D.Pb(),D.Pb(),D.Mb(140,"hr",22),D.Qb(141,"div",23),D.Qb(142,"div",2),D.Qb(143,"div",24),D.Qb(144,"h2"),D.Cc(145),D.Pb(),D.Qb(146,"h2"),D.Cc(147),D.ac(148,"translate"),D.Pb(),D.Pb(),D.Qb(149,"div",4),D.Qb(150,"h2"),D.Cc(151),D.Pb(),D.Qb(152,"h2"),D.Cc(153),D.ac(154,"translate"),D.Pb(),D.Qb(155,"h2"),D.Cc(156),D.Pb(),D.Pb(),D.Qb(157,"div",5),D.Qb(158,"table",25),D.Qb(159,"tr"),D.Ac(160,ce,5,5,"td",7),D.Qb(161,"td"),D.Qb(162,"label"),D.Cc(163),D.ac(164,"translate"),D.Pb(),D.Mb(165,"input",8),D.Pb(),D.Qb(166,"td"),D.Qb(167,"label"),D.Cc(168),D.ac(169,"translate"),D.Pb(),D.Mb(170,"input",8),D.Pb(),D.Pb(),D.Qb(171,"tr"),D.Ac(172,se,2,1,"td",7),D.Qb(173,"td"),D.Mb(174,"input",8),D.Pb(),D.Qb(175,"td"),D.Mb(176,"input",8),D.Pb(),D.Pb(),D.Pb(),D.Pb(),D.Pb(),D.Qb(177,"div",2),D.Qb(178,"div",9),D.Cc(179),D.ac(180,"translate"),D.Pb(),D.Pb(),D.Qb(181,"div",2),D.Qb(182,"div",10),D.Qb(183,"table",11),D.Qb(184,"thead"),D.Qb(185,"tr"),D.Qb(186,"th",12),D.Cc(187),D.ac(188,"translate"),D.Pb(),D.Qb(189,"th",13),D.Cc(190),D.ac(191,"translate"),D.Pb(),D.Qb(192,"th",13),D.Cc(193),D.ac(194,"translate"),D.Pb(),D.Qb(195,"th",13),D.Cc(196),D.ac(197,"translate"),D.Pb(),D.Qb(198,"th",13),D.Cc(199),D.ac(200,"translate"),D.Pb(),D.Qb(201,"th",13),D.Cc(202),D.ac(203,"translate"),D.Pb(),D.Pb(),D.Qb(204,"tr"),D.Qb(205,"th"),D.Cc(206),D.ac(207,"translate"),D.Pb(),D.Qb(208,"th"),D.Cc(209),D.ac(210,"translate"),D.Pb(),D.Qb(211,"th"),D.Cc(212),D.ac(213,"translate"),D.Pb(),D.Qb(214,"th"),D.Cc(215),D.ac(216,"translate"),D.Pb(),D.Qb(217,"th"),D.Cc(218),D.ac(219,"translate"),D.Pb(),D.Qb(220,"th"),D.Cc(221),D.ac(222,"translate"),D.Pb(),D.Qb(223,"th"),D.Cc(224),D.ac(225,"translate"),D.Pb(),D.Qb(226,"th"),D.Cc(227),D.ac(228,"translate"),D.Pb(),D.Qb(229,"th"),D.Cc(230),D.ac(231,"translate"),D.Pb(),D.Qb(232,"th"),D.Cc(233),D.ac(234,"translate"),D.Pb(),D.Pb(),D.Pb(),D.Ac(235,fe,5,3,"ng-template",14),D.Pb(),D.Pb(),D.Qb(236,"div",15),D.Qb(237,"div",16),D.Qb(238,"label",17),D.Cc(239),D.ac(240,"translate"),D.Pb(),D.Qb(241,"div",17),D.Qb(242,"input",18),D.Xb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,2,0)}))("ngModelChange",(function(t){return e.match2.fehlerpunkte[0]=t})),D.Pb(),D.Pb(),D.Pb(),D.Qb(243,"div",16),D.Qb(244,"label",17),D.Cc(245),D.ac(246,"translate"),D.Pb(),D.Qb(247,"div",17),D.Qb(248,"input",18),D.Xb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,2,1)}))("ngModelChange",(function(t){return e.match2.fehlerpunkte[1]=t})),D.Pb(),D.Pb(),D.Pb(),D.Qb(249,"div",16),D.Qb(250,"label",17),D.Cc(251),D.ac(252,"translate"),D.Pb(),D.Qb(253,"div",17),D.Qb(254,"input",18),D.Xb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,2,2)}))("ngModelChange",(function(t){return e.match2.fehlerpunkte[2]=t})),D.Pb(),D.Pb(),D.Pb(),D.Qb(255,"div",16),D.Qb(256,"label",17),D.Cc(257),D.ac(258,"translate"),D.Pb(),D.Qb(259,"div",17),D.Qb(260,"input",18),D.Xb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,2,3)}))("ngModelChange",(function(t){return e.match2.fehlerpunkte[3]=t})),D.Pb(),D.Pb(),D.Pb(),D.Qb(261,"div",16),D.Qb(262,"label",17),D.Cc(263),D.ac(264,"translate"),D.Pb(),D.Qb(265,"div",17),D.Qb(266,"input",18),D.Xb("ngModelChange",(function(t){return e.onFehlerpunkteChange(t,2,4)}))("ngModelChange",(function(t){return e.match2.fehlerpunkte[4]=t})),D.Pb(),D.Pb(),D.Pb(),D.Pb(),D.Pb(),D.Pb(),D.Qb(267,"div"),D.Qb(268,"div",26),D.Qb(269,"button",27),D.Xb("click",(function(){return e.previous()})),D.Cc(270),D.ac(271,"translate"),D.Pb(),D.Qb(272,"button",28),D.Xb("click",(function(){return e.back()})),D.Cc(273),D.ac(274,"translate"),D.Pb(),D.Qb(275,"button",29),D.Xb("click",(function(){return e.save()})),D.Cc(276),D.ac(277,"translate"),D.Pb(),D.Qb(278,"bla-download-button",30),D.Cc(279),D.ac(280,"translate"),D.Pb(),D.Qb(281,"button",31),D.Xb("click",(function(){return e.next()})),D.Cc(282),D.ac(283,"translate"),D.Pb(),D.Pb(),D.Pb(),D.Ac(284,be,17,14,"div",32),D.Ac(285,de,18,18,"div",32),D.Qb(286,"div",33),D.Qb(287,"div",20),D.Qb(288,"h1"),D.Cc(289),D.Pb(),D.Qb(290,"p"),D.Cc(291),D.ac(292,"translate"),D.Pb(),D.Pb(),D.Qb(293,"div",21),D.Qb(294,"h1"),D.Cc(295),D.Pb(),D.Qb(296,"p"),D.Cc(297),D.ac(298,"translate"),D.Pb(),D.Pb(),D.Pb(),D.Pb()),2&t&&(D.zb(5),D.Dc(e.match1.mannschaftName),D.zb(2),D.Fc("",e.match1.nr,". ",D.bc(8,103,"WKDURCHFUEHRUNG.SCHUSSZETTEL.MATCH"),""),D.zb(4),D.Dc(e.match1.mannschaftName),D.zb(2),D.Dc(D.bc(14,105,"WKDURCHFUEHRUNG.SCHUSSZETTEL.GEGEN")),D.zb(3),D.Dc(e.match2.mannschaftName),D.zb(4),D.fc("ngForOf",e.match1singlesatzpoints),D.zb(3),D.Dc(D.bc(24,107,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SUMME")),D.zb(2),D.fc("value",e.match1.satzpunkte),D.zb(3),D.Dc(D.bc(29,109,"WKDURCHFUEHRUNG.SCHUSSZETTEL.MATCH")),D.zb(2),D.fc("value",e.match1.matchpunkte),D.zb(2),D.fc("ngForOf",e.match2singlesatzpoints),D.zb(2),D.fc("value",e.match2.satzpunkte),D.zb(2),D.fc("value",e.match2.matchpunkte),D.zb(3),D.Dc(D.bc(40,111,"WKDURCHFUEHRUNG.SCHUSSZETTEL.FEHLERPUNKTE")),D.zb(8),D.Dc(D.bc(48,113,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SCHUETZE")),D.zb(3),D.Ec("1. ",D.bc(51,115,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SATZ_PRO_PFEIL"),""),D.zb(3),D.Ec("2. ",D.bc(54,117,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SATZ_PRO_PFEIL"),""),D.zb(3),D.Ec("3. ",D.bc(57,119,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SATZ_PRO_PFEIL"),""),D.zb(3),D.Ec("4. ",D.bc(60,121,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SATZ_PRO_PFEIL"),""),D.zb(3),D.Ec("5. ",D.bc(63,123,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SATZ_PRO_PFEIL"),""),D.zb(4),D.Ec("",D.bc(67,125,"WKDURCHFUEHRUNG.SCHUSSZETTEL.PFEIL")," 1"),D.zb(3),D.Ec("",D.bc(70,127,"WKDURCHFUEHRUNG.SCHUSSZETTEL.PFEIL")," 2"),D.zb(3),D.Ec("",D.bc(73,129,"WKDURCHFUEHRUNG.SCHUSSZETTEL.PFEIL")," 1"),D.zb(3),D.Ec("",D.bc(76,131,"WKDURCHFUEHRUNG.SCHUSSZETTEL.PFEIL")," 2"),D.zb(3),D.Ec("",D.bc(79,133,"WKDURCHFUEHRUNG.SCHUSSZETTEL.PFEIL")," 1"),D.zb(3),D.Ec("",D.bc(82,135,"WKDURCHFUEHRUNG.SCHUSSZETTEL.PFEIL")," 2"),D.zb(3),D.Ec("",D.bc(85,137,"WKDURCHFUEHRUNG.SCHUSSZETTEL.PFEIL")," 1"),D.zb(3),D.Ec("",D.bc(88,139,"WKDURCHFUEHRUNG.SCHUSSZETTEL.PFEIL")," 2"),D.zb(3),D.Ec("",D.bc(91,141,"WKDURCHFUEHRUNG.SCHUSSZETTEL.PFEIL")," 1"),D.zb(3),D.Ec("",D.bc(94,143,"WKDURCHFUEHRUNG.SCHUSSZETTEL.PFEIL")," 2"),D.zb(2),D.fc("ngForOf",e.match1.schuetzen),D.zb(4),D.Ec("",D.bc(100,145,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SATZ")," 1"),D.zb(3),D.fc("ngModel",e.match1.fehlerpunkte[0]),D.zb(3),D.Ec("",D.bc(106,147,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SATZ")," 2"),D.zb(3),D.fc("ngModel",e.match1.fehlerpunkte[1]),D.zb(3),D.Ec("",D.bc(112,149,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SATZ")," 3"),D.zb(3),D.fc("ngModel",e.match1.fehlerpunkte[2]),D.zb(3),D.Ec("",D.bc(118,151,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SATZ")," 4"),D.zb(3),D.fc("ngModel",e.match1.fehlerpunkte[3]),D.zb(3),D.Ec("",D.bc(124,153,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SATZ")," 5"),D.zb(3),D.fc("ngModel",e.match1.fehlerpunkte[4]),D.zb(4),D.Dc(e.match2.mannschaftName),D.zb(2),D.Dc(D.bc(133,155,"WKDURCHFUEHRUNG.SCHUSSZETTEL.UNTERSCHRIFT")),D.zb(4),D.Dc(e.match1.mannschaftName),D.zb(2),D.Dc(D.bc(139,157,"WKDURCHFUEHRUNG.SCHUSSZETTEL.UNTERSCHRIFT")),D.zb(7),D.Dc(e.match2.mannschaftName),D.zb(2),D.Fc("",e.match2.nr,". ",D.bc(148,159,"WKDURCHFUEHRUNG.SCHUSSZETTEL.MATCH"),""),D.zb(4),D.Dc(e.match1.mannschaftName),D.zb(2),D.Dc(D.bc(154,161,"WKDURCHFUEHRUNG.SCHUSSZETTEL.GEGEN")),D.zb(3),D.Dc(e.match2.mannschaftName),D.zb(4),D.fc("ngForOf",e.match1singlesatzpoints),D.zb(3),D.Dc(D.bc(164,163,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SUMME")),D.zb(2),D.fc("value",e.match1.satzpunkte),D.zb(3),D.Dc(D.bc(169,165,"WKDURCHFUEHRUNG.SCHUSSZETTEL.MATCH")),D.zb(2),D.fc("value",e.match1.matchpunkte),D.zb(2),D.fc("ngForOf",e.match2singlesatzpoints),D.zb(2),D.fc("value",e.match2.satzpunkte),D.zb(2),D.fc("value",e.match2.matchpunkte),D.zb(3),D.Dc(D.bc(180,167,"WKDURCHFUEHRUNG.SCHUSSZETTEL.FEHLERPUNKTE")),D.zb(8),D.Dc(D.bc(188,169,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SCHUETZE")),D.zb(3),D.Ec("1. ",D.bc(191,171,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SATZ_PRO_PFEIL"),""),D.zb(3),D.Ec("2. ",D.bc(194,173,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SATZ_PRO_PFEIL"),""),D.zb(3),D.Ec("3. ",D.bc(197,175,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SATZ_PRO_PFEIL"),""),D.zb(3),D.Ec("4. ",D.bc(200,177,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SATZ_PRO_PFEIL"),""),D.zb(3),D.Ec("5. ",D.bc(203,179,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SATZ_PRO_PFEIL"),""),D.zb(4),D.Ec("",D.bc(207,181,"WKDURCHFUEHRUNG.SCHUSSZETTEL.PFEIL")," 1"),D.zb(3),D.Ec("",D.bc(210,183,"WKDURCHFUEHRUNG.SCHUSSZETTEL.PFEIL")," 2"),D.zb(3),D.Ec("",D.bc(213,185,"WKDURCHFUEHRUNG.SCHUSSZETTEL.PFEIL")," 1"),D.zb(3),D.Ec("",D.bc(216,187,"WKDURCHFUEHRUNG.SCHUSSZETTEL.PFEIL")," 2"),D.zb(3),D.Ec("",D.bc(219,189,"WKDURCHFUEHRUNG.SCHUSSZETTEL.PFEIL")," 1"),D.zb(3),D.Ec("",D.bc(222,191,"WKDURCHFUEHRUNG.SCHUSSZETTEL.PFEIL")," 2"),D.zb(3),D.Ec("",D.bc(225,193,"WKDURCHFUEHRUNG.SCHUSSZETTEL.PFEIL")," 1"),D.zb(3),D.Ec("",D.bc(228,195,"WKDURCHFUEHRUNG.SCHUSSZETTEL.PFEIL")," 2"),D.zb(3),D.Ec("",D.bc(231,197,"WKDURCHFUEHRUNG.SCHUSSZETTEL.PFEIL")," 1"),D.zb(3),D.Ec("",D.bc(234,199,"WKDURCHFUEHRUNG.SCHUSSZETTEL.PFEIL")," 2"),D.zb(2),D.fc("ngForOf",e.match2.schuetzen),D.zb(4),D.Ec("",D.bc(240,201,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SATZ")," 1"),D.zb(3),D.fc("ngModel",e.match2.fehlerpunkte[0]),D.zb(3),D.Ec("",D.bc(246,203,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SATZ")," 2"),D.zb(3),D.fc("ngModel",e.match2.fehlerpunkte[1]),D.zb(3),D.Ec("",D.bc(252,205,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SATZ")," 3"),D.zb(3),D.fc("ngModel",e.match2.fehlerpunkte[2]),D.zb(3),D.Ec("",D.bc(258,207,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SATZ")," 4"),D.zb(3),D.fc("ngModel",e.match2.fehlerpunkte[3]),D.zb(3),D.Ec("",D.bc(264,209,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SATZ")," 5"),D.zb(3),D.fc("ngModel",e.match2.fehlerpunkte[4]),D.zb(4),D.Ec("",D.bc(271,211,"WKDURCHFUEHRUNG.SCHUSSZETTEL.VORHERIGES_MATCH")," "),D.zb(3),D.Ec("",D.bc(274,213,"WKDURCHFUEHRUNG.SCHUSSZETTEL.ZURUECK")," "),D.zb(3),D.Ec("",D.bc(277,215,"WKDURCHFUEHRUNG.SCHUSSZETTEL.SPEICHERN")," "),D.zb(2),D.fc("id","downloadMatchSchusszettel")("downloadUrl",e.onButtonDownload("pdf/schusszettel_matches"))("fileName","match_schusszettel.pdf")("disabled",!1),D.zb(1),D.Ec("",D.bc(280,217,"WKDURCHFUEHRUNG.SCHUSSZETTEL.DRUCKEN")," "),D.zb(3),D.Ec("",D.bc(283,219,"WKDURCHFUEHRUNG.SCHUSSZETTEL.NAECHSTES_MATCH")," "),D.zb(2),D.fc("ngIf",e.popupSelberTag),D.zb(1),D.fc("ngIf",e.popupAndererTag),D.zb(4),D.Dc(e.match2.mannschaftName),D.zb(2),D.Dc(D.bc(292,221,"WKDURCHFUEHRUNG.SCHUSSZETTEL.UNTERSCHRIFT")),D.zb(4),D.Dc(e.match1.mannschaftName),D.zb(2),D.Dc(D.bc(298,223,"WKDURCHFUEHRUNG.SCHUSSZETTEL.UNTERSCHRIFT")))},directives:[c.s,o.c,Zt,o.o,o.r,Bt.a,c.t,Wt,$t,o.u,Kt,Xt],pipes:[Pt.d],styles:["input[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{display:block}input[_ngcontent-%COMP%]::-webkit-inner-spin-button, input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[_ngcontent-%COMP%]{height:55px;width:55px;-moz-appearance:textfield;font-size:30px;text-align:center}input[_ngcontent-%COMP%]:focus{box-shadow:0 0 8px 0 #057aff}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{alignment:center;text-align:center;margin:10px;font-size:10px;padding:5px}td[_ngcontent-%COMP%]{font-size:16px}label[_ngcontent-%COMP%]{font-size:10px}.split[_ngcontent-%COMP%]{border-left:3px solid #4a4a4a}.match1[_ngcontent-%COMP%]{margin-top:20px}.match2[_ngcontent-%COMP%]{margin-top:-150px;margin-bottom:20px}.match1[_ngcontent-%COMP%], .match2[_ngcontent-%COMP%]{border:2px solid rgba(0,0,0,.1)}.schuetzensumme[_ngcontent-%COMP%]{font-size:30px}.btn[_ngcontent-%COMP%]{margin:10px 0 0 20px}.signature[_ngcontent-%COMP%], hr[_ngcontent-%COMP%]{visibility:hidden}.match[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2vw}.mannschaften_col-3[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .match[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1vw}.mannschaften_col-3[_ngcontent-%COMP%]{width:183px;margin-left:4em;margin-top:3em}.henlo.match_col-3[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1vw}.match_col-3[_ngcontent-%COMP%]{width:180px;margin-left:4em;margin-top:3em}@media print{input[_ngcontent-%COMP%]{border:2px solid #dee2e6;height:45px;width:45px;font-size:25px}h1[_ngcontent-%COMP%]{font-size:10px!important}h3[_ngcontent-%COMP%]{font-size:2vm}.match1[_ngcontent-%COMP%]{margin-bottom:1cm}.match2[_ngcontent-%COMP%]{margin-top:1cm}.m1[_ngcontent-%COMP%], .m2[_ngcontent-%COMP%]{float:left}.m2[_ngcontent-%COMP%]{margin-left:20%}.signature[_ngcontent-%COMP%]{visibility:visible;margin-top:-2cm;margin-bottom:1cm;border-bottom:1px solid #000;display:inline-block;width:90%}.signature[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1cm;margin-bottom:.5cm}.s1[_ngcontent-%COMP%]{margin-top:.5cm;margin-bottom:-2cm}hr[_ngcontent-%COMP%]{visibility:visible;width:100%;height:5px;border-style:dotted;size:1px;background:#dee2e6;margin-top:2.5cm;margin-bottom:.5cm}}.fehlerfeld[_ngcontent-%COMP%]{margin-left:-26px}.schuetze-popup[_ngcontent-%COMP%]{position:fixed;top:0;bottom:0;left:0;right:0;background:rgba(0,0,0,.7);transition:opacity;visibility:visible;opacity:1}.popup[_ngcontent-%COMP%]{margin:70px auto;padding:20px;background:#fff;border-radius:5px;width:30%;height:auto;position:relative;transition:all 5s ease-in-out}.popup[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:#333;font-family:Tahoma,Arial,sans-serif}.popup[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:20px;right:30px;transition:all .2s;font-size:30px;font-weight:700;text-decoration:none;color:#333}.popup[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{color:#02bdd5;cursor:pointer}.schusstabelle[_ngcontent-%COMP%]{margin-left:60px}.fehlerpunktetabelle[_ngcontent-%COMP%]{margin-left:100px}.col-4[_ngcontent-%COMP%]{margin-right:8px}.offset-9[_ngcontent-%COMP%]{margin-left:80.5%}.tabelle[_ngcontent-%COMP%]{margin-left:100px}#buttonContainer[_ngcontent-%COMP%]{margin-left:15%;align-items:center}"]}),pe),ve=((me=function(e){t(i,e);var a=n(i);function i(t){var e;return s(this,i),(e=a.call(this)).restClient=t,e.serviceSubUrl="v1/passen",e}return l(i,[{key:"get",value:function(t){var e=this;return new Promise((function(n,a){e.restClient.GET((new v.UriBuilder).fromPath(e.getUrl()).path(t).build()).then((function(t){var e=z.passeToDO(t);n({result:v.RequestResult.SUCCESS,payload:e})}),(function(t){a(0===t.status?{result:v.RequestResult.CONNECTION_PROBLEM}:{result:v.RequestResult.FAILURE})}))}))}},{key:"create",value:function(t){var e=this,n=z.passeToDTO(t);return new Promise((function(t,a){e.restClient.POST(e.getUrl(),n).then((function(e){var n=z.passeToDO(e);t({result:v.RequestResult.SUCCESS,payload:n})}),(function(t){a(0===t.status?{result:v.RequestResult.CONNECTION_PROBLEM}:{result:v.RequestResult.FAILURE})}))}))}},{key:"update",value:function(t){var e=this,n=z.passeToDTO(t);return new Promise((function(t,a){e.restClient.PUT(e.getUrl(),n).then((function(e){var n=z.passeToDO(e);t({result:v.RequestResult.SUCCESS,payload:n})}),(function(t){a(0===t.status?{result:v.RequestResult.CONNECTION_PROBLEM}:{result:v.RequestResult.FAILURE})}))}))}}]),i}(v.DataProviderService)).\u0275fac=function(t){return new(t||me)(D.Ub(v.RestClient))},me.\u0275prov=D.Hb({token:me,factory:me.\u0275fac,providedIn:"root"}),me),Se=i("S0PF"),Ee=i("mwxE"),Ce=i("6NWb");function ke(t,e){if(1&t){var n=D.Rb();D.Qb(0,"button",11),D.Xb("click",(function(){D.pc(n);var t=D.Zb().$implicit;return D.Zb().updateSessionWithoutTokenGeneration(t.scheibenNr)})),D.Mb(1,"fa-icon",12),D.Pb()}2&t&&(D.zb(1),D.fc("icon","trash"))}function Te(t,e){if(1&t){var n=D.Rb();D.Qb(0,"button",13),D.Xb("click",(function(){D.pc(n);var t=D.Zb().$implicit;return D.Zb().updateSession(t.scheibenNr)})),D.Mb(1,"fa-icon",12),D.Pb()}2&t&&(D.zb(1),D.fc("icon","plus-circle"))}function Pe(t,e){if(1&t&&(D.Qb(0,"label"),D.Cc(1),D.Pb()),2&t){var n=D.Zb().$implicit;D.zb(1),D.Dc(n.accessToken)}}function Ue(t,e){if(1&t&&(D.Qb(0,"tr"),D.Qb(1,"td"),D.Qb(2,"span",6),D.Cc(3),D.Pb(),D.Pb(),D.Qb(4,"td"),D.Qb(5,"span",7),D.Cc(6),D.Pb(),D.Pb(),D.Qb(7,"td"),D.Ac(8,ke,2,1,"button",8),D.Ac(9,Te,2,1,"button",9),D.Pb(),D.Qb(10,"td"),D.Ac(11,Pe,2,1,"label",10),D.Pb(),D.Pb()),2&t){var n=e.$implicit;D.zb(3),D.Dc(n.scheibenNr),D.zb(2),D.Db("badge-danger",!n.isActive)("badge-success",n.isActive),D.zb(1),D.Ec(" ",n.isActive?"Aktiv":"Nicht aktiv"," "),D.zb(2),D.fc("ngIf",n.isActive),D.zb(1),D.fc("ngIf",!n.isActive),D.zb(2),D.fc("ngIf",n.isActive)}}var Ne,Re=["[]","null","undefined"],Ie=((Ne=function(){function t(e,n,a){s(this,t),this.route=e,this.router=n,this.tabletSessionService=a,this.currentDeviceIsActive=!1,this.accessToken=""}return l(t,[{key:"ngOnInit",value:function(){var t=this;this.route.params.subscribe((function(e){if(!Object(P.c)(e.wettkampfId)){var n=e.wettkampfId;t.tabletSessionService.findAllTabletSessions(n).then((function(e){t.sessions=e.payload,t.setActiveSession(),t.setTabletEingabeRoute(),t.accessToken=t.currentSession.accessToken.toString()}),(function(e){console.error(e),t.sessions=[];for(var a=0;a<8;a++)t.sessions.push(new Se.a(a+1,parseInt(n,10),!1));t.setActiveSession()}))}}))}},{key:"updateSession",value:function(t){var e=this,n=this.sessions[t-1];n.isActive=!n.isActive,this.storeCurrentSession(n),this.tabletSessionService.update(n).then((function(n){e.sessions[t-1]=e.currentSession=n.payload,e.storeCurrentSession(e.currentSession),e.accessToken=e.currentSession.accessToken.toString(),e.setTabletEingabeRoute(),e.currentDeviceIsActive&&e.currentSession&&e.currentSession.otherMatchId&&e.router.navigate([e.tabletEingabeRoute])}),(function(t){console.log(t)}))}},{key:"updateSessionWithoutTokenGeneration",value:function(t){var e=this,n=this.sessions[t-1];n.isActive=!n.isActive,this.storeCurrentSession(n),this.tabletSessionService.updateWithoutTokenCreation(n).then((function(n){e.sessions[t-1]=e.currentSession=n.payload,e.storeCurrentSession(e.currentSession),e.accessToken="",e.setTabletEingabeRoute(),e.currentDeviceIsActive&&e.currentSession&&e.currentSession.otherMatchId&&e.router.navigate([e.tabletEingabeRoute])}),(function(t){console.log(t)}))}},{key:"setActiveSession",value:function(){var t=localStorage.getItem("tabletSession");this.currentDeviceIsActive=Boolean(t)&&Re.indexOf(t)<0,this.currentDeviceIsActive&&(this.currentSession=JSON.parse(t),this.sessions[this.currentSession.scheibenNr-1]=this.currentSession)}},{key:"storeCurrentSession",value:function(t){t.isActive?(localStorage.setItem("tabletSession",JSON.stringify(t)),this.currentDeviceIsActive=!0):(localStorage.removeItem("tabletSession"),this.currentDeviceIsActive=!1)}},{key:"setTabletEingabeRoute",value:function(){this.currentSession&&(this.tabletEingabeRoute="/"+this.currentSession.matchID+"/"+this.currentSession.otherMatchId+"/tablet")}},{key:"canNavigateToEingabe",value:function(t){return this.currentDeviceIsActive&&this.currentSession&&this.currentSession.otherMatchId&&this.currentSession.scheibenNr===t.scheibenNr}}]),t}()).\u0275fac=function(t){return new(t||Ne)(D.Lb(u.a),D.Lb(u.d),D.Lb(Ee.a))},Ne.\u0275cmp=D.Fb({type:Ne,selectors:[["bla-tablet-admin"]],decls:20,vars:16,consts:[[1,"container"],[1,"mb-4","mt-3"],[1,"table-responsive"],[1,"table"],[2,"width","25%"],[4,"ngFor","ngForOf"],[1,"h4","text-secondary","text-center","m-0","p-0"],[1,"badge"],["class","btn btn-danger",3,"click",4,"ngIf"],["class","btn btn-success",3,"click",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-danger",3,"click"],[3,"icon"],[1,"btn","btn-success",3,"click"]],template:function(t,e){1&t&&(D.Qb(0,"div",0),D.Qb(1,"h2",1),D.Cc(2),D.ac(3,"translate"),D.Pb(),D.Qb(4,"div",2),D.Qb(5,"table",3),D.Qb(6,"tr"),D.Qb(7,"th",4),D.Cc(8),D.ac(9,"translate"),D.Pb(),D.Qb(10,"th",4),D.Cc(11),D.ac(12,"translate"),D.Pb(),D.Qb(13,"th",4),D.Cc(14),D.ac(15,"translate"),D.Pb(),D.Qb(16,"th",4),D.Cc(17),D.ac(18,"translate"),D.Pb(),D.Pb(),D.Ac(19,Ue,12,9,"tr",5),D.Pb(),D.Pb(),D.Pb()),2&t&&(D.zb(2),D.Dc(D.bc(3,6,"WKDURCHFUEHRUNG.TABLET_ADMIN.VERWALTUNG")),D.zb(6),D.Dc(D.bc(9,8,"WKDURCHFUEHRUNG.TABLET_ADMIN.SCHEIBE")),D.zb(3),D.Dc(D.bc(12,10,"WKDURCHFUEHRUNG.TABLET_ADMIN.STATUS")),D.zb(3),D.Dc(D.bc(15,12,"WKDURCHFUEHRUNG.TABLET_ADMIN.AKTIONEN")),D.zb(3),D.Dc(D.bc(18,14,"WKDURCHFUEHRUNG.TABLET_ADMIN.ACCESS_TOKEN")),D.zb(2),D.fc("ngForOf",e.sessions))},directives:[c.s,c.t,Ce.b],pipes:[Pt.d],styles:["input[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{display:block}input[_ngcontent-%COMP%]::-webkit-inner-spin-button, input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{alignment:center;text-align:center}"]}),Ne);function ze(t,e){if(1&t){var n=D.Rb();D.Qb(0,"div",14),D.Qb(1,"label",15),D.Cc(2),D.ac(3,"translate"),D.Pb(),D.Qb(4,"input",16),D.Xb("ngModelChange",(function(t){D.pc(n);var a=e.index;return D.Zb(3).schuetzen[a].schuetzeNr=t})),D.Pb(),D.Pb()}if(2&t){var a=e.index,i=D.Zb(3);D.zb(1),D.fc("for","schuetze"+a+"1Nummer"),D.zb(1),D.Fc("",a+1,". ",D.bc(3,6,"WKDURCHFUEHRUNG.TABLET_INPUT.SCHUETZE"),""),D.zb(2),D.fc("ngModel",i.schuetzen[a].schuetzeNr)("id","schuetze"+a+"1Nummer")("tabindex",a+1)}}function ye(t,e){if(1&t){var n=D.Rb();D.Qb(0,"div",3),D.Qb(1,"h2",8),D.Cc(2),D.ac(3,"translate"),D.Pb(),D.Pb(),D.Qb(4,"div",9),D.Qb(5,"div",10),D.Ac(6,ze,5,8,"ng-template",11),D.Pb(),D.Pb(),D.Qb(7,"div",12),D.Qb(8,"button",13),D.Xb("click",(function(){return D.pc(n),D.Zb(2).submitSchuetzenNr()})),D.Cc(9),D.ac(10,"translate"),D.Pb(),D.Pb()}if(2&t){var a=D.Zb(2);D.zb(2),D.Dc(D.bc(3,4,"WKDURCHFUEHRUNG.TABLET_INPUT.SCHUETZEN_NUMMERN")),D.zb(4),D.fc("ngForOf",a.schuetzen),D.zb(2),D.fc("disabled",!a.hasValidSchuetzenNr()),D.zb(1),D.Ec(" ",D.bc(10,6,"WKDURCHFUEHRUNG.TABLET_INPUT.SAVE")," ")}}function Oe(t,e){if(1&t){var n=D.Rb();D.Qb(0,"input",26),D.Xb("ngModelChange",(function(t){D.pc(n);var e=D.Zb().$implicit;return D.Zb(3).onChange(t,1,e)}))("ngModelChange",(function(t){D.pc(n);var e=D.Zb().$implicit,a=D.Zb(3);return e.passen[a.tabletSession.satzNr-1].ringzahlPfeil1=t})),D.Pb(),D.Qb(1,"input",26),D.Xb("ngModelChange",(function(t){D.pc(n);var e=D.Zb().$implicit;return D.Zb(3).onChange(t,2,e)}))("ngModelChange",(function(t){D.pc(n);var e=D.Zb().$implicit,a=D.Zb(3);return e.passen[a.tabletSession.satzNr-1].ringzahlPfeil2=t})),D.Pb()}if(2&t){var a=D.Zb().$implicit,i=D.Zb(3);D.fc("ngModel",a.passen[i.tabletSession.satzNr-1].ringzahlPfeil1),D.zb(1),D.fc("ngModel",a.passen[i.tabletSession.satzNr-1].ringzahlPfeil2)}}var we=function(t,e){return{"offset-lg-2 offset-xl-3":t,"mb-4":e}};function Me(t,e){if(1&t&&(D.Qb(0,"div",23),D.Qb(1,"div",24),D.Qb(2,"h4"),D.Cc(3),D.Pb(),D.Qb(4,"div",25),D.Ac(5,Oe,2,2,"ng-template",2),D.Pb(),D.Pb(),D.Pb()),2&t){var n=e.index,a=e.$implicit,i=D.Zb(3);D.fc("ngClass",D.lc(3,we,0===n,2===n)),D.zb(3),D.Ec("Sch\xfctze ",a.schuetzeNr,""),D.zb(2),D.fc("ngIf",a.passen.length>=i.tabletSession.satzNr)}}function He(t,e){if(1&t){var n=D.Rb();D.Qb(0,"div",17),D.Qb(1,"h2"),D.Cc(2),D.Pb(),D.Qb(3,"span",7),D.Cc(4,"\u2022"),D.Pb(),D.Qb(5,"h2",18),D.Cc(6),D.ac(7,"translate"),D.Pb(),D.Pb(),D.Ac(8,Me,6,6,"ng-template",11),D.Qb(9,"div",19),D.Qb(10,"button",20),D.Xb("click",(function(){return D.pc(n),D.Zb(2).nextMatch()})),D.Cc(11),D.ac(12,"translate"),D.Mb(13,"i",21),D.Pb(),D.Qb(14,"button",22),D.Xb("click",(function(){return D.pc(n),D.Zb(2).nextSatz()})),D.Cc(15),D.ac(16,"translate"),D.Mb(17,"i",21),D.Pb(),D.Pb()}if(2&t){var a=D.Zb(2);D.zb(2),D.Dc(a.currentMatch.mannschaftName),D.zb(4),D.Fc("",D.bc(7,7,"WKDURCHFUEHRUNG.TABLET_INPUT.SATZ")," ",a.tabletSession.satzNr,""),D.zb(2),D.fc("ngForOf",a.schuetzen),D.zb(3),D.Ec(" ",D.bc(12,9,"WKDURCHFUEHRUNG.TABLET_INPUT.NEXT_MATCH")," "),D.zb(3),D.fc("disabled",!a.allPasseFilled()),D.zb(1),D.Ec(" ",D.bc(16,11,"WKDURCHFUEHRUNG.TABLET_INPUT.NEXT_SET")," ")}}function Ae(t,e){if(1&t&&(D.Qb(0,"div",3),D.Qb(1,"h1",4),D.Cc(2),D.ac(3,"translate"),D.Pb(),D.Pb(),D.Qb(4,"div",5),D.Qb(5,"h3",6),D.Cc(6),D.ac(7,"translate"),D.Pb(),D.Qb(8,"span",7),D.Cc(9,"\u2022"),D.Pb(),D.Qb(10,"h3",6),D.Cc(11),D.ac(12,"translate"),D.Pb(),D.Qb(13,"span",7),D.Cc(14,"\u2022"),D.Pb(),D.Qb(15,"h3",6),D.Cc(16),D.Pb(),D.Pb(),D.Qb(17,"div",3),D.Mb(18,"hr"),D.Pb(),D.Ac(19,ye,11,8,"ng-template",2),D.Ac(20,He,18,13,"ng-template",2)),2&t){var n=D.Zb();D.zb(2),D.Fc("",D.bc(3,10,"WKDURCHFUEHRUNG.TABLET_INPUT.SCHEIBE")," ",n.tabletSession.scheibenNr,""),D.zb(4),D.Fc("",D.bc(7,12,"WKDURCHFUEHRUNG.TABLET_INPUT.WETTKAMPFTAG")," ",n.match1.wettkampfTag,""),D.zb(5),D.Fc("",D.bc(12,14,"WKDURCHFUEHRUNG.TABLET_INPUT.MATCH")," ",n.match1.nr,""),D.zb(5),D.Fc("",n.match1.mannschaftName," vs. ",n.match2.mannschaftName,""),D.zb(3),D.fc("ngIf",!n.hasSchuetzenNummern()),D.zb(1),D.fc("ngIf",n.hasSchuetzenNummern())}}function De(t,e){if(1&t&&(D.Qb(0,"div",27),D.Qb(1,"div",28),D.Cc(2),D.ac(3,"translate"),D.Qb(4,"a",29),D.Cc(5),D.ac(6,"translate"),D.Pb(),D.Cc(7,". "),D.Pb(),D.Pb()),2&t){var n=D.Zb();D.zb(2),D.Ec(" ",D.bc(3,3,"WKDURCHFUEHRUNG.TABLET_INPUT.CONFIGURE_PART1")," "),D.zb(2),D.gc("routerLink",n.tabletAdminRoute),D.zb(1),D.Dc(D.bc(6,5,"WKDURCHFUEHRUNG.TABLET_INPUT.CONFIGURE_PART2"))}}var Fe,Le,Qe,Ge,_e,xe,We=function(){function t(e){s(this,t),this.passen=[],this.addPasse(),this.schuetzeNr=Number.isNaN(e)?null:e}return l(t,[{key:"addPasse",value:function(){var t=new I;t.lfdNr=this.passen.length+1,t.rueckennummer=this.schuetzeNr,this.passen.push(t)}}]),t}(),Ke=new N(null,null,null,1,1,1,1,[],1,1,null,null),Ze=((Fe=function(){function t(e,n,a,i,r,c,o){s(this,t),this.schusszettelService=e,this.passeService=n,this.matchService=a,this.tabletSessionService=i,this.route=r,this.router=c,this.notificationService=o}return l(t,[{key:"ngOnInit",value:function(){var t=this;this.match1=Ke,this.match2=Ke,this.currentMatch=Ke,this.route.params.subscribe((function(e){Object(P.c)(e.match1id)||Object(P.c)(e.match2id)||t.schusszettelService.findMatches(e.match1id,e.match2id).then((function(e){t.match1=e.payload[0],t.match2=e.payload[1],t.tabletAdminRoute="/schusszettel/tabletadmin/"+t.match1.wettkampfId,t.initStorageData(),t.tabletSession&&(t.currentMatch=t.match2.scheibenNummer===t.tabletSession.scheibenNr?t.match2:t.match1,t.initExistingPassen()),t.tabletSession.matchID=t.currentMatch&&t.currentMatch.id?t.currentMatch.id:t.tabletSession.matchID,t.updateTabletSession(),t.dumpStorageData()}),(function(t){console.error(t)}))}))}},{key:"initStorageData",value:function(){var t=this,e=Number.parseInt(localStorage.getItem("submittedSchuetzenNr"),10);try{this.tabletSession=JSON.parse(localStorage.getItem("tabletSession")),this.tabletSession.satzNr||(this.tabletSession.satzNr=1,this.updateTabletSession())}catch(n){this.notificationService.observeNotification("tabletSessionMissing").subscribe((function(e){e.userAction===O.h.ACCEPTED&&t.router.navigate([t.tabletAdminRoute])})),this.resetStorageData(),this.showMissingTabletSessionNotification()}this.submittedSchuetzenNr=!(!Boolean(e)||isNaN(e))&&1===e,this.initSchuetzen()}},{key:"initSchuetzen",value:function(){var e=localStorage.getItem("schuetzen"),n=Boolean(e)?JSON.parse(e):[];if(this.schuetzen=[],0===n.length){var a,i=r(t.getSchuetzeIdxValues());try{for(i.s();!(a=i.n()).done;){var c=a.value,s=Number.parseInt(localStorage.getItem("schuetze"+(c+1)),10);this.schuetzen.push(new We(s))}}catch(S){i.e(S)}finally{i.f()}}else{var o,l=r(n);try{for(l.s();!(o=l.n()).done;){var u=o.value,h=new We(Number(u.schuetzeNr));h.passen=[];var f,b=r(u.passen);try{for(b.s();!(f=b.n()).done;){for(var d=f.value,m=new I,p=0,g=Object.keys(d);p<g.length;p++){var v=g[p];m[v]=d[v]}h.passen.push(m)}}catch(S){b.e(S)}finally{b.f()}this.schuetzen.push(h)}}catch(S){l.e(S)}finally{l.f()}}}},{key:"dumpStorageData",value:function(){if(localStorage.setItem("tabletSession",JSON.stringify(this.tabletSession)),localStorage.setItem("submittedSchuetzenNr",this.submittedSchuetzenNr?Number(1).toString():Number(0).toString()),localStorage.setItem("schuetzen",Boolean(this.schuetzen)?JSON.stringify(this.schuetzen):""),this.hasSchuetzenNummern()){var e,n=r(t.getSchuetzeIdxValues());try{for(n.s();!(e=n.n()).done;){var a=e.value;localStorage.setItem("schuetze"+(a+1),this.schuetzen[a].schuetzeNr.toString())}}catch(i){n.e(i)}finally{n.f()}}}},{key:"resetStorageData",value:function(){localStorage.setItem("submittedSchuetzenNr","0"),localStorage.setItem("schuetzen","");var e,n=r(t.getSchuetzeIdxValues());try{for(n.s();!(e=n.n()).done;){var a=e.value;localStorage.setItem("schuetze"+(a+1),"")}}catch(i){n.e(i)}finally{n.f()}this.schuetzen=[],this.submittedSchuetzenNr=!1}},{key:"initExistingPassen",value:function(){var t,e=0,n=r(this.currentMatch.schuetzen);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.length>0)for(this.schuetzen[e].passen=a;this.schuetzen[e].passen.length<this.tabletSession.satzNr;)this.schuetzen[e].addPasse();e++}}catch(i){n.e(i)}finally{n.f()}this.dumpStorageData()}},{key:"submitSchuetzenNr",value:function(){this.hasValidSchuetzenNr()&&(this.submittedSchuetzenNr=!0,this.dumpStorageData())}},{key:"hasValidSchuetzenNr",value:function(){return Boolean(this.schuetzen)&&null!==this.schuetzen[0].schuetzeNr&&null!==this.schuetzen[1].schuetzeNr&&null!==this.schuetzen[2].schuetzeNr&&this.schuetzen[0].schuetzeNr>0&&this.schuetzen[1].schuetzeNr>0&&this.schuetzen[2].schuetzeNr>0}},{key:"hasSchuetzenNummern",value:function(){return this.hasValidSchuetzenNr()&&this.submittedSchuetzenNr}},{key:"onChange",value:function(t,e,n){var a=n.passen[this.tabletSession.satzNr-1];a["ringzahlPfeil"+e]=t,this.passeIsValid(a)&&(this.enrichPasseDO(a,n),this.createOrUpdatePasse(a,n))}},{key:"createOrUpdatePasse",value:function(t,e){var n=this;null!==t.id?this.passeService.update(t).then((function(t){e.passen[n.tabletSession.satzNr-1]=t.payload,n.dumpStorageData()})).catch((function(t){console.error(t)})):this.passeService.create(t).then((function(t){e.passen[n.tabletSession.satzNr-1]=t.payload,n.dumpStorageData()})).catch((function(t){console.error(t)}))}},{key:"nextSatz",value:function(){this.allPasseFilled()&&(this.addEmptyPassen(),this.tabletSession.satzNr++,this.updateTabletSession(),this.dumpStorageData())}},{key:"addEmptyPassen",value:function(){var t,e=r(this.schuetzen);try{for(e.s();!(t=e.n()).done;)t.value.addPasse()}catch(n){e.e(n)}finally{e.f()}}},{key:"allPasseFilled",value:function(){var t,e=!0,n=r(this.schuetzen);try{for(n.s();!(t=n.n()).done;){var a=t.value;e=e&&this.passeIsValid(a.passen[this.tabletSession.satzNr-1])}}catch(i){n.e(i)}finally{n.f()}return e}},{key:"nextMatch",value:function(){var t=this;this.showConfirmNextMatchNotification(),this.notificationService.observeNotification("tabletEingabeConfirmNextMatch").subscribe((function(e){e.userAction===O.h.ACCEPTED&&(t.showNextMatchNotification(),t.matchService.next(t.currentMatch.id).then((function(e){2===e.payload.length&&(t.resetStorageData(),t.initStorageData(),t.router.navigate(["/schusszettel/"+e.payload[0]+"/"+e.payload[1]+"/tablet"]),t.notificationService.discardNotification())})))}))}},{key:"updateTabletSession",value:function(){var t=this;this.tabletSession&&this.tabletSessionService.update(this.tabletSession).then((function(e){t.tabletSession=e.payload,t.dumpStorageData()}))}},{key:"showMissingTabletSessionNotification",value:function(){this.notificationService.showNotification({id:"tabletSessionMissing",title:"Konfigurationsfehler",description:"Dieses Ger\xe4t wurde noch f\xfcr keine Scheibe registriert. Bitte holen Sie dies in der Ligatabelle-Administration nach.",severity:O.f.ERROR,origin:O.d.SYSTEM,type:O.g.OK,userAction:O.h.PENDING})}},{key:"showConfirmNextMatchNotification",value:function(){this.notificationService.showNotification({id:"tabletEingabeConfirmNextMatch",title:"N\xe4chstes Match starten",description:"Wollen Sie wirklich das n\xe4chste Match starten?",severity:O.f.QUESTION,origin:O.d.SYSTEM,type:O.g.YES_NO,userAction:O.h.PENDING})}},{key:"showNextMatchNotification",value:function(){this.notificationService.showNotification({id:"tabletEingabeNextMatch",title:"L\xe4dt ...",description:"Das n\xe4chste anstehende Match auf dieser Scheibe wird geladen...",severity:O.f.INFO,origin:O.d.USER,type:O.g.OK,userAction:O.h.PENDING})}},{key:"passeIsValid",value:function(t){return!!t&&t.ringzahlPfeil1&&t.ringzahlPfeil1>=0&&t.ringzahlPfeil2&&t.ringzahlPfeil2>=0}},{key:"enrichPasseDO",value:function(t,e){t.mannschaftId=this.currentMatch.mannschaftId,t.matchNr=this.currentMatch.nr,t.matchId=this.currentMatch.id,t.wettkampfId=this.currentMatch.wettkampfId,t.rueckennummer=e.schuetzeNr}}],[{key:"getSchuetzeIdxValues",value:function(){return Array.apply(null,{length:3}).map(Number.call,Number)}}]),t}()).\u0275fac=function(t){return new(t||Fe)(D.Lb(Qt),D.Lb(ve),D.Lb(F),D.Lb(Ee.a),D.Lb(u.a),D.Lb(u.d),D.Lb(O.e))},Fe.\u0275cmp=D.Fb({type:Fe,selectors:[["bla-tableteingabe"]],decls:4,vars:2,consts:[[1,"tablet-eingabe"],[1,"row"],[3,"ngIf"],[1,"col-sm-12"],[1,"w-100","text-center","my-3"],[1,"col-sm-12","tablet-eingabe-info-section"],[1,"text-center","d-inline-block"],[1,"mx-3","separator"],[1,"w-100","text-center","d-inline-block"],[1,"offset-lg-3","col-lg-6","offset-xl-4","col-xl-4"],[1,"pb-5","pt-3","w-100","flex-container","justify-content-around"],["ngFor","",3,"ngForOf"],[1,"offset-4","col-sm-4","justify-content-end","flex-container"],[1,"btn","btn-primary","mb-5",3,"disabled","click"],[1,"d-inline-flex","align-items-center","flex-column"],[1,"h4",3,"for"],["blaMyNumberOnly","","type","number",3,"ngModel","id","tabindex","ngModelChange"],[1,"col-sm-12","tablet-eingabe-current"],[1,"mb-3"],[1,"offset-2","col-sm-8","justify-content-between","flex-container"],[1,"btn","btn-primary","mr-3","my-5",3,"click"],[1,"fa","fa-fw","fa-chevron-right"],[1,"btn","btn-primary","mr-3","my-5",3,"disabled","click"],[1,"col-lg-3","col-xl-2",3,"ngClass"],[1,"schuetze"],[1,"flex-container"],["blaMyNumberOnly","","type","text",1,"m-2",3,"ngModel","ngModelChange"],[1,"col-sm-12","justify-content-around"],[1,"alert","alert-warning","m-3"],[3,"routerLink"]],template:function(t,e){1&t&&(D.Qb(0,"div",0),D.Qb(1,"div",1),D.Ac(2,Ae,21,16,"ng-template",2),D.Ac(3,De,8,7,"ng-template",2),D.Pb(),D.Pb()),2&t&&(D.zb(2),D.fc("ngIf",e.tabletSession),D.zb(1),D.fc("ngIf",!e.tabletSession))},directives:[c.t,c.s,o.u,o.c,o.o,o.r,c.q,u.g],pipes:[Pt.d],styles:[".tablet-eingabe[_ngcontent-%COMP%]   .tablet-eingabe-info-section[_ngcontent-%COMP%]{text-align:center}.tablet-eingabe[_ngcontent-%COMP%]   .tablet-eingabe-info-section[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{font-size:1.75rem}.tablet-eingabe[_ngcontent-%COMP%]   .tablet-eingabe-current[_ngcontent-%COMP%]{text-align:center}.tablet-eingabe[_ngcontent-%COMP%]   .tablet-eingabe-current[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{font-size:2rem}input[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{display:block}input[_ngcontent-%COMP%]::-webkit-inner-spin-button, input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[_ngcontent-%COMP%]{height:55px;width:55px;-moz-appearance:textfield;font-size:30px;text-align:center}input[_ngcontent-%COMP%]:focus{box-shadow:0 0 8px 0 #057aff}.flex-container[_ngcontent-%COMP%]{display:flex}"]}),Fe),Be=i("th7h"),Ve=((Le=function(){function t(e){s(this,t),this.currentUserService=e}return l(t,[{key:"canActivate",value:function(){return this.currentUserService.hasAnyPermisson([Be.b.CAN_READ_WETTKAMPF,Be.b.CAN_MODIFY_WETTKAMPF])}}]),t}()).\u0275fac=function(t){return new(t||Le)(D.Ub(Be.a))},Le.\u0275prov=D.Hb({token:Le,factory:Le.\u0275fac}),Le),je=[{path:"",pathMatch:"full",component:Lt,canActivate:[Ve]},{path:"",pathMatch:"full",component:ge},{path:"",pathMatch:"full",component:Ze},{path:"",pathMatch:"full",component:Ie},{path:":wettkampfId",pathMatch:"full",component:Lt},{path:"tabletadmin/:wettkampfId",pathMatch:"full",component:Ie},{path:"schusszettel/:match1id/:match2id",pathMatch:"full",component:ge},{path:":match1id/:match2id/tablet",pathMatch:"full",component:Ze}],qe=((xe=function(){function t(e){s(this,t),this.currentUserService=e}return l(t,[{key:"canActivate",value:function(t,e){return this.currentUserService.hasPermission(O.j.CAN_READ_MY_VERANSTALTUNG)}}]),t}()).\u0275fac=function(t){return new(t||xe)(D.Ub(O.a))},xe.\u0275prov=D.Hb({token:xe,factory:xe.\u0275fac}),xe),Ye=((_e=function(){function t(e){s(this,t),this.currentUserService=e}return l(t,[{key:"canActivate",value:function(t,e){return this.currentUserService.hasPermission(O.j.CAN_OPERATE_SPOTTING)}}]),t}()).\u0275fac=function(t){return new(t||_e)(D.Ub(O.a))},_e.\u0275prov=D.Hb({token:_e,factory:_e.\u0275fac}),_e),Xe=((Ge=function(){function t(e){s(this,t),this.currentUserService=e}return l(t,[{key:"canActivate",value:function(t,e){return this.currentUserService.hasAnyPermisson([O.j.CAN_MODIFY_MY_VERANSTALTUNG,O.j.CAN_OPERATE_SPOTTING])}}]),t}()).\u0275fac=function(t){return new(t||Ge)(D.Ub(O.a))},Ge.\u0275prov=D.Hb({token:Ge,factory:Ge.\u0275fac}),Ge),$e=((Qe=function(){function t(){s(this,t)}return l(t,null,[{key:"forRoot",value:function(){return{ngModule:h.a,providers:[Ve,qe,Ye,Xe]}}}]),t}()).\u0275mod=D.Jb({type:Qe}),Qe.\u0275inj=D.Ib({factory:function(t){return new(t||Qe)},providers:[Ve,qe,Ye,Xe],imports:[[c.c,u.h.forChild(je),h.a.forChild(),o.k]]}),Qe)}}])}();