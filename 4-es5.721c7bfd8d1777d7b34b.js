!function(){function e(e,n){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(e,n)}(e))||n&&e&&"number"==typeof e.length){a&&(e=a);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==a.return||a.return()}finally{if(l)throw o}}}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function n(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=o(e);if(t){var i=o(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return r(this,n)}}function r(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{wQCW:function(t,r,o){"use strict";o.r(r),o.d(r,"VereineModule",(function(){return M}));var l,c,u=o("ofXK"),f=o("3Pt+"),h=o("tyNb"),d=o("FpXt"),p=o("mrSG"),y=o("tY1a"),g={moduleTranslationKey:"VEREINE",pageTitleTranslationKey:"VEREINE.VEREINE.TITLE",navigationCardsConfig:{navigationCards:[]}},v={columns:[{translationKey:"VEREINE.VEREINE.TABLE.HEADERS.VERANSTALTUNG",propertyName:"veranstaltung_name",width:20},{translationKey:"VEREINE.VEREINE.TABLE.HEADERS.WETTKAMPF",propertyName:"wettkampfTag",width:20},{translationKey:"TABLE.PLACE",propertyName:"wettkampfOrtsname",width:20},{translationKey:"VEREINE.VEREINE.TABLE.HEADERS.MANNSCHAFT",propertyName:"mannschaftsName",width:20}],actions:{actionTypes:[y.a.MAP],width:6}},m=o("X628"),b=o("FlTZ"),w=o("PEb7"),E=o("ny2l"),k=o("sQ0O"),V=o("nr0C"),T=function e(t,n,a,i){s(this,e),this.veranstaltung_name=t,this.wettkampfTag=n,this.wettkampfOrtsname=i,this.mannschaftsName=a,this.id=1,this.version=1},O=o("gQPg"),S=o("hEMT"),D=o("fXoL"),I=o("U9hD"),R=o("hIfO"),A=o("zLSN"),N=o("xOPY"),C=function(e){return[e]},P=((l=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,t);var r,o,l,c=i(u);function u(e,t,n,a,i,r,o){var l;return s(this,u),(l=c.call(this)).router=e,l.route=t,l.notificationService=n,l.wettkampfDataProvider=a,l.veranstaltungsDataProvider=i,l.vereinDataProvider=r,l.mannschaftsDataProvider=o,l.PLACEHOLDER_VAR="Bitte Verein eingeben...",l.config=g,l.config_table=v,l.multipleSelections=!0,l.loadingVereine=!0,l.loadingTable=!1,l.tableContent=[],l}return r=u,(o=[{key:"ngOnInit",value:function(){var e=this;console.log("Bin in Vereine"),this.currentVerein=null,this.providedID=null,this.hasID=!1,this.loading=!0,this.notificationService.discardNotification(),this.route.params.subscribe((function(t){Object(m.c)(t.id)||(e.hasID=!0,e.providedID=parseInt(t.id,10),console.log("This.providedID: "+e.providedID))})),this.loadVereine(),this.getAllVeranstaltungen(),this.getAllMannschaften()}},{key:"changeSelectedVerein",value:function(){var e=this;this.selectedVereine=[],this.vereinDataProvider.findById(this.selectedVereinsId).then((function(t){return e.getVereinSuccess(t.payload)})).catch((function(e){return console.log("Fehler im Verein laden")}))}},{key:"getVereinSuccess",value:function(e){this.currentVerein=e,this.selectedVereine.push(this.currentVerein)}},{key:"onSelect",value:function(e){this.selectedDTOs=[],this.selectedDTOs=e,this.selectedDTOs&&this.selectedDTOs.length>0&&(this.selectedVereinsId=this.selectedDTOs[0].id),this.changeVerein()}},{key:"changeVerein",value:function(){this.rows=[],this.tableContent=[],null!=this.selectedVereinsId&&this.loadTableRows()}},{key:"getSelectedDTO",value:function(){if(Object(m.a)(this.selectedDTOs))return"";var e=[];return this.selectedDTOs.forEach((function(t){e.push(t.name)})),e.join(", ")}},{key:"onView",value:function(e){}},{key:"onEdit",value:function(e){}},{key:"onDelete",value:function(e){}},{key:"getSelectedColumn",value:function(e){this.typeOfTableColumn=e.propertyName}},{key:"getAllVeranstaltungen",value:function(){var e=this;this.veranstaltungsDataProvider.findAll().then((function(t){e.veranstaltungen=t.payload}))}},{key:"getAllMannschaften",value:function(){var e=this;this.mannschaftsDataProvider.findAll().then((function(t){e.mannschaften=t.payload}))}},{key:"getSelectedRow",value:function(e){return Object(p.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.veranstaltung_name,a=e.mannschaftsName.replace(". Mannschaft",""),this.linkPreperation(this.typeOfTableColumn,n,a);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"linkPreperation",value:function(e,t,n){var a=this.veranstaltungen.find((function(e){return e.name===t}));if("veranstaltung_name"===e)this.vereineLinking(a.id.toString(10));else if("mannschaftsName"===e){var i=this.mannschaften.find((function(e){return e.name===n}));this.vereineLinking(a.id+"/"+i.id)}}},{key:"vereineLinking",value:function(e){this.router.navigateByUrl("/wettkaempfe/"+e)}},{key:"onMap",value:function(e){Object(S.a)(e)}},{key:"loadVereine",value:function(){var e=this;this.vereine=[],this.vereinDataProvider.findAll().then((function(t){e.vereine=t.payload.sort(),e.loadingVereine=!1,e.selectedVereinsId=e.hasID?e.providedID:t.payload[0].id,e.changeSelectedVerein(),e.onSelect(e.selectedVereine)})).catch((function(t){e.vereine=t.payload}))}},{key:"loadTableRows",value:function(){var e=this;this.loadingTable=!0,this.mannschaftsDataProvider.findAllByVereinsId(this.selectedVereinsId).then((function(t){return e.handleFindMannschaftenSuccess(t)})).catch((function(t){return e.handleFindMannschaftenFailure(t)}))}},{key:"handleFindMannschaftenFailure",value:function(e){this.rows=[],this.loadingTable=!1}},{key:"handleFindMannschaftenSuccess",value:function(e){var t,n=this,a=function(){var a=e.payload[t].name+". Mannschaft";n.wettkampfDataProvider.findAllWettkaempfeByMannschaftsId(e.payload[t].id).then((function(e){return n.handleFindWettkaempfeSuccess(e,a)})).catch((function(e){return n.handleFindWettkaempfeFailure(e)}))};for(this.rows=[],this.remainingMannschaftsRequests=e.payload.length,e.payload.length<=0&&(this.loadingTable=!1),t=0;t<e.payload.length;t++)a()}},{key:"handleFindWettkaempfeFailure",value:function(e){this.rows=[],this.loadingTable=!1}},{key:"handleFindWettkaempfeSuccess",value:function(t,n){var a=this;console.log("success"),this.remainingRequests=t.payload.length,this.remainingMannschaftsRequests-=1,t.payload.length<=0&&(this.loadingTable=!1);var i,r=e(t.payload);try{var o=function(){var e=i.value,t=e.wettkampfTag+". Wettkampftag",r=e.wettkampfOrtsname;a.veranstaltungsDataProvider.findById(e.wettkampfVeranstaltungsId).then((function(e){return a.handleFindVeranstaltungSuccess(e,n,t,r)})).catch((function(e){return a.handleFindVeranstaltungFailure(e)}))};for(r.s();!(i=r.n()).done;)o()}catch(l){r.e(l)}finally{r.f()}if(0===t.payload.length){var s=new T("","",n,"");this.tableContent.push(s)}this.remainingMannschaftsRequests<=0&&(this.rows=Object(w.toTableRows)(this.tableContent))}},{key:"handleFindVeranstaltungFailure",value:function(e){this.rows=[],this.loadingTable=!1}},{key:"handleFindVeranstaltungSuccess",value:function(e,t,n,a){console.log("Content:"+e.payload.name+n+t+a);var i=new T(e.payload.name,n,t,a);this.tableContent.push(i),this.remainingRequests-=1,this.remainingRequests<=0&&(this.rows=Object(w.toTableRows)(this.tableContent),this.tableContent=[],this.loadingTable=!1)}}])&&n(r.prototype,o),l&&n(r,l),u}(w.CommonComponentDirective)).\u0275fac=function(e){return new(e||l)(D.Jb(h.c),D.Jb(h.a),D.Jb(O.c),D.Jb(k.a),D.Jb(V.a),D.Jb(b.a),D.Jb(E.a))},l.\u0275cmp=D.Db({type:l,selectors:[["bla-vereine"]],features:[D.ub],decls:8,vars:13,consts:[[3,"config"],[1,"row"],["selectionListHeight","15em",2,"width","50%","flex-grow","0",3,"selectedItemIds","items","loading","multipleSelections","placeholderTranslationKey","optionFieldSelector","onSelect"],[3,"config","loading","rows","onColumnEntry","onRowEntry","onMapEntry"]],template:function(e,t){1&e&&(D.Ob(0,"bla-navigation-dialog",0),D.Ob(1,"div",1),D.Ob(2,"bla-col-layout"),D.Ob(3,"h2"),D.wc(4),D.Nb(),D.Ob(5,"bla-quicksearch-list",2),D.Vb("onSelect",(function(e){return t.onSelect(e)})),D.Nb(),D.Nb(),D.Nb(),D.Ob(6,"div",1),D.Ob(7,"bla-data-table",3),D.Vb("onColumnEntry",(function(e){return t.getSelectedColumn(e)}))("onRowEntry",(function(e){return t.getSelectedRow(e)}))("onMapEntry",(function(e){return t.onMap(e)})),D.Nb(),D.Nb(),D.Nb()),2&e&&(D.dc("config",t.config),D.xb(4),D.yc("Vereinsauswahl: ",t.getSelectedDTO(),""),D.xb(1),D.dc("selectedItemIds",D.ic(11,C,t.selectedVereinsId))("items",t.vereine)("loading",t.loadingVereine)("multipleSelections",!t.multipleSelections)("placeholderTranslationKey",t.PLACEHOLDER_VAR)("optionFieldSelector","name"),D.xb(2),D.dc("config",t.config_table)("loading",t.loadingTable)("rows",t.rows))},directives:[I.a,R.a,A.a,N.a],styles:[".row[_ngcontent-%COMP%]{margin:20px;display:flex;flex-direction:column}"]}),l),F=[{path:"",pathMatch:"full",component:P},{path:"/:id",pathMatch:"full",component:P}],M=((c=function e(){s(this,e)}).\u0275mod=D.Hb({type:c}),c.\u0275inj=D.Gb({factory:function(e){return new(e||c)},imports:[[u.c,h.g.forChild(F),d.a,f.k]]}),c)}}])}();